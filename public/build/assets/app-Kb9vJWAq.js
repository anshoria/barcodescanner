function Vs(c,l){for(var f=0;f<l.length;f++){const d=l[f];if(typeof d!="string"&&!Array.isArray(d)){for(const A in d)if(A!=="default"&&!(A in c)){const x=Object.getOwnPropertyDescriptor(d,A);x&&Object.defineProperty(c,A,x.get?x:{enumerable:!0,get:()=>d[A]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}function Pi(c,l){return function(){return c.apply(l,arguments)}}const{toString:Hs}=Object.prototype,{getPrototypeOf:Ur}=Object,er=(c=>l=>{const f=Hs.call(l);return c[f]||(c[f]=f.slice(8,-1).toLowerCase())})(Object.create(null)),It=c=>(c=c.toLowerCase(),l=>er(l)===c),tr=c=>l=>typeof l===c,{isArray:hn}=Array,On=tr("undefined");function Gs(c){return c!==null&&!On(c)&&c.constructor!==null&&!On(c.constructor)&&gt(c.constructor.isBuffer)&&c.constructor.isBuffer(c)}const Li=It("ArrayBuffer");function Ws(c){let l;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?l=ArrayBuffer.isView(c):l=c&&c.buffer&&Li(c.buffer),l}const Xs=tr("string"),gt=tr("function"),Fi=tr("number"),nr=c=>c!==null&&typeof c=="object",zs=c=>c===!0||c===!1,Yn=c=>{if(er(c)!=="object")return!1;const l=Ur(c);return(l===null||l===Object.prototype||Object.getPrototypeOf(l)===null)&&!(Symbol.toStringTag in c)&&!(Symbol.iterator in c)},Ys=It("Date"),Zs=It("File"),js=It("Blob"),qs=It("FileList"),Ks=c=>nr(c)&&gt(c.pipe),Qs=c=>{let l;return c&&(typeof FormData=="function"&&c instanceof FormData||gt(c.append)&&((l=er(c))==="formdata"||l==="object"&&gt(c.toString)&&c.toString()==="[object FormData]"))},Js=It("URLSearchParams"),[$s,eo,to,no]=["ReadableStream","Request","Response","Headers"].map(It),ro=c=>c.trim?c.trim():c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _n(c,l,{allOwnKeys:f=!1}={}){if(c===null||typeof c>"u")return;let d,A;if(typeof c!="object"&&(c=[c]),hn(c))for(d=0,A=c.length;d<A;d++)l.call(null,c[d],d,c);else{const x=f?Object.getOwnPropertyNames(c):Object.keys(c),p=x.length;let S;for(d=0;d<p;d++)S=x[d],l.call(null,c[S],S,c)}}function ki(c,l){l=l.toLowerCase();const f=Object.keys(c);let d=f.length,A;for(;d-- >0;)if(A=f[d],l===A.toLowerCase())return A;return null}const Kt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ui=c=>!On(c)&&c!==Kt;function Mr(){const{caseless:c}=Ui(this)&&this||{},l={},f=(d,A)=>{const x=c&&ki(l,A)||A;Yn(l[x])&&Yn(d)?l[x]=Mr(l[x],d):Yn(d)?l[x]=Mr({},d):hn(d)?l[x]=d.slice():l[x]=d};for(let d=0,A=arguments.length;d<A;d++)arguments[d]&&_n(arguments[d],f);return l}const io=(c,l,f,{allOwnKeys:d}={})=>(_n(l,(A,x)=>{f&&gt(A)?c[x]=Pi(A,f):c[x]=A},{allOwnKeys:d}),c),so=c=>(c.charCodeAt(0)===65279&&(c=c.slice(1)),c),oo=(c,l,f,d)=>{c.prototype=Object.create(l.prototype,d),c.prototype.constructor=c,Object.defineProperty(c,"super",{value:l.prototype}),f&&Object.assign(c.prototype,f)},ao=(c,l,f,d)=>{let A,x,p;const S={};if(l=l||{},c==null)return l;do{for(A=Object.getOwnPropertyNames(c),x=A.length;x-- >0;)p=A[x],(!d||d(p,c,l))&&!S[p]&&(l[p]=c[p],S[p]=!0);c=f!==!1&&Ur(c)}while(c&&(!f||f(c,l))&&c!==Object.prototype);return l},lo=(c,l,f)=>{c=String(c),(f===void 0||f>c.length)&&(f=c.length),f-=l.length;const d=c.indexOf(l,f);return d!==-1&&d===f},co=c=>{if(!c)return null;if(hn(c))return c;let l=c.length;if(!Fi(l))return null;const f=new Array(l);for(;l-- >0;)f[l]=c[l];return f},uo=(c=>l=>c&&l instanceof c)(typeof Uint8Array<"u"&&Ur(Uint8Array)),fo=(c,l)=>{const d=(c&&c[Symbol.iterator]).call(c);let A;for(;(A=d.next())&&!A.done;){const x=A.value;l.call(c,x[0],x[1])}},ho=(c,l)=>{let f;const d=[];for(;(f=c.exec(l))!==null;)d.push(f);return d},xo=It("HTMLFormElement"),go=c=>c.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(f,d,A){return d.toUpperCase()+A}),ui=(({hasOwnProperty:c})=>(l,f)=>c.call(l,f))(Object.prototype),wo=It("RegExp"),Vi=(c,l)=>{const f=Object.getOwnPropertyDescriptors(c),d={};_n(f,(A,x)=>{let p;(p=l(A,x,c))!==!1&&(d[x]=p||A)}),Object.defineProperties(c,d)},Ao=c=>{Vi(c,(l,f)=>{if(gt(c)&&["arguments","caller","callee"].indexOf(f)!==-1)return!1;const d=c[f];if(gt(d)){if(l.enumerable=!1,"writable"in l){l.writable=!1;return}l.set||(l.set=()=>{throw Error("Can not rewrite read-only method '"+f+"'")})}})},Eo=(c,l)=>{const f={},d=A=>{A.forEach(x=>{f[x]=!0})};return hn(c)?d(c):d(String(c).split(l)),f},Co=()=>{},mo=(c,l)=>c!=null&&Number.isFinite(c=+c)?c:l,Rr="abcdefghijklmnopqrstuvwxyz",fi="0123456789",Hi={DIGIT:fi,ALPHA:Rr,ALPHA_DIGIT:Rr+Rr.toUpperCase()+fi},po=(c=16,l=Hi.ALPHA_DIGIT)=>{let f="";const{length:d}=l;for(;c--;)f+=l[Math.random()*d|0];return f};function bo(c){return!!(c&&gt(c.append)&&c[Symbol.toStringTag]==="FormData"&&c[Symbol.iterator])}const Io=c=>{const l=new Array(10),f=(d,A)=>{if(nr(d)){if(l.indexOf(d)>=0)return;if(!("toJSON"in d)){l[A]=d;const x=hn(d)?[]:{};return _n(d,(p,S)=>{const _=f(p,A+1);!On(_)&&(x[S]=_)}),l[A]=void 0,x}}return d};return f(c,0)},yo=It("AsyncFunction"),So=c=>c&&(nr(c)||gt(c))&&gt(c.then)&&gt(c.catch),Gi=((c,l)=>c?setImmediate:l?((f,d)=>(Kt.addEventListener("message",({source:A,data:x})=>{A===Kt&&x===f&&d.length&&d.shift()()},!1),A=>{d.push(A),Kt.postMessage(f,"*")}))(`axios@${Math.random()}`,[]):f=>setTimeout(f))(typeof setImmediate=="function",gt(Kt.postMessage)),To=typeof queueMicrotask<"u"?queueMicrotask.bind(Kt):typeof process<"u"&&process.nextTick||Gi,B={isArray:hn,isArrayBuffer:Li,isBuffer:Gs,isFormData:Qs,isArrayBufferView:Ws,isString:Xs,isNumber:Fi,isBoolean:zs,isObject:nr,isPlainObject:Yn,isReadableStream:$s,isRequest:eo,isResponse:to,isHeaders:no,isUndefined:On,isDate:Ys,isFile:Zs,isBlob:js,isRegExp:wo,isFunction:gt,isStream:Ks,isURLSearchParams:Js,isTypedArray:uo,isFileList:qs,forEach:_n,merge:Mr,extend:io,trim:ro,stripBOM:so,inherits:oo,toFlatObject:ao,kindOf:er,kindOfTest:It,endsWith:lo,toArray:co,forEachEntry:fo,matchAll:ho,isHTMLForm:xo,hasOwnProperty:ui,hasOwnProp:ui,reduceDescriptors:Vi,freezeMethods:Ao,toObjectSet:Eo,toCamelCase:go,noop:Co,toFiniteNumber:mo,findKey:ki,global:Kt,isContextDefined:Ui,ALPHABET:Hi,generateString:po,isSpecCompliantForm:bo,toJSONObject:Io,isAsyncFn:yo,isThenable:So,setImmediate:Gi,asap:To};function oe(c,l,f,d,A){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=c,this.name="AxiosError",l&&(this.code=l),f&&(this.config=f),d&&(this.request=d),A&&(this.response=A,this.status=A.status?A.status:null)}B.inherits(oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const Wi=oe.prototype,Xi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(c=>{Xi[c]={value:c}});Object.defineProperties(oe,Xi);Object.defineProperty(Wi,"isAxiosError",{value:!0});oe.from=(c,l,f,d,A,x)=>{const p=Object.create(Wi);return B.toFlatObject(c,p,function(_){return _!==Error.prototype},S=>S!=="isAxiosError"),oe.call(p,c.message,l,f,d,A),p.cause=c,p.name=c.name,x&&Object.assign(p,x),p};const No=null;function Br(c){return B.isPlainObject(c)||B.isArray(c)}function zi(c){return B.endsWith(c,"[]")?c.slice(0,-2):c}function hi(c,l,f){return c?c.concat(l).map(function(A,x){return A=zi(A),!f&&x?"["+A+"]":A}).join(f?".":""):l}function Ro(c){return B.isArray(c)&&!c.some(Br)}const Oo=B.toFlatObject(B,{},null,function(l){return/^is[A-Z]/.test(l)});function rr(c,l,f){if(!B.isObject(c))throw new TypeError("target must be an object");l=l||new FormData,f=B.toFlatObject(f,{metaTokens:!0,dots:!1,indexes:!1},!1,function(G,Z){return!B.isUndefined(Z[G])});const d=f.metaTokens,A=f.visitor||T,x=f.dots,p=f.indexes,_=(f.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(l);if(!B.isFunction(A))throw new TypeError("visitor must be a function");function C(W){if(W===null)return"";if(B.isDate(W))return W.toISOString();if(!_&&B.isBlob(W))throw new oe("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(W)||B.isTypedArray(W)?_&&typeof Blob=="function"?new Blob([W]):Buffer.from(W):W}function T(W,G,Z){let Ce=W;if(W&&!Z&&typeof W=="object"){if(B.endsWith(G,"{}"))G=d?G:G.slice(0,-2),W=JSON.stringify(W);else if(B.isArray(W)&&Ro(W)||(B.isFileList(W)||B.endsWith(G,"[]"))&&(Ce=B.toArray(W)))return G=zi(G),Ce.forEach(function(X,ie){!(B.isUndefined(X)||X===null)&&l.append(p===!0?hi([G],ie,x):p===null?G:G+"[]",C(X))}),!1}return Br(W)?!0:(l.append(hi(Z,G,x),C(W)),!1)}const R=[],Q=Object.assign(Oo,{defaultVisitor:T,convertValue:C,isVisitable:Br});function q(W,G){if(!B.isUndefined(W)){if(R.indexOf(W)!==-1)throw Error("Circular reference detected in "+G.join("."));R.push(W),B.forEach(W,function(Ce,ne){(!(B.isUndefined(Ce)||Ce===null)&&A.call(l,Ce,B.isString(ne)?ne.trim():ne,G,Q))===!0&&q(Ce,G?G.concat(ne):[ne])}),R.pop()}}if(!B.isObject(c))throw new TypeError("data must be an object");return q(c),l}function di(c){const l={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(c).replace(/[!'()~]|%20|%00/g,function(d){return l[d]})}function Vr(c,l){this._pairs=[],c&&rr(c,this,l)}const Yi=Vr.prototype;Yi.append=function(l,f){this._pairs.push([l,f])};Yi.toString=function(l){const f=l?function(d){return l.call(this,d,di)}:di;return this._pairs.map(function(A){return f(A[0])+"="+f(A[1])},"").join("&")};function _o(c){return encodeURIComponent(c).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Zi(c,l,f){if(!l)return c;const d=f&&f.encode||_o;B.isFunction(f)&&(f={serialize:f});const A=f&&f.serialize;let x;if(A?x=A(l,f):x=B.isURLSearchParams(l)?l.toString():new Vr(l,f).toString(d),x){const p=c.indexOf("#");p!==-1&&(c=c.slice(0,p)),c+=(c.indexOf("?")===-1?"?":"&")+x}return c}class xi{constructor(){this.handlers=[]}use(l,f,d){return this.handlers.push({fulfilled:l,rejected:f,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1}eject(l){this.handlers[l]&&(this.handlers[l]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(l){B.forEach(this.handlers,function(d){d!==null&&l(d)})}}const ji={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Do=typeof URLSearchParams<"u"?URLSearchParams:Vr,Mo=typeof FormData<"u"?FormData:null,Bo=typeof Blob<"u"?Blob:null,vo={isBrowser:!0,classes:{URLSearchParams:Do,FormData:Mo,Blob:Bo},protocols:["http","https","file","blob","url","data"]},Hr=typeof window<"u"&&typeof document<"u",vr=typeof navigator=="object"&&navigator||void 0,Po=Hr&&(!vr||["ReactNative","NativeScript","NS"].indexOf(vr.product)<0),Lo=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Fo=Hr&&window.location.href||"http://localhost",ko=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hr,hasStandardBrowserEnv:Po,hasStandardBrowserWebWorkerEnv:Lo,navigator:vr,origin:Fo},Symbol.toStringTag,{value:"Module"})),et={...ko,...vo};function Uo(c,l){return rr(c,new et.classes.URLSearchParams,Object.assign({visitor:function(f,d,A,x){return et.isNode&&B.isBuffer(f)?(this.append(d,f.toString("base64")),!1):x.defaultVisitor.apply(this,arguments)}},l))}function Vo(c){return B.matchAll(/\w+|\[(\w*)]/g,c).map(l=>l[0]==="[]"?"":l[1]||l[0])}function Ho(c){const l={},f=Object.keys(c);let d;const A=f.length;let x;for(d=0;d<A;d++)x=f[d],l[x]=c[x];return l}function qi(c){function l(f,d,A,x){let p=f[x++];if(p==="__proto__")return!0;const S=Number.isFinite(+p),_=x>=f.length;return p=!p&&B.isArray(A)?A.length:p,_?(B.hasOwnProp(A,p)?A[p]=[A[p],d]:A[p]=d,!S):((!A[p]||!B.isObject(A[p]))&&(A[p]=[]),l(f,d,A[p],x)&&B.isArray(A[p])&&(A[p]=Ho(A[p])),!S)}if(B.isFormData(c)&&B.isFunction(c.entries)){const f={};return B.forEachEntry(c,(d,A)=>{l(Vo(d),A,f,0)}),f}return null}function Go(c,l,f){if(B.isString(c))try{return(l||JSON.parse)(c),B.trim(c)}catch(d){if(d.name!=="SyntaxError")throw d}return(f||JSON.stringify)(c)}const Dn={transitional:ji,adapter:["xhr","http","fetch"],transformRequest:[function(l,f){const d=f.getContentType()||"",A=d.indexOf("application/json")>-1,x=B.isObject(l);if(x&&B.isHTMLForm(l)&&(l=new FormData(l)),B.isFormData(l))return A?JSON.stringify(qi(l)):l;if(B.isArrayBuffer(l)||B.isBuffer(l)||B.isStream(l)||B.isFile(l)||B.isBlob(l)||B.isReadableStream(l))return l;if(B.isArrayBufferView(l))return l.buffer;if(B.isURLSearchParams(l))return f.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),l.toString();let S;if(x){if(d.indexOf("application/x-www-form-urlencoded")>-1)return Uo(l,this.formSerializer).toString();if((S=B.isFileList(l))||d.indexOf("multipart/form-data")>-1){const _=this.env&&this.env.FormData;return rr(S?{"files[]":l}:l,_&&new _,this.formSerializer)}}return x||A?(f.setContentType("application/json",!1),Go(l)):l}],transformResponse:[function(l){const f=this.transitional||Dn.transitional,d=f&&f.forcedJSONParsing,A=this.responseType==="json";if(B.isResponse(l)||B.isReadableStream(l))return l;if(l&&B.isString(l)&&(d&&!this.responseType||A)){const p=!(f&&f.silentJSONParsing)&&A;try{return JSON.parse(l)}catch(S){if(p)throw S.name==="SyntaxError"?oe.from(S,oe.ERR_BAD_RESPONSE,this,null,this.response):S}}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:et.classes.FormData,Blob:et.classes.Blob},validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],c=>{Dn.headers[c]={}});const Wo=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Xo=c=>{const l={};let f,d,A;return c&&c.split(`
`).forEach(function(p){A=p.indexOf(":"),f=p.substring(0,A).trim().toLowerCase(),d=p.substring(A+1).trim(),!(!f||l[f]&&Wo[f])&&(f==="set-cookie"?l[f]?l[f].push(d):l[f]=[d]:l[f]=l[f]?l[f]+", "+d:d)}),l},gi=Symbol("internals");function Nn(c){return c&&String(c).trim().toLowerCase()}function Zn(c){return c===!1||c==null?c:B.isArray(c)?c.map(Zn):String(c)}function zo(c){const l=Object.create(null),f=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=f.exec(c);)l[d[1]]=d[2];return l}const Yo=c=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(c.trim());function Or(c,l,f,d,A){if(B.isFunction(d))return d.call(this,l,f);if(A&&(l=f),!!B.isString(l)){if(B.isString(d))return l.indexOf(d)!==-1;if(B.isRegExp(d))return d.test(l)}}function Zo(c){return c.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(l,f,d)=>f.toUpperCase()+d)}function jo(c,l){const f=B.toCamelCase(" "+l);["get","set","has"].forEach(d=>{Object.defineProperty(c,d+f,{value:function(A,x,p){return this[d].call(this,l,A,x,p)},configurable:!0})})}let ht=class{constructor(l){l&&this.set(l)}set(l,f,d){const A=this;function x(S,_,C){const T=Nn(_);if(!T)throw new Error("header name must be a non-empty string");const R=B.findKey(A,T);(!R||A[R]===void 0||C===!0||C===void 0&&A[R]!==!1)&&(A[R||_]=Zn(S))}const p=(S,_)=>B.forEach(S,(C,T)=>x(C,T,_));if(B.isPlainObject(l)||l instanceof this.constructor)p(l,f);else if(B.isString(l)&&(l=l.trim())&&!Yo(l))p(Xo(l),f);else if(B.isHeaders(l))for(const[S,_]of l.entries())x(_,S,d);else l!=null&&x(f,l,d);return this}get(l,f){if(l=Nn(l),l){const d=B.findKey(this,l);if(d){const A=this[d];if(!f)return A;if(f===!0)return zo(A);if(B.isFunction(f))return f.call(this,A,d);if(B.isRegExp(f))return f.exec(A);throw new TypeError("parser must be boolean|regexp|function")}}}has(l,f){if(l=Nn(l),l){const d=B.findKey(this,l);return!!(d&&this[d]!==void 0&&(!f||Or(this,this[d],d,f)))}return!1}delete(l,f){const d=this;let A=!1;function x(p){if(p=Nn(p),p){const S=B.findKey(d,p);S&&(!f||Or(d,d[S],S,f))&&(delete d[S],A=!0)}}return B.isArray(l)?l.forEach(x):x(l),A}clear(l){const f=Object.keys(this);let d=f.length,A=!1;for(;d--;){const x=f[d];(!l||Or(this,this[x],x,l,!0))&&(delete this[x],A=!0)}return A}normalize(l){const f=this,d={};return B.forEach(this,(A,x)=>{const p=B.findKey(d,x);if(p){f[p]=Zn(A),delete f[x];return}const S=l?Zo(x):String(x).trim();S!==x&&delete f[x],f[S]=Zn(A),d[S]=!0}),this}concat(...l){return this.constructor.concat(this,...l)}toJSON(l){const f=Object.create(null);return B.forEach(this,(d,A)=>{d!=null&&d!==!1&&(f[A]=l&&B.isArray(d)?d.join(", "):d)}),f}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([l,f])=>l+": "+f).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(l){return l instanceof this?l:new this(l)}static concat(l,...f){const d=new this(l);return f.forEach(A=>d.set(A)),d}static accessor(l){const d=(this[gi]=this[gi]={accessors:{}}).accessors,A=this.prototype;function x(p){const S=Nn(p);d[S]||(jo(A,p),d[S]=!0)}return B.isArray(l)?l.forEach(x):x(l),this}};ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(ht.prototype,({value:c},l)=>{let f=l[0].toUpperCase()+l.slice(1);return{get:()=>c,set(d){this[f]=d}}});B.freezeMethods(ht);function _r(c,l){const f=this||Dn,d=l||f,A=ht.from(d.headers);let x=d.data;return B.forEach(c,function(S){x=S.call(f,x,A.normalize(),l?l.status:void 0)}),A.normalize(),x}function Ki(c){return!!(c&&c.__CANCEL__)}function dn(c,l,f){oe.call(this,c??"canceled",oe.ERR_CANCELED,l,f),this.name="CanceledError"}B.inherits(dn,oe,{__CANCEL__:!0});function Qi(c,l,f){const d=f.config.validateStatus;!f.status||!d||d(f.status)?c(f):l(new oe("Request failed with status code "+f.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(f.status/100)-4],f.config,f.request,f))}function qo(c){const l=/^([-+\w]{1,25})(:?\/\/|:)/.exec(c);return l&&l[1]||""}function Ko(c,l){c=c||10;const f=new Array(c),d=new Array(c);let A=0,x=0,p;return l=l!==void 0?l:1e3,function(_){const C=Date.now(),T=d[x];p||(p=C),f[A]=_,d[A]=C;let R=x,Q=0;for(;R!==A;)Q+=f[R++],R=R%c;if(A=(A+1)%c,A===x&&(x=(x+1)%c),C-p<l)return;const q=T&&C-T;return q?Math.round(Q*1e3/q):void 0}}function Qo(c,l){let f=0,d=1e3/l,A,x;const p=(C,T=Date.now())=>{f=T,A=null,x&&(clearTimeout(x),x=null),c.apply(null,C)};return[(...C)=>{const T=Date.now(),R=T-f;R>=d?p(C,T):(A=C,x||(x=setTimeout(()=>{x=null,p(A)},d-R)))},()=>A&&p(A)]}const qn=(c,l,f=3)=>{let d=0;const A=Ko(50,250);return Qo(x=>{const p=x.loaded,S=x.lengthComputable?x.total:void 0,_=p-d,C=A(_),T=p<=S;d=p;const R={loaded:p,total:S,progress:S?p/S:void 0,bytes:_,rate:C||void 0,estimated:C&&S&&T?(S-p)/C:void 0,event:x,lengthComputable:S!=null,[l?"download":"upload"]:!0};c(R)},f)},wi=(c,l)=>{const f=c!=null;return[d=>l[0]({lengthComputable:f,total:c,loaded:d}),l[1]]},Ai=c=>(...l)=>B.asap(()=>c(...l)),Jo=et.hasStandardBrowserEnv?((c,l)=>f=>(f=new URL(f,et.origin),c.protocol===f.protocol&&c.host===f.host&&(l||c.port===f.port)))(new URL(et.origin),et.navigator&&/(msie|trident)/i.test(et.navigator.userAgent)):()=>!0,$o=et.hasStandardBrowserEnv?{write(c,l,f,d,A,x){const p=[c+"="+encodeURIComponent(l)];B.isNumber(f)&&p.push("expires="+new Date(f).toGMTString()),B.isString(d)&&p.push("path="+d),B.isString(A)&&p.push("domain="+A),x===!0&&p.push("secure"),document.cookie=p.join("; ")},read(c){const l=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return l?decodeURIComponent(l[3]):null},remove(c){this.write(c,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ea(c){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(c)}function ta(c,l){return l?c.replace(/\/?\/$/,"")+"/"+l.replace(/^\/+/,""):c}function Ji(c,l){return c&&!ea(l)?ta(c,l):l}const Ei=c=>c instanceof ht?{...c}:c;function Jt(c,l){l=l||{};const f={};function d(C,T,R,Q){return B.isPlainObject(C)&&B.isPlainObject(T)?B.merge.call({caseless:Q},C,T):B.isPlainObject(T)?B.merge({},T):B.isArray(T)?T.slice():T}function A(C,T,R,Q){if(B.isUndefined(T)){if(!B.isUndefined(C))return d(void 0,C,R,Q)}else return d(C,T,R,Q)}function x(C,T){if(!B.isUndefined(T))return d(void 0,T)}function p(C,T){if(B.isUndefined(T)){if(!B.isUndefined(C))return d(void 0,C)}else return d(void 0,T)}function S(C,T,R){if(R in l)return d(C,T);if(R in c)return d(void 0,C)}const _={url:x,method:x,data:x,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,withXSRFToken:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:S,headers:(C,T,R)=>A(Ei(C),Ei(T),R,!0)};return B.forEach(Object.keys(Object.assign({},c,l)),function(T){const R=_[T]||A,Q=R(c[T],l[T],T);B.isUndefined(Q)&&R!==S||(f[T]=Q)}),f}const $i=c=>{const l=Jt({},c);let{data:f,withXSRFToken:d,xsrfHeaderName:A,xsrfCookieName:x,headers:p,auth:S}=l;l.headers=p=ht.from(p),l.url=Zi(Ji(l.baseURL,l.url),c.params,c.paramsSerializer),S&&p.set("Authorization","Basic "+btoa((S.username||"")+":"+(S.password?unescape(encodeURIComponent(S.password)):"")));let _;if(B.isFormData(f)){if(et.hasStandardBrowserEnv||et.hasStandardBrowserWebWorkerEnv)p.setContentType(void 0);else if((_=p.getContentType())!==!1){const[C,...T]=_?_.split(";").map(R=>R.trim()).filter(Boolean):[];p.setContentType([C||"multipart/form-data",...T].join("; "))}}if(et.hasStandardBrowserEnv&&(d&&B.isFunction(d)&&(d=d(l)),d||d!==!1&&Jo(l.url))){const C=A&&x&&$o.read(x);C&&p.set(A,C)}return l},na=typeof XMLHttpRequest<"u",ra=na&&function(c){return new Promise(function(f,d){const A=$i(c);let x=A.data;const p=ht.from(A.headers).normalize();let{responseType:S,onUploadProgress:_,onDownloadProgress:C}=A,T,R,Q,q,W;function G(){q&&q(),W&&W(),A.cancelToken&&A.cancelToken.unsubscribe(T),A.signal&&A.signal.removeEventListener("abort",T)}let Z=new XMLHttpRequest;Z.open(A.method.toUpperCase(),A.url,!0),Z.timeout=A.timeout;function Ce(){if(!Z)return;const X=ht.from("getAllResponseHeaders"in Z&&Z.getAllResponseHeaders()),De={data:!S||S==="text"||S==="json"?Z.responseText:Z.response,status:Z.status,statusText:Z.statusText,headers:X,config:c,request:Z};Qi(function(U){f(U),G()},function(U){d(U),G()},De),Z=null}"onloadend"in Z?Z.onloadend=Ce:Z.onreadystatechange=function(){!Z||Z.readyState!==4||Z.status===0&&!(Z.responseURL&&Z.responseURL.indexOf("file:")===0)||setTimeout(Ce)},Z.onabort=function(){Z&&(d(new oe("Request aborted",oe.ECONNABORTED,c,Z)),Z=null)},Z.onerror=function(){d(new oe("Network Error",oe.ERR_NETWORK,c,Z)),Z=null},Z.ontimeout=function(){let ie=A.timeout?"timeout of "+A.timeout+"ms exceeded":"timeout exceeded";const De=A.transitional||ji;A.timeoutErrorMessage&&(ie=A.timeoutErrorMessage),d(new oe(ie,De.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,c,Z)),Z=null},x===void 0&&p.setContentType(null),"setRequestHeader"in Z&&B.forEach(p.toJSON(),function(ie,De){Z.setRequestHeader(De,ie)}),B.isUndefined(A.withCredentials)||(Z.withCredentials=!!A.withCredentials),S&&S!=="json"&&(Z.responseType=A.responseType),C&&([Q,W]=qn(C,!0),Z.addEventListener("progress",Q)),_&&Z.upload&&([R,q]=qn(_),Z.upload.addEventListener("progress",R),Z.upload.addEventListener("loadend",q)),(A.cancelToken||A.signal)&&(T=X=>{Z&&(d(!X||X.type?new dn(null,c,Z):X),Z.abort(),Z=null)},A.cancelToken&&A.cancelToken.subscribe(T),A.signal&&(A.signal.aborted?T():A.signal.addEventListener("abort",T)));const ne=qo(A.url);if(ne&&et.protocols.indexOf(ne)===-1){d(new oe("Unsupported protocol "+ne+":",oe.ERR_BAD_REQUEST,c));return}Z.send(x||null)})},ia=(c,l)=>{const{length:f}=c=c?c.filter(Boolean):[];if(l||f){let d=new AbortController,A;const x=function(C){if(!A){A=!0,S();const T=C instanceof Error?C:this.reason;d.abort(T instanceof oe?T:new dn(T instanceof Error?T.message:T))}};let p=l&&setTimeout(()=>{p=null,x(new oe(`timeout ${l} of ms exceeded`,oe.ETIMEDOUT))},l);const S=()=>{c&&(p&&clearTimeout(p),p=null,c.forEach(C=>{C.unsubscribe?C.unsubscribe(x):C.removeEventListener("abort",x)}),c=null)};c.forEach(C=>C.addEventListener("abort",x));const{signal:_}=d;return _.unsubscribe=()=>B.asap(S),_}},sa=function*(c,l){let f=c.byteLength;if(f<l){yield c;return}let d=0,A;for(;d<f;)A=d+l,yield c.slice(d,A),d=A},oa=async function*(c,l){for await(const f of aa(c))yield*sa(f,l)},aa=async function*(c){if(c[Symbol.asyncIterator]){yield*c;return}const l=c.getReader();try{for(;;){const{done:f,value:d}=await l.read();if(f)break;yield d}}finally{await l.cancel()}},Ci=(c,l,f,d)=>{const A=oa(c,l);let x=0,p,S=_=>{p||(p=!0,d&&d(_))};return new ReadableStream({async pull(_){try{const{done:C,value:T}=await A.next();if(C){S(),_.close();return}let R=T.byteLength;if(f){let Q=x+=R;f(Q)}_.enqueue(new Uint8Array(T))}catch(C){throw S(C),C}},cancel(_){return S(_),A.return()}},{highWaterMark:2})},ir=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",es=ir&&typeof ReadableStream=="function",la=ir&&(typeof TextEncoder=="function"?(c=>l=>c.encode(l))(new TextEncoder):async c=>new Uint8Array(await new Response(c).arrayBuffer())),ts=(c,...l)=>{try{return!!c(...l)}catch{return!1}},ca=es&&ts(()=>{let c=!1;const l=new Request(et.origin,{body:new ReadableStream,method:"POST",get duplex(){return c=!0,"half"}}).headers.has("Content-Type");return c&&!l}),mi=64*1024,Pr=es&&ts(()=>B.isReadableStream(new Response("").body)),Kn={stream:Pr&&(c=>c.body)};ir&&(c=>{["text","arrayBuffer","blob","formData","stream"].forEach(l=>{!Kn[l]&&(Kn[l]=B.isFunction(c[l])?f=>f[l]():(f,d)=>{throw new oe(`Response type '${l}' is not supported`,oe.ERR_NOT_SUPPORT,d)})})})(new Response);const ua=async c=>{if(c==null)return 0;if(B.isBlob(c))return c.size;if(B.isSpecCompliantForm(c))return(await new Request(et.origin,{method:"POST",body:c}).arrayBuffer()).byteLength;if(B.isArrayBufferView(c)||B.isArrayBuffer(c))return c.byteLength;if(B.isURLSearchParams(c)&&(c=c+""),B.isString(c))return(await la(c)).byteLength},fa=async(c,l)=>{const f=B.toFiniteNumber(c.getContentLength());return f??ua(l)},ha=ir&&(async c=>{let{url:l,method:f,data:d,signal:A,cancelToken:x,timeout:p,onDownloadProgress:S,onUploadProgress:_,responseType:C,headers:T,withCredentials:R="same-origin",fetchOptions:Q}=$i(c);C=C?(C+"").toLowerCase():"text";let q=ia([A,x&&x.toAbortSignal()],p),W;const G=q&&q.unsubscribe&&(()=>{q.unsubscribe()});let Z;try{if(_&&ca&&f!=="get"&&f!=="head"&&(Z=await fa(T,d))!==0){let De=new Request(l,{method:"POST",body:d,duplex:"half"}),ue;if(B.isFormData(d)&&(ue=De.headers.get("content-type"))&&T.setContentType(ue),De.body){const[U,de]=wi(Z,qn(Ai(_)));d=Ci(De.body,mi,U,de)}}B.isString(R)||(R=R?"include":"omit");const Ce="credentials"in Request.prototype;W=new Request(l,{...Q,signal:q,method:f.toUpperCase(),headers:T.normalize().toJSON(),body:d,duplex:"half",credentials:Ce?R:void 0});let ne=await fetch(W);const X=Pr&&(C==="stream"||C==="response");if(Pr&&(S||X&&G)){const De={};["status","statusText","headers"].forEach(V=>{De[V]=ne[V]});const ue=B.toFiniteNumber(ne.headers.get("content-length")),[U,de]=S&&wi(ue,qn(Ai(S),!0))||[];ne=new Response(Ci(ne.body,mi,U,()=>{de&&de(),G&&G()}),De)}C=C||"text";let ie=await Kn[B.findKey(Kn,C)||"text"](ne,c);return!X&&G&&G(),await new Promise((De,ue)=>{Qi(De,ue,{data:ie,headers:ht.from(ne.headers),status:ne.status,statusText:ne.statusText,config:c,request:W})})}catch(Ce){throw G&&G(),Ce&&Ce.name==="TypeError"&&/fetch/i.test(Ce.message)?Object.assign(new oe("Network Error",oe.ERR_NETWORK,c,W),{cause:Ce.cause||Ce}):oe.from(Ce,Ce&&Ce.code,c,W)}}),Lr={http:No,xhr:ra,fetch:ha};B.forEach(Lr,(c,l)=>{if(c){try{Object.defineProperty(c,"name",{value:l})}catch{}Object.defineProperty(c,"adapterName",{value:l})}});const pi=c=>`- ${c}`,da=c=>B.isFunction(c)||c===null||c===!1,ns={getAdapter:c=>{c=B.isArray(c)?c:[c];const{length:l}=c;let f,d;const A={};for(let x=0;x<l;x++){f=c[x];let p;if(d=f,!da(f)&&(d=Lr[(p=String(f)).toLowerCase()],d===void 0))throw new oe(`Unknown adapter '${p}'`);if(d)break;A[p||"#"+x]=d}if(!d){const x=Object.entries(A).map(([S,_])=>`adapter ${S} `+(_===!1?"is not supported by the environment":"is not available in the build"));let p=l?x.length>1?`since :
`+x.map(pi).join(`
`):" "+pi(x[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return d},adapters:Lr};function Dr(c){if(c.cancelToken&&c.cancelToken.throwIfRequested(),c.signal&&c.signal.aborted)throw new dn(null,c)}function bi(c){return Dr(c),c.headers=ht.from(c.headers),c.data=_r.call(c,c.transformRequest),["post","put","patch"].indexOf(c.method)!==-1&&c.headers.setContentType("application/x-www-form-urlencoded",!1),ns.getAdapter(c.adapter||Dn.adapter)(c).then(function(d){return Dr(c),d.data=_r.call(c,c.transformResponse,d),d.headers=ht.from(d.headers),d},function(d){return Ki(d)||(Dr(c),d&&d.response&&(d.response.data=_r.call(c,c.transformResponse,d.response),d.response.headers=ht.from(d.response.headers))),Promise.reject(d)})}const rs="1.7.9",sr={};["object","boolean","number","function","string","symbol"].forEach((c,l)=>{sr[c]=function(d){return typeof d===c||"a"+(l<1?"n ":" ")+c}});const Ii={};sr.transitional=function(l,f,d){function A(x,p){return"[Axios v"+rs+"] Transitional option '"+x+"'"+p+(d?". "+d:"")}return(x,p,S)=>{if(l===!1)throw new oe(A(p," has been removed"+(f?" in "+f:"")),oe.ERR_DEPRECATED);return f&&!Ii[p]&&(Ii[p]=!0,console.warn(A(p," has been deprecated since v"+f+" and will be removed in the near future"))),l?l(x,p,S):!0}};sr.spelling=function(l){return(f,d)=>(console.warn(`${d} is likely a misspelling of ${l}`),!0)};function xa(c,l,f){if(typeof c!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const d=Object.keys(c);let A=d.length;for(;A-- >0;){const x=d[A],p=l[x];if(p){const S=c[x],_=S===void 0||p(S,x,c);if(_!==!0)throw new oe("option "+x+" must be "+_,oe.ERR_BAD_OPTION_VALUE);continue}if(f!==!0)throw new oe("Unknown option "+x,oe.ERR_BAD_OPTION)}}const jn={assertOptions:xa,validators:sr},Dt=jn.validators;let Qt=class{constructor(l){this.defaults=l,this.interceptors={request:new xi,response:new xi}}async request(l,f){try{return await this._request(l,f)}catch(d){if(d instanceof Error){let A={};Error.captureStackTrace?Error.captureStackTrace(A):A=new Error;const x=A.stack?A.stack.replace(/^.+\n/,""):"";try{d.stack?x&&!String(d.stack).endsWith(x.replace(/^.+\n.+\n/,""))&&(d.stack+=`
`+x):d.stack=x}catch{}}throw d}}_request(l,f){typeof l=="string"?(f=f||{},f.url=l):f=l||{},f=Jt(this.defaults,f);const{transitional:d,paramsSerializer:A,headers:x}=f;d!==void 0&&jn.assertOptions(d,{silentJSONParsing:Dt.transitional(Dt.boolean),forcedJSONParsing:Dt.transitional(Dt.boolean),clarifyTimeoutError:Dt.transitional(Dt.boolean)},!1),A!=null&&(B.isFunction(A)?f.paramsSerializer={serialize:A}:jn.assertOptions(A,{encode:Dt.function,serialize:Dt.function},!0)),jn.assertOptions(f,{baseUrl:Dt.spelling("baseURL"),withXsrfToken:Dt.spelling("withXSRFToken")},!0),f.method=(f.method||this.defaults.method||"get").toLowerCase();let p=x&&B.merge(x.common,x[f.method]);x&&B.forEach(["delete","get","head","post","put","patch","common"],W=>{delete x[W]}),f.headers=ht.concat(p,x);const S=[];let _=!0;this.interceptors.request.forEach(function(G){typeof G.runWhen=="function"&&G.runWhen(f)===!1||(_=_&&G.synchronous,S.unshift(G.fulfilled,G.rejected))});const C=[];this.interceptors.response.forEach(function(G){C.push(G.fulfilled,G.rejected)});let T,R=0,Q;if(!_){const W=[bi.bind(this),void 0];for(W.unshift.apply(W,S),W.push.apply(W,C),Q=W.length,T=Promise.resolve(f);R<Q;)T=T.then(W[R++],W[R++]);return T}Q=S.length;let q=f;for(R=0;R<Q;){const W=S[R++],G=S[R++];try{q=W(q)}catch(Z){G.call(this,Z);break}}try{T=bi.call(this,q)}catch(W){return Promise.reject(W)}for(R=0,Q=C.length;R<Q;)T=T.then(C[R++],C[R++]);return T}getUri(l){l=Jt(this.defaults,l);const f=Ji(l.baseURL,l.url);return Zi(f,l.params,l.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(l){Qt.prototype[l]=function(f,d){return this.request(Jt(d||{},{method:l,url:f,data:(d||{}).data}))}});B.forEach(["post","put","patch"],function(l){function f(d){return function(x,p,S){return this.request(Jt(S||{},{method:l,headers:d?{"Content-Type":"multipart/form-data"}:{},url:x,data:p}))}}Qt.prototype[l]=f(),Qt.prototype[l+"Form"]=f(!0)});let ga=class is{constructor(l){if(typeof l!="function")throw new TypeError("executor must be a function.");let f;this.promise=new Promise(function(x){f=x});const d=this;this.promise.then(A=>{if(!d._listeners)return;let x=d._listeners.length;for(;x-- >0;)d._listeners[x](A);d._listeners=null}),this.promise.then=A=>{let x;const p=new Promise(S=>{d.subscribe(S),x=S}).then(A);return p.cancel=function(){d.unsubscribe(x)},p},l(function(x,p,S){d.reason||(d.reason=new dn(x,p,S),f(d.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(l){if(this.reason){l(this.reason);return}this._listeners?this._listeners.push(l):this._listeners=[l]}unsubscribe(l){if(!this._listeners)return;const f=this._listeners.indexOf(l);f!==-1&&this._listeners.splice(f,1)}toAbortSignal(){const l=new AbortController,f=d=>{l.abort(d)};return this.subscribe(f),l.signal.unsubscribe=()=>this.unsubscribe(f),l.signal}static source(){let l;return{token:new is(function(A){l=A}),cancel:l}}};function wa(c){return function(f){return c.apply(null,f)}}function Aa(c){return B.isObject(c)&&c.isAxiosError===!0}const Fr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Fr).forEach(([c,l])=>{Fr[l]=c});function ss(c){const l=new Qt(c),f=Pi(Qt.prototype.request,l);return B.extend(f,Qt.prototype,l,{allOwnKeys:!0}),B.extend(f,l,null,{allOwnKeys:!0}),f.create=function(A){return ss(Jt(c,A))},f}const ke=ss(Dn);ke.Axios=Qt;ke.CanceledError=dn;ke.CancelToken=ga;ke.isCancel=Ki;ke.VERSION=rs;ke.toFormData=rr;ke.AxiosError=oe;ke.Cancel=ke.CanceledError;ke.all=function(l){return Promise.all(l)};ke.spread=wa;ke.isAxiosError=Aa;ke.mergeConfig=Jt;ke.AxiosHeaders=ht;ke.formToJSON=c=>qi(B.isHTMLForm(c)?new FormData(c):c);ke.getAdapter=ns.getAdapter;ke.HttpStatusCode=Fr;ke.default=ke;const{Axios:ja,AxiosError:qa,CanceledError:Ka,isCancel:Qa,CancelToken:Ja,VERSION:$a,all:e1,Cancel:t1,isAxiosError:n1,spread:r1,toFormData:i1,AxiosHeaders:s1,HttpStatusCode:o1,formToJSON:a1,getAdapter:l1,mergeConfig:c1}=ke;window.axios=ke;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var Y;(function(c){c[c.QR_CODE=0]="QR_CODE",c[c.AZTEC=1]="AZTEC",c[c.CODABAR=2]="CODABAR",c[c.CODE_39=3]="CODE_39",c[c.CODE_93=4]="CODE_93",c[c.CODE_128=5]="CODE_128",c[c.DATA_MATRIX=6]="DATA_MATRIX",c[c.MAXICODE=7]="MAXICODE",c[c.ITF=8]="ITF",c[c.EAN_13=9]="EAN_13",c[c.EAN_8=10]="EAN_8",c[c.PDF_417=11]="PDF_417",c[c.RSS_14=12]="RSS_14",c[c.RSS_EXPANDED=13]="RSS_EXPANDED",c[c.UPC_A=14]="UPC_A",c[c.UPC_E=15]="UPC_E",c[c.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Y||(Y={}));var yi=new Map([[Y.QR_CODE,"QR_CODE"],[Y.AZTEC,"AZTEC"],[Y.CODABAR,"CODABAR"],[Y.CODE_39,"CODE_39"],[Y.CODE_93,"CODE_93"],[Y.CODE_128,"CODE_128"],[Y.DATA_MATRIX,"DATA_MATRIX"],[Y.MAXICODE,"MAXICODE"],[Y.ITF,"ITF"],[Y.EAN_13,"EAN_13"],[Y.EAN_8,"EAN_8"],[Y.PDF_417,"PDF_417"],[Y.RSS_14,"RSS_14"],[Y.RSS_EXPANDED,"RSS_EXPANDED"],[Y.UPC_A,"UPC_A"],[Y.UPC_E,"UPC_E"],[Y.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Si;(function(c){c[c.UNKNOWN=0]="UNKNOWN",c[c.URL=1]="URL"})(Si||(Si={}));function Ea(c){return Object.values(Y).includes(c)}var Qn;(function(c){c[c.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",c[c.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Qn||(Qn={}));var Ca=function(){function c(){}return c.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",c.SCAN_DEFAULT_FPS=2,c.DEFAULT_DISABLE_FLIP=!1,c.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,c.DEFAULT_SUPPORTED_SCAN_TYPE=[Qn.SCAN_TYPE_CAMERA,Qn.SCAN_TYPE_FILE],c}(),os=function(){function c(l,f){this.format=l,this.formatName=f}return c.prototype.toString=function(){return this.formatName},c.create=function(l){if(!yi.has(l))throw"".concat(l," not in html5QrcodeSupportedFormatsTextMap");return new c(l,yi.get(l))},c}(),Ti=function(){function c(){}return c.createFromText=function(l){var f={text:l};return{decodedText:l,result:f}},c.createFromQrcodeResult=function(l){return{decodedText:l.text,result:l}},c}(),kr;(function(c){c[c.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",c[c.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",c[c.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(kr||(kr={}));var ma=function(){function c(){}return c.createFrom=function(l){return{errorMessage:l,type:kr.UNKWOWN_ERROR}},c}(),pa=function(){function c(l){this.verbose=l}return c.prototype.log=function(l){this.verbose&&console.log(l)},c.prototype.warn=function(l){this.verbose&&console.warn(l)},c.prototype.logError=function(l,f){(this.verbose||f===!0)&&console.error(l)},c.prototype.logErrors=function(l){if(l.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(l)},c}();function Bt(c){return typeof c>"u"||c===null}var fn=function(){function c(){}return c.codeParseError=function(l){return"QR code parse error, error = ".concat(l)},c.errorGettingUserMedia=function(l){return"Error getting userMedia, error = ".concat(l)},c.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},c.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},c.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},c.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},c.scannerPaused=function(){return"Scanner paused"},c}(),as=function(){function c(){}return c.isMediaStreamConstraintsValid=function(l,f){if(typeof l!="object"){var d=typeof l;return f.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(d,"."),!0),!1}for(var A=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],x=new Set(A),p=Object.keys(l),S=0,_=p;S<_.length;S++){var C=_[S];if(x.has(C))return f.logError("".concat(C," is not supported videoConstaints."),!0),!1}return!0},c}(),zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ba(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Rn={exports:{}},Ia=Rn.exports,Ni;function ya(){return Ni||(Ni=1,function(c,l){(function(f,d){d(l)})(Ia,function(f){function d(g){return g==null}var A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,e){g.__proto__=e}||function(g,e){for(var t in e)e.hasOwnProperty(t)&&(g[t]=e[t])};function x(g,e){A(g,e);function t(){this.constructor=g}g.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function p(g,e){var t=Object.setPrototypeOf;t?t(g,e):g.__proto__=e}function S(g,e){e===void 0&&(e=g.constructor);var t=Error.captureStackTrace;t&&t(g,e)}var _=function(g){x(e,g);function e(t){var n=this.constructor,r=g.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),p(r,n.prototype),S(r),r}return e}(Error);class C extends _{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}C.kind="Exception";class T extends C{}T.kind="ArgumentException";class R extends C{}R.kind="IllegalArgumentException";class Q{constructor(e){if(this.binarizer=e,e===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new Q(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new Q(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new Q(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class q extends C{static getChecksumInstance(){return new q}}q.kind="ChecksumException";class W{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class G{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class Z extends C{}Z.kind="IndexOutOfBoundsException";class Ce extends Z{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}Ce.kind="ArrayIndexOutOfBoundsException";class ne{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){ne.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new R("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new Ce(t);if(n>e)throw new Ce(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(i=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(i=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return G.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){n===void 0&&(n=ne.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const s=i+r>>1,o=n(t,e[s]);if(o>0)r=s+1;else if(o<0)i=s-1;else return s}return-r-1}static numberComparator(e,t){return e-t}}class X{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}X.MIN_VALUE_32_BITS=-2147483648,X.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ie{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=ie.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=ie.makeArray(e);G.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(e&31))-1);const s=n.length;for(;i===0;){if(++r===s)return t;i=n[r]}const o=r*32+X.numberOfTrailingZeros(i);return o>t?t:o}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(e&31))-1);const s=n.length;for(;i===0;){if(++r===s)return t;i=~n[r]}const o=r*32+X.numberOfTrailingZeros(i);return o>t?t:o}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new R;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let s=n;s<=r;s++){const o=s>n?0:e&31,u=(2<<(s<r?31:t&31))-(1<<o);i[s]|=u}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new R;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),s=this.bits;for(let o=r;o<=i;o++){const a=o>r?0:e&31,h=(2<<(o<i?31:t&31))-(1<<a)&4294967295;if((s[o]&h)!==(n?h:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new R("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let s=0;for(let o=0;o<8;o++)this.get(e)&&(s|=1<<7-o),e++;t[n+i]=s}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let s=r[i];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-i]=s}if(this.size!==n*32){const i=n*32-this.size;let s=e[0]>>>i;for(let o=1;o<n;o++){const a=e[o];s|=a<<32-i,e[o-1]=s,s=a>>>i}e[n-1]=s}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof ie))return!1;const t=e;return this.size===t.size&&ne.equals(this.bits,t.bits)}hashCode(){return 31*this.size+ne.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new ie(this.size,this.bits.slice())}}var De;(function(g){g[g.OTHER=0]="OTHER",g[g.PURE_BARCODE=1]="PURE_BARCODE",g[g.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",g[g.TRY_HARDER=3]="TRY_HARDER",g[g.CHARACTER_SET=4]="CHARACTER_SET",g[g.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",g[g.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",g[g.ASSUME_GS1=7]="ASSUME_GS1",g[g.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",g[g.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",g[g.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(De||(De={}));var ue=De;class U extends C{static getFormatInstance(){return new U}}U.kind="FormatException";var de;(function(g){g[g.Cp437=0]="Cp437",g[g.ISO8859_1=1]="ISO8859_1",g[g.ISO8859_2=2]="ISO8859_2",g[g.ISO8859_3=3]="ISO8859_3",g[g.ISO8859_4=4]="ISO8859_4",g[g.ISO8859_5=5]="ISO8859_5",g[g.ISO8859_6=6]="ISO8859_6",g[g.ISO8859_7=7]="ISO8859_7",g[g.ISO8859_8=8]="ISO8859_8",g[g.ISO8859_9=9]="ISO8859_9",g[g.ISO8859_10=10]="ISO8859_10",g[g.ISO8859_11=11]="ISO8859_11",g[g.ISO8859_13=12]="ISO8859_13",g[g.ISO8859_14=13]="ISO8859_14",g[g.ISO8859_15=14]="ISO8859_15",g[g.ISO8859_16=15]="ISO8859_16",g[g.SJIS=16]="SJIS",g[g.Cp1250=17]="Cp1250",g[g.Cp1251=18]="Cp1251",g[g.Cp1252=19]="Cp1252",g[g.Cp1256=20]="Cp1256",g[g.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",g[g.UTF8=22]="UTF8",g[g.ASCII=23]="ASCII",g[g.Big5=24]="Big5",g[g.GB18030=25]="GB18030",g[g.EUC_KR=26]="EUC_KR"})(de||(de={}));class V{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,V.VALUE_IDENTIFIER_TO_ECI.set(e,this),V.NAME_TO_ECI.set(n,this);const i=this.values;for(let s=0,o=i.length;s!==o;s++){const a=i[s];V.VALUES_TO_ECI.set(a,this)}for(const s of r)V.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new U("incorect value");const t=V.VALUES_TO_ECI.get(e);if(t===void 0)throw new U("incorect value");return t}static getCharacterSetECIByName(e){const t=V.NAME_TO_ECI.get(e);if(t===void 0)throw new U("incorect value");return t}equals(e){if(!(e instanceof V))return!1;const t=e;return this.getName()===t.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(de.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(de.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(de.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(de.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(de.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(de.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(de.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(de.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(de.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(de.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(de.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(de.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(de.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(de.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(de.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(de.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(de.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(de.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(de.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(de.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(de.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(de.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(de.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(de.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(de.Big5,28,"Big5"),V.GB18030=new V(de.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(de.EUC_KR,30,"EUC_KR","EUC-KR");class $t extends C{}$t.kind="UnsupportedOperationException";class st{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!st.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof V?e:V.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(st.isDecodeFallbackSupported(n)){let r="";for(let i=0,s=e.length;i<s;i++){let o=e[i].toString(16);o.length<2&&(o="0"+o),r+="%"+o}return decodeURIComponent(r)}if(n.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new $t(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(V.UTF8)||e.equals(V.ISO8859_1)||e.equals(V.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)}}class re{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return st.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get(ue.CHARACTER_SET)!==void 0)return t.get(ue.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,s=!0,o=0,a=0,u=0,h=0,w=0,E=0,b=0,I=0,y=0,N=0,M=0;const F=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let k=0;k<n&&(r||i||s);k++){const L=e[k]&255;s&&(o>0?(L&128)===0?s=!1:o--:(L&128)!==0&&((L&64)===0?s=!1:(o++,(L&32)===0?a++:(o++,(L&16)===0?u++:(o++,(L&8)===0?h++:s=!1))))),r&&(L>127&&L<160?r=!1:L>159&&(L<192||L===215||L===247)&&M++),i&&(w>0?L<64||L===127||L>252?i=!1:w--:L===128||L===160||L>239?i=!1:L>160&&L<224?(E++,I=0,b++,b>y&&(y=b)):L>127?(w++,b=0,I++,I>N&&(N=I)):(b=0,I=0))}return s&&o>0&&(s=!1),i&&w>0&&(i=!1),s&&(F||a+u+h>0)?re.UTF8:i&&(re.ASSUME_SHIFT_JIS||y>=3||N>=3)?re.SHIFT_JIS:r&&i?y===2&&E===2||M*10>=n?re.SHIFT_JIS:re.ISO88591:r?re.ISO88591:i?re.SHIFT_JIS:s?re.UTF8:re.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function r(s,o,a,u,h,w){if(s==="%%")return"%";if(t[++n]===void 0)return;s=u?parseInt(u.substr(1)):void 0;let E=h?parseInt(h.substr(1)):void 0,b;switch(w){case"s":b=t[n];break;case"c":b=t[n][0];break;case"f":b=parseFloat(t[n]).toFixed(s);break;case"p":b=parseFloat(t[n]).toPrecision(s);break;case"e":b=parseFloat(t[n]).toExponential(s);break;case"x":b=parseInt(t[n]).toString(E||16);break;case"d":b=parseFloat(parseInt(t[n],E||10).toPrecision(s)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(E);let I=parseInt(a),y=a&&a[0]+""=="0"?"0":" ";for(;b.length<I;)b=o!==void 0?b+y:y+b;return b}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}static getBytes(e,t){return st.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}re.SHIFT_JIS=V.SJIS.getName(),re.GB2312="GB2312",re.ISO88591=V.ISO8859_1.getName(),re.EUC_JP="EUC_JP",re.UTF8=V.UTF8.getName(),re.PLATFORM_DEFAULT_ENCODING=re.UTF8,re.ASSUME_SHIFT_JIS=!1;class pe{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=re.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class We{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,t==null&&(t=e),this.height=t,e<1||t<1)throw new R("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,r==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new We(n,t);for(let i=0;i<t;i++){const s=e[i];for(let o=0;o<n;o++)s[o]&&r.set(o,i)}return r}static parseFromString(e,t,n){if(e===null)throw new R("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,s=0,o=-1,a=0,u=0;for(;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(i>s){if(o===-1)o=i-s;else if(i-s!==o)throw new R("row lengths do not match");s=i,a++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,r[i]=!0,i++;else if(e.substring(u,u+n.length)===n)u+=n.length,r[i]=!1,i++;else throw new R("illegal character encountered: "+e.substring(u));if(i>s){if(o===-1)o=i-s;else if(i-s!==o)throw new R("row lengths do not match");a++}const h=new We(o,a);for(let w=0;w<i;w++)r[w]&&h.set(Math.floor(w%o),Math.floor(w/o));return h}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new R("input matrix dimensions do not match");const t=new ie(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,s=this.height;i<s;i++){const o=i*n,a=e.getRow(i,t).getBitArray();for(let u=0;u<n;u++)r[o+u]^=a[u]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new R("Left and top must be nonnegative");if(r<1||n<1)throw new R("Height and width must be at least 1");const i=e+n,s=t+r;if(s>this.height||i>this.width)throw new R("The region must fit inside the matrix");const o=this.rowSize,a=this.bits;for(let u=t;u<s;u++){const h=u*o;for(let w=e;w<i;w++)a[h+Math.floor(w/32)]|=1<<(w&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new ie(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let s=0;s<n;s++)t.setBulk(s*32,r[i+s]);return t}setRow(e,t){G.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new ie(e),r=new ie(e);for(let i=0,s=Math.floor((t+1)/2);i<s;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,s=t,o=-1,a=-1;for(let u=0;u<t;u++)for(let h=0;h<n;h++){const w=r[u*n+h];if(w!==0){if(u<s&&(s=u),u>a&&(a=u),h*32<i){let E=0;for(;(w<<31-E&4294967295)===0;)E++;h*32+E<i&&(i=h*32+E)}if(h*32+31>o){let E=31;for(;!(w>>>E);)E--;h*32+E>o&&(o=h*32+E)}}}return o<i||a<s?null:Int32Array.from([i,s,o-i+1,a-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const s=t[n];let o=0;for(;(s<<31-o&4294967295)===0;)o++;return i+=o,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;const r=Math.floor(n/e);let i=Math.floor(n%e)*32;const s=t[n];let o=31;for(;!(s>>>o);)o--;return i+=o,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof We))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ne.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ne.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new pe;for(let i=0,s=this.height;i<s;i++){for(let o=0,a=this.width;o<a;o++)r.append(this.get(o,i)?e:t);r.append(n)}return r.toString()}clone(){return new We(this.width,this.height,this.rowSize,this.bits.slice())}}class v extends C{static getNotFoundInstance(){return new v}}v.kind="NotFoundException";class Xe extends W{constructor(e){super(e),this.luminances=Xe.EMPTY,this.buckets=new Int32Array(Xe.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();t==null||t.getSize()<r?t=new ie(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),s=this.buckets;for(let a=0;a<r;a++)s[(i[a]&255)>>Xe.LUMINANCE_SHIFT]++;const o=Xe.estimateBlackPoint(s);if(r<3)for(let a=0;a<r;a++)(i[a]&255)<o&&t.set(a);else{let a=i[0]&255,u=i[1]&255;for(let h=1;h<r-1;h++){const w=i[h+1]&255;(u*4-a-w)/2<o&&t.set(h),a=u,u=w}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new We(t,n);this.initArrays(t);const i=this.buckets;for(let a=1;a<5;a++){const u=Math.floor(n*a/5),h=e.getRow(u,this.luminances),w=Math.floor(t*4/5);for(let E=Math.floor(t/5);E<w;E++){const b=h[E]&255;i[b>>Xe.LUMINANCE_SHIFT]++}}const s=Xe.estimateBlackPoint(i),o=e.getMatrix();for(let a=0;a<n;a++){const u=a*t;for(let h=0;h<t;h++)(o[u+h]&255)<s&&r.set(h,a)}return r}createBinarizer(e){return new Xe(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<Xe.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let h=0;h<t;h++)e[h]>i&&(r=h,i=e[h]),e[h]>n&&(n=e[h]);let s=0,o=0;for(let h=0;h<t;h++){const w=h-r,E=e[h]*w*w;E>o&&(s=h,o=E)}if(r>s){const h=r;r=s,s=h}if(s-r<=t/16)throw new v;let a=s-1,u=-1;for(let h=s-1;h>r;h--){const w=h-r,E=w*w*(s-h)*(n-e[h]);E>u&&(a=h,u=E)}return a<<Xe.LUMINANCE_SHIFT}}Xe.LUMINANCE_BITS=5,Xe.LUMINANCE_SHIFT=8-Xe.LUMINANCE_BITS,Xe.LUMINANCE_BUCKETS=1<<Xe.LUMINANCE_BITS,Xe.EMPTY=Uint8ClampedArray.from([0]);class ae extends Xe{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=ae.MINIMUM_DIMENSION&&n>=ae.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>ae.BLOCK_SIZE_POWER;(t&ae.BLOCK_SIZE_MASK)!==0&&i++;let s=n>>ae.BLOCK_SIZE_POWER;(n&ae.BLOCK_SIZE_MASK)!==0&&s++;const o=ae.calculateBlackPoints(r,i,s,t,n),a=new We(t,n);ae.calculateThresholdForBlock(r,i,s,t,n,o,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ae(e)}static calculateThresholdForBlock(e,t,n,r,i,s,o){const a=i-ae.BLOCK_SIZE,u=r-ae.BLOCK_SIZE;for(let h=0;h<n;h++){let w=h<<ae.BLOCK_SIZE_POWER;w>a&&(w=a);const E=ae.cap(h,2,n-3);for(let b=0;b<t;b++){let I=b<<ae.BLOCK_SIZE_POWER;I>u&&(I=u);const y=ae.cap(b,2,t-3);let N=0;for(let F=-2;F<=2;F++){const k=s[E+F];N+=k[y-2]+k[y-1]+k[y]+k[y+1]+k[y+2]}const M=N/25;ae.thresholdBlock(e,I,w,M,r,o)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,s){for(let o=0,a=n*i+t;o<ae.BLOCK_SIZE;o++,a+=i)for(let u=0;u<ae.BLOCK_SIZE;u++)(e[a+u]&255)<=r&&s.set(t+u,n+o)}static calculateBlackPoints(e,t,n,r,i){const s=i-ae.BLOCK_SIZE,o=r-ae.BLOCK_SIZE,a=new Array(n);for(let u=0;u<n;u++){a[u]=new Int32Array(t);let h=u<<ae.BLOCK_SIZE_POWER;h>s&&(h=s);for(let w=0;w<t;w++){let E=w<<ae.BLOCK_SIZE_POWER;E>o&&(E=o);let b=0,I=255,y=0;for(let M=0,F=h*r+E;M<ae.BLOCK_SIZE;M++,F+=r){for(let k=0;k<ae.BLOCK_SIZE;k++){const L=e[F+k]&255;b+=L,L<I&&(I=L),L>y&&(y=L)}if(y-I>ae.MIN_DYNAMIC_RANGE)for(M++,F+=r;M<ae.BLOCK_SIZE;M++,F+=r)for(let k=0;k<ae.BLOCK_SIZE;k++)b+=e[F+k]&255}let N=b>>ae.BLOCK_SIZE_POWER*2;if(y-I<=ae.MIN_DYNAMIC_RANGE&&(N=I/2,u>0&&w>0)){const M=(a[u-1][w]+2*a[u][w-1]+a[u-1][w-1])/4;I<M&&(N=M)}a[u][w]=N}}return a}}ae.BLOCK_SIZE_POWER=3,ae.BLOCK_SIZE=1<<ae.BLOCK_SIZE_POWER,ae.BLOCK_SIZE_MASK=ae.BLOCK_SIZE-1,ae.MINIMUM_DIMENSION=ae.BLOCK_SIZE*5,ae.MIN_DYNAMIC_RANGE=24;class xn{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new $t("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new $t("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new $t("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new pe;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let i=0;i<this.width;i++){const s=r[i]&255;let o;s<64?o="#":s<128?o="+":s<192?o=".":o=" ",t.append(o)}t.append(`
`)}return t.toString()}}class vt extends xn{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(n[i]&255);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(e[r]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new vt(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new vt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new vt(this.delegate.rotateCounterClockwise45())}}class Pt extends xn{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Pt.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Pt.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,s=0,o=e.length;i<o;i+=4,s++){let a;if(e[i+3]===0)a=255;else{const h=e[i],w=e[i+1],E=e[i+2];a=306*h+601*w+117*E+512>>10}r[s]=a}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new R("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return t===null?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*Pt.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*s),a=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*s);return t.width=o,t.height=a,n.translate(o/2,a/2),n.rotate(r),n.drawImage(this.canvas,i/-2,s/-2),this.buffer=Pt.makeBufferFromCanvasImageData(t),this}invert(){return new vt(this)}}Pt.DEGREE_TO_RADIANS=Math.PI/180;class Wr{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var tt=(globalThis||zn||self||window||void 0)&&(globalThis||zn||self||window||void 0).__awaiter||function(g,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(h){try{u(n.next(h))}catch(w){s(w)}}function a(h){try{u(n.throw(h))}catch(w){s(w)}}function u(h){h.done?i(h.value):r(h.value).then(o,a)}u((n=n.apply(g,e||[])).next())})};class Wt{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return tt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const r=n.kind==="video"?"videoinput":n.kind;if(r!=="videoinput")continue;const i=n.deviceId||n.id,s=n.label||`Video device ${t.length+1}`,o=n.groupId,a={deviceId:i,label:s,kind:r,groupId:o};t.push(a)}return t})}getVideoInputDevices(){return tt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new Wr(t.deviceId,t.label))})}findDeviceById(e){return tt(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return tt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return tt(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return tt(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return tt(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return tt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return tt(this,void 0,void 0,function*(){let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return tt(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return tt(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return tt(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return tt(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new T(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new T(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new T("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new T("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new T("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new T("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new T("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new T("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new T("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new T("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return tt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return tt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const r=(i,s)=>{if(this._stopAsyncDecode){s(new v("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const o=this.decode(e);i(o)}catch(o){const a=t&&o instanceof v,h=(o instanceof q||o instanceof U)&&n;if(a||h)return setTimeout(r,this._timeBetweenDecodingAttempts,i,s);s(o)}};return new Promise((i,s)=>r(i,s))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r);const i=r instanceof q||r instanceof U,s=r instanceof v;(i||s)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new Pt(t),r=new ae(n);return new Q(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class nt{constructor(e,t,n=t==null?0:8*t.length,r,i,s=G.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=i,this.resultMetadata=null,s==null?this.timestamp=G.currentTimeMillis():this.timestamp=s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const n=new Array(t.length+e.length);G.arraycopy(t,0,n,0,t.length),G.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var or;(function(g){g[g.AZTEC=0]="AZTEC",g[g.CODABAR=1]="CODABAR",g[g.CODE_39=2]="CODE_39",g[g.CODE_93=3]="CODE_93",g[g.CODE_128=4]="CODE_128",g[g.DATA_MATRIX=5]="DATA_MATRIX",g[g.EAN_8=6]="EAN_8",g[g.EAN_13=7]="EAN_13",g[g.ITF=8]="ITF",g[g.MAXICODE=9]="MAXICODE",g[g.PDF_417=10]="PDF_417",g[g.QR_CODE=11]="QR_CODE",g[g.RSS_14=12]="RSS_14",g[g.RSS_EXPANDED=13]="RSS_EXPANDED",g[g.UPC_A=14]="UPC_A",g[g.UPC_E=15]="UPC_E",g[g.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(or||(or={}));var $=or,ar;(function(g){g[g.OTHER=0]="OTHER",g[g.ORIENTATION=1]="ORIENTATION",g[g.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",g[g.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",g[g.ISSUE_NUMBER=4]="ISSUE_NUMBER",g[g.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",g[g.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",g[g.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",g[g.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",g[g.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",g[g.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ar||(ar={}));var ze=ar;class gn{constructor(e,t,n,r,i=-1,s=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class wn{exp(e){return this.expTable[e]}log(e){if(e===0)throw new R;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class ot{constructor(e,t){if(t.length===0)throw new R;this.field=e;const n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),G.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let n;if(e===1){n=0;for(let s=0,o=t.length;s!==o;s++){const a=t[s];n=wn.addOrSubtract(n,a)}return n}n=t[0];const r=t.length,i=this.field;for(let s=1;s<r;s++)n=wn.addOrSubtract(i.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const s=t;t=n,n=s}let r=new Int32Array(n.length);const i=n.length-t.length;G.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=wn.addOrSubtract(t[s-i],n[s]);return new ot(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1),o=this.field;for(let a=0;a<n;a++){const u=t[a];for(let h=0;h<i;h++)s[a+h]=wn.addOrSubtract(s[a+h],o.multiply(u,r[h]))}return new ot(o,s)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(i[s],e);return new ot(n,r)}multiplyByMonomial(e,t){if(e<0)throw new R;if(t===0)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),s=this.field;for(let o=0;o<r;o++)i[o]=s.multiply(n[o],t);return new ot(s,i)}divide(e){if(!this.field.equals(e.field))throw new R("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new R("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const o=r.getDegree()-e.getDegree(),a=t.multiply(r.getCoefficient(r.getDegree()),s),u=e.multiplyByMonomial(o,a),h=t.buildMonomial(o,a);n=n.addOrSubtract(h),r=r.addOrSubtract(u)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){const r=this.field.log(n);r===0?e+="1":r===1?e+="a":(e+="a^",e+=r)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class Mn extends C{}Mn.kind="ArithmeticException";class we extends wn{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let o=0;o<t;o++)r[o]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const s=new Int32Array(t);for(let o=0;o<t-1;o++)s[r[o]]=o;this.logTable=s,this.zero=new ot(this,Int32Array.from([0])),this.one=new ot(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new R;if(t===0)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new ot(this,n)}inverse(e){if(e===0)throw new Mn;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+X.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}we.AZTEC_DATA_12=new we(4201,4096,1),we.AZTEC_DATA_10=new we(1033,1024,1),we.AZTEC_DATA_6=new we(67,64,1),we.AZTEC_PARAM=new we(19,16,1),we.QR_CODE_FIELD_256=new we(285,256,0),we.DATA_MATRIX_FIELD_256=new we(301,256,1),we.AZTEC_DATA_8=we.DATA_MATRIX_FIELD_256,we.MAXICODE_FIELD_64=we.AZTEC_DATA_6;class en extends C{}en.kind="ReedSolomonException";class yt extends C{}yt.kind="IllegalStateException";class An{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new ot(n,e),i=new Int32Array(t);let s=!0;for(let b=0;b<t;b++){const I=r.evaluateAt(n.exp(b+n.getGeneratorBase()));i[i.length-1-b]=I,I!==0&&(s=!1)}if(s)return;const o=new ot(n,i),a=this.runEuclideanAlgorithm(n.buildMonomial(t,1),o,t),u=a[0],h=a[1],w=this.findErrorLocations(u),E=this.findErrorMagnitudes(h,w);for(let b=0;b<w.length;b++){const I=e.length-1-n.log(w[b]);if(I<0)throw new en("Bad error location");e[I]=we.addOrSubtract(e[I],E[b])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const b=e;e=t,t=b}const r=this.field;let i=e,s=t,o=r.getZero(),a=r.getOne();for(;s.getDegree()>=(n/2|0);){let b=i,I=o;if(i=s,o=a,i.isZero())throw new en("r_{i-1} was zero");s=b;let y=r.getZero();const N=i.getCoefficient(i.getDegree()),M=r.inverse(N);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){const F=s.getDegree()-i.getDegree(),k=r.multiply(s.getCoefficient(s.getDegree()),M);y=y.addOrSubtract(r.buildMonomial(F,k)),s=s.addOrSubtract(i.multiplyByMonomial(F,k))}if(a=y.multiply(o).addOrSubtract(I),s.getDegree()>=i.getDegree())throw new yt("Division algorithm failed to reduce polynomial?")}const u=a.getCoefficient(0);if(u===0)throw new en("sigmaTilde(0) was zero");const h=r.inverse(u),w=a.multiplyScalar(h),E=s.multiplyScalar(h);return[w,E]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let s=1;s<i.getSize()&&r<t;s++)e.evaluateAt(s)===0&&(n[r]=i.inverse(s),r++);if(r!==t)throw new en("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let s=0;s<n;s++){const o=i.inverse(t[s]);let a=1;for(let u=0;u<n;u++)if(s!==u){const h=i.multiply(t[u],o),w=(h&1)===0?h|1:h&-2;a=i.multiply(a,w)}r[s]=i.multiply(e.evaluateAt(o),i.inverse(a)),i.getGeneratorBase()!==0&&(r[s]=i.multiply(r[s],o))}return r}}var je;(function(g){g[g.UPPER=0]="UPPER",g[g.LOWER=1]="LOWER",g[g.MIXED=2]="MIXED",g[g.DIGIT=3]="DIGIT",g[g.PUNCT=4]="PUNCT",g[g.BINARY=5]="BINARY"})(je||(je={}));class Te{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=Te.convertBoolArrayToByteArray(r),s=Te.getEncodedData(r),o=new gn(i,s,null,null);return o.setNumBits(r.length),o}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=je.UPPER,r=je.UPPER,i="",s=0;for(;s<t;)if(r===je.BINARY){if(t-s<5)break;let o=Te.readCode(e,s,5);if(s+=5,o===0){if(t-s<11)break;o=Te.readCode(e,s,11)+31,s+=11}for(let a=0;a<o;a++){if(t-s<8){s=t;break}const u=Te.readCode(e,s,8);i+=re.castAsNonUtf8Char(u),s+=8}r=n}else{let o=r===je.DIGIT?4:5;if(t-s<o)break;let a=Te.readCode(e,s,o);s+=o;let u=Te.getCharacter(r,a);u.startsWith("CTRL_")?(n=r,r=Te.getTable(u.charAt(5)),u.charAt(6)==="L"&&(n=r)):(i+=u,r=n)}return i}static getTable(e){switch(e){case"L":return je.LOWER;case"P":return je.PUNCT;case"M":return je.MIXED;case"D":return je.DIGIT;case"B":return je.BINARY;case"U":default:return je.UPPER}}static getCharacter(e,t){switch(e){case je.UPPER:return Te.UPPER_TABLE[t];case je.LOWER:return Te.LOWER_TABLE[t];case je.MIXED:return Te.MIXED_TABLE[t];case je.PUNCT:return Te.PUNCT_TABLE[t];case je.DIGIT:return Te.DIGIT_TABLE[t];default:throw new yt("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=we.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=we.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=we.AZTEC_DATA_10):(n=12,t=we.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new U;let s=e.length%n,o=new Int32Array(i);for(let E=0;E<i;E++,s+=n)o[E]=Te.readCode(e,s,n);try{new An(t).decode(o,i-r)}catch(E){throw new U(E)}let a=(1<<n)-1,u=0;for(let E=0;E<r;E++){let b=o[E];if(b===0||b===a)throw new U;(b===1||b===a-1)&&u++}let h=new Array(r*n-u),w=0;for(let E=0;E<r;E++){let b=o[E];if(b===1||b===a-1)h.fill(b>1,w,w+n-1),w+=n-1;else for(let I=n-1;I>=0;--I)h[w++]=(b&1<<I)!==0}return h}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+n*4,i=new Int32Array(r),s=new Array(this.totalBitsInLayer(n,t));if(t)for(let o=0;o<i.length;o++)i[o]=o;else{let o=r+1+2*X.truncDivision(X.truncDivision(r,2)-1,15),a=r/2,u=X.truncDivision(o,2);for(let h=0;h<a;h++){let w=h+X.truncDivision(h,15);i[a-h-1]=u-w-1,i[a+h]=u+w+1}}for(let o=0,a=0;o<n;o++){let u=(n-o)*4+(t?9:12),h=o*2,w=r-1-h;for(let E=0;E<u;E++){let b=E*2;for(let I=0;I<2;I++)s[a+b+I]=e.get(i[h+I],i[h+E]),s[a+2*u+b+I]=e.get(i[h+E],i[w-I]),s[a+4*u+b+I]=e.get(i[w-I],i[w-E]),s[a+6*u+b+I]=e.get(i[w-E],i[h+I])}a+=u*8}return s}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?Te.readCode(e,t,8):Te.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=Te.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}Te.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Te.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Te.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Te.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Te.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class xe{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++){const i=e[n];t+=i}return t}}class Bn{static floatToIntBits(e){return e}}Bn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class j{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof j){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*Bn.floatToIntBits(this.x)+Bn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,s,o;if(n>=t&&n>=r?(s=e[0],i=e[1],o=e[2]):r>=n&&r>=t?(s=e[1],i=e[0],o=e[2]):(s=e[2],i=e[0],o=e[1]),this.crossProductZ(i,s,o)<0){const a=i;i=o,o=a}e[0]=i,e[1]=s,e[2]=o}static distance(e,t){return xe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class vn{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Xr extends vn{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Mt{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=Mt.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),r==null&&(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new v}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,s=!0,o=!1,a=!1,u=!1,h=!1,w=!1;const E=this.width,b=this.height;for(;s;){s=!1;let I=!0;for(;(I||!a)&&t<E;)I=this.containsBlackPoint(n,r,t,!1),I?(t++,s=!0,a=!0):a||t++;if(t>=E){i=!0;break}let y=!0;for(;(y||!u)&&r<b;)y=this.containsBlackPoint(e,t,r,!0),y?(r++,s=!0,u=!0):u||r++;if(r>=b){i=!0;break}let N=!0;for(;(N||!h)&&e>=0;)N=this.containsBlackPoint(n,r,e,!1),N?(e--,s=!0,h=!0):h||e--;if(e<0){i=!0;break}let M=!0;for(;(M||!w)&&n>=0;)M=this.containsBlackPoint(e,t,n,!0),M?(n--,s=!0,w=!0):w||n--;if(n<0){i=!0;break}s&&(o=!0)}if(!i&&o){const I=t-e;let y=null;for(let k=1;y===null&&k<I;k++)y=this.getBlackPointOnSegment(e,r-k,e+k,r);if(y==null)throw new v;let N=null;for(let k=1;N===null&&k<I;k++)N=this.getBlackPointOnSegment(e,n+k,e+k,n);if(N==null)throw new v;let M=null;for(let k=1;M===null&&k<I;k++)M=this.getBlackPointOnSegment(t,n+k,t-k,n);if(M==null)throw new v;let F=null;for(let k=1;F===null&&k<I;k++)F=this.getBlackPointOnSegment(t,r-k,t-k,r);if(F==null)throw new v;return this.centerEdges(F,y,M,N)}else throw new v}getBlackPointOnSegment(e,t,n,r){const i=xe.round(xe.distance(e,t,n,r)),s=(n-e)/i,o=(r-t)/i,a=this.image;for(let u=0;u<i;u++){const h=xe.round(e+u*s),w=xe.round(t+u*o);if(a.get(h,w))return new j(h,w)}return null}centerEdges(e,t,n,r){const i=e.getX(),s=e.getY(),o=t.getX(),a=t.getY(),u=n.getX(),h=n.getY(),w=r.getX(),E=r.getY(),b=Mt.CORR;return i<this.width/2?[new j(w-b,E+b),new j(o+b,a+b),new j(u-b,h-b),new j(i+b,s-b)]:[new j(w+b,E+b),new j(o+b,a-b),new j(u-b,h+b),new j(i-b,s-b)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let s=e;s<=t;s++)if(i.get(s,n))return!0}else for(let s=e;s<=t;s++)if(i.get(n,s))return!0;return!1}}Mt.INIT_SIZE=10,Mt.CORR=1;class lr{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let s=0;s<t.length&&i;s+=2){const o=Math.floor(t[s]),a=Math.floor(t[s+1]);if(o<-1||o>n||a<-1||a>r)throw new v;i=!1,o===-1?(t[s]=0,i=!0):o===n&&(t[s]=n-1,i=!0),a===-1?(t[s+1]=0,i=!0):a===r&&(t[s+1]=r-1,i=!0)}i=!0;for(let s=t.length-2;s>=0&&i;s-=2){const o=Math.floor(t[s]),a=Math.floor(t[s+1]);if(o<-1||o>n||a<-1||a>r)throw new v;i=!1,o===-1?(t[s]=0,i=!0):o===n&&(t[s]=n-1,i=!0),a===-1?(t[s+1]=0,i=!0):a===r&&(t[s+1]=r-1,i=!0)}}}class mt{constructor(e,t,n,r,i,s,o,a,u){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=s,this.a13=o,this.a23=a,this.a33=u}static quadrilateralToQuadrilateral(e,t,n,r,i,s,o,a,u,h,w,E,b,I,y,N){const M=mt.quadrilateralToSquare(e,t,n,r,i,s,o,a);return mt.squareToQuadrilateral(u,h,w,E,b,I,y,N).times(M)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,u=this.a31,h=this.a32,w=this.a33;for(let E=0;E<t;E+=2){const b=e[E],I=e[E+1],y=i*b+a*I+w;e[E]=(n*b+s*I+u)/y,e[E+1]=(r*b+o*I+h)/y}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,u=this.a31,h=this.a32,w=this.a33,E=e.length;for(let b=0;b<E;b++){const I=e[b],y=t[b],N=i*I+a*y+w;e[b]=(n*I+s*y+u)/N,t[b]=(r*I+o*y+h)/N}}static squareToQuadrilateral(e,t,n,r,i,s,o,a){const u=e-n+i-o,h=t-r+s-a;if(u===0&&h===0)return new mt(n-e,i-n,e,r-t,s-r,t,0,0,1);{const w=n-i,E=o-i,b=r-s,I=a-s,y=w*I-E*b,N=(u*I-E*h)/y,M=(w*h-u*b)/y;return new mt(n-e+N*n,o-e+M*o,e,r-t+N*r,a-t+M*a,t,N,M,1)}}static quadrilateralToSquare(e,t,n,r,i,s,o,a){return mt.squareToQuadrilateral(e,t,n,r,i,s,o,a).buildAdjoint()}buildAdjoint(){return new mt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new mt(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class zr extends lr{sampleGrid(e,t,n,r,i,s,o,a,u,h,w,E,b,I,y,N,M,F,k){const L=mt.quadrilateralToQuadrilateral(r,i,s,o,a,u,h,w,E,b,I,y,N,M,F,k);return this.sampleGridWithTransform(e,t,n,L)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new v;const i=new We(t,n),s=new Float32Array(2*t);for(let o=0;o<n;o++){const a=s.length,u=o+.5;for(let h=0;h<a;h+=2)s[h]=h/2+.5,s[h+1]=u;r.transformPoints(s),lr.checkAndNudgePoints(e,s);try{for(let h=0;h<a;h+=2)e.get(Math.floor(s[h]),Math.floor(s[h+1]))&&i.set(h/2,o)}catch{throw new v}}return i}}class Lt{static setGridSampler(e){Lt.gridSampler=e}static getInstance(){return Lt.gridSampler}}Lt.gridSampler=new zr;class rt{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new j(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Yr{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let s=n[0];n[0]=n[2],n[2]=s}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new Xr(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new v;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let s=0;s<4;s++){let o=n[(this.shift+s)%4];this.compact?(r<<=7,r+=o>>1&127):(r<<=10,r+=(o>>2&992)+(o>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(i&63)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(i&2047)+1)}getRotation(e,t){let n=0;e.forEach((r,i,s)=>{let o=(r>>t-2<<1)+(r&1);n=(n<<3)+o}),n=((n&1)<<11)+(n>>1);for(let r=0;r<4;r++)if(X.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new v}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,s=new Int32Array(n);for(let a=n-1;a>=0;--a)s[a]=e&15,e>>=4;try{new An(we.AZTEC_PARAM).decode(s,i)}catch{throw new v}let o=0;for(let a=0;a<r;a++)o=(o<<4)+s[a];return o}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let w=this.getFirstDifferent(t,s,1,-1),E=this.getFirstDifferent(n,s,1,1),b=this.getFirstDifferent(r,s,-1,1),I=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let y=this.distancePoint(I,w)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(y<.75||y>1.25||!this.isWhiteOrBlackRectangle(w,E,b,I))break}t=w,n=E,r=b,i=I,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new v;this.compact=this.nbCenterLayers===5;let o=new j(t.getX()+.5,t.getY()-.5),a=new j(n.getX()+.5,n.getY()+.5),u=new j(r.getX()-.5,r.getY()+.5),h=new j(i.getX()-.5,i.getY()-.5);return this.expandSquare([o,a,u,h],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let o=new Mt(this.image).detect();e=o[0],t=o[1],n=o[2],r=o[3]}catch{let a=this.image.getWidth()/2,u=this.image.getHeight()/2;e=this.getFirstDifferent(new rt(a+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new rt(a+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new rt(a-7,u+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new rt(a-7,u-7),!1,-1,-1).toResultPoint()}let i=xe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=xe.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let o=new Mt(this.image,15,i,s).detect();e=o[0],t=o[1],n=o[2],r=o[3]}catch{e=this.getFirstDifferent(new rt(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new rt(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new rt(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new rt(i-7,s-7),!1,-1,-1).toResultPoint()}return i=xe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=xe.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new rt(i,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let s=Lt.getInstance(),o=this.getDimension(),a=o/2-this.nbCenterLayers,u=o/2+this.nbCenterLayers;return s.sampleGrid(e,o,o,a,a,u,a,u,u,a,u,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),s=i/n,o=e.getX(),a=e.getY(),u=s*(t.getX()-e.getX())/i,h=s*(t.getY()-e.getY())/i;for(let w=0;w<n;w++)this.image.get(xe.round(o+w*u),xe.round(a+w*h))&&(r|=1<<n-w-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new rt(e.getX()-i,e.getY()+i),t=new rt(t.getX()-i,t.getY()-i),n=new rt(n.getX()+i,n.getY()-i),r=new rt(r.getX()+i,r.getY()+i);let s=this.getColor(r,e);if(s===0)return!1;let o=this.getColor(e,t);return o!==s||(o=this.getColor(t,n),o!==s)?!1:(o=this.getColor(n,r),o===s)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,s=0,o=e.getX(),a=e.getY(),u=this.image.get(e.getX(),e.getY()),h=Math.ceil(n);for(let E=0;E<h;E++)o+=r,a+=i,this.image.get(xe.round(o),xe.round(a))!==u&&s++;let w=s/n;return w>.1&&w<.9?0:w<=.1===u?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,s=e.getY()+r;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n,s+=r;for(i-=n,s-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n;for(i-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=r;return s-=r,new rt(i,s)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),o=(e[0].getX()+e[2].getX())/2,a=(e[0].getY()+e[2].getY())/2,u=new j(o+r*i,a+r*s),h=new j(o-r*i,a-r*s);i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),o=(e[1].getX()+e[3].getX())/2,a=(e[1].getY()+e[3].getY())/2;let w=new j(o+r*i,a+r*s),E=new j(o-r*i,a-r*s);return[u,w,h,E]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=xe.round(e.getX()),n=xe.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return xe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return xe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(X.truncDivision(this.nbLayers-4,8)+1)+15}}class Pn{decode(e,t=null){let n=null,r=new Yr(e.getBlackMatrix()),i=null,s=null;try{let h=r.detectMirror(!1);i=h.getPoints(),this.reportFoundResultPoints(t,i),s=new Te().decode(h)}catch(h){n=h}if(s==null)try{let h=r.detectMirror(!0);i=h.getPoints(),this.reportFoundResultPoints(t,i),s=new Te().decode(h)}catch(h){throw n??h}let o=new nt(s.getText(),s.getRawBytes(),s.getNumBits(),i,$.AZTEC,G.currentTimeMillis()),a=s.getByteSegments();a!=null&&o.putMetadata(ze.BYTE_SEGMENTS,a);let u=s.getECLevel();return u!=null&&o.putMetadata(ze.ERROR_CORRECTION_LEVEL,u),o}reportFoundResultPoints(e,t){if(e!=null){let n=e.get(ue.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((r,i,s)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class cs extends Wt{constructor(e=500){super(new Pn,e)}}class Ue{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(ue.TRY_HARDER)===!0&&e.isRotateSupported()){const i=e.rotateCounterClockwise(),s=this.doDecode(i,t),o=s.getResultMetadata();let a=270;o!==null&&o.get(ze.ORIENTATION)===!0&&(a=a+o.get(ze.ORIENTATION)%360),s.putMetadata(ze.ORIENTATION,a);const u=s.getResultPoints();if(u!==null){const h=i.getHeight();for(let w=0;w<u.length;w++)u[w]=new j(h-u[w].getY()-1,u[w].getX())}return s}else throw new v}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new ie(n);const s=t&&t.get(ue.TRY_HARDER)===!0,o=Math.max(1,r>>(s?8:5));let a;s?a=r:a=15;const u=Math.trunc(r/2);for(let h=0;h<a;h++){const w=Math.trunc((h+1)/2),E=(h&1)===0,b=u+o*(E?w:-w);if(b<0||b>=r)break;try{i=e.getBlackRow(b,i)}catch{continue}for(let I=0;I<2;I++){if(I===1&&(i.reverse(),t&&t.get(ue.NEED_RESULT_POINT_CALLBACK)===!0)){const y=new Map;t.forEach((N,M)=>y.set(M,N)),y.delete(ue.NEED_RESULT_POINT_CALLBACK),t=y}try{const y=this.decodeRow(b,i,t);if(I===1){y.putMetadata(ze.ORIENTATION,180);const N=y.getResultPoints();N!==null&&(N[0]=new j(n-N[0].getX()-1,N[0].getY()),N[1]=new j(n-N[1].getX()-1,N[1].getY()))}return y}catch{}}}throw new v}static recordPattern(e,t,n){const r=n.length;for(let u=0;u<r;u++)n[u]=0;const i=e.getSize();if(t>=i)throw new v;let s=!e.get(t),o=0,a=t;for(;a<i;){if(e.get(a)!==s)n[o]++;else{if(++o===r)break;n[o]=1,s=!s}a++}if(!(o===r||o===r-1&&a===i))throw new v}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new v;Ue.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,s=0;for(let u=0;u<r;u++)i+=e[u],s+=t[u];if(i<s)return Number.POSITIVE_INFINITY;const o=i/s;n*=o;let a=0;for(let u=0;u<r;u++){const h=e[u],w=t[u]*o,E=h>w?h-w:w-h;if(E>n)return Number.POSITIVE_INFINITY;a+=E}return a/i}}class H extends Ue{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),s=n,o=!1;const a=6;for(let u=n;u<t;u++)if(e.get(u)!==o)i[r]++;else{if(r===a-1){let h=H.MAX_AVG_VARIANCE,w=-1;for(let E=H.CODE_START_A;E<=H.CODE_START_C;E++){const b=Ue.patternMatchVariance(i,H.CODE_PATTERNS[E],H.MAX_INDIVIDUAL_VARIANCE);b<h&&(h=b,w=E)}if(w>=0&&e.isRange(Math.max(0,s-(u-s)/2),s,!1))return Int32Array.from([s,u,w]);s+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,o=!o}throw new v}static decodeCode(e,t,n){Ue.recordPattern(e,n,t);let r=H.MAX_AVG_VARIANCE,i=-1;for(let s=0;s<H.CODE_PATTERNS.length;s++){const o=H.CODE_PATTERNS[s],a=this.patternMatchVariance(t,o,H.MAX_INDIVIDUAL_VARIANCE);a<r&&(r=a,i=s)}if(i>=0)return i;throw new v}decodeRow(e,t,n){const r=n&&n.get(ue.ASSUME_GS1)===!0,i=H.findStartPattern(t),s=i[2];let o=0;const a=new Uint8Array(20);a[o++]=s;let u;switch(s){case H.CODE_START_A:u=H.CODE_CODE_A;break;case H.CODE_START_B:u=H.CODE_CODE_B;break;case H.CODE_START_C:u=H.CODE_CODE_C;break;default:throw new U}let h=!1,w=!1,E="",b=i[0],I=i[1];const y=Int32Array.from([0,0,0,0,0,0]);let N=0,M=0,F=s,k=0,L=!0,fe=!1,se=!1;for(;!h;){const un=w;switch(w=!1,N=M,M=H.decodeCode(t,y,I),a[o++]=M,M!==H.CODE_STOP&&(L=!0),M!==H.CODE_STOP&&(k++,F+=k*M),b=I,I+=y.reduce((ks,Us)=>ks+Us,0),M){case H.CODE_START_A:case H.CODE_START_B:case H.CODE_START_C:throw new U}switch(u){case H.CODE_CODE_A:if(M<64)se===fe?E+=String.fromCharCode(32+M):E+=String.fromCharCode(32+M+128),se=!1;else if(M<96)se===fe?E+=String.fromCharCode(M-64):E+=String.fromCharCode(M+64),se=!1;else switch(M!==H.CODE_STOP&&(L=!1),M){case H.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case H.CODE_FNC_2:case H.CODE_FNC_3:break;case H.CODE_FNC_4_A:!fe&&se?(fe=!0,se=!1):fe&&se?(fe=!1,se=!1):se=!0;break;case H.CODE_SHIFT:w=!0,u=H.CODE_CODE_B;break;case H.CODE_CODE_B:u=H.CODE_CODE_B;break;case H.CODE_CODE_C:u=H.CODE_CODE_C;break;case H.CODE_STOP:h=!0;break}break;case H.CODE_CODE_B:if(M<96)se===fe?E+=String.fromCharCode(32+M):E+=String.fromCharCode(32+M+128),se=!1;else switch(M!==H.CODE_STOP&&(L=!1),M){case H.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case H.CODE_FNC_2:case H.CODE_FNC_3:break;case H.CODE_FNC_4_B:!fe&&se?(fe=!0,se=!1):fe&&se?(fe=!1,se=!1):se=!0;break;case H.CODE_SHIFT:w=!0,u=H.CODE_CODE_A;break;case H.CODE_CODE_A:u=H.CODE_CODE_A;break;case H.CODE_CODE_C:u=H.CODE_CODE_C;break;case H.CODE_STOP:h=!0;break}break;case H.CODE_CODE_C:if(M<100)M<10&&(E+="0"),E+=M;else switch(M!==H.CODE_STOP&&(L=!1),M){case H.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+="");break;case H.CODE_CODE_A:u=H.CODE_CODE_A;break;case H.CODE_CODE_B:u=H.CODE_CODE_B;break;case H.CODE_STOP:h=!0;break}break}un&&(u=u===H.CODE_CODE_A?H.CODE_CODE_B:H.CODE_CODE_A)}const ut=I-b;if(I=t.getNextUnset(I),!t.isRange(I,Math.min(t.getSize(),I+(I-b)/2),!1))throw new v;if(F-=k*N,F%103!==N)throw new q;const bt=E.length;if(bt===0)throw new v;bt>0&&L&&(u===H.CODE_CODE_C?E=E.substring(0,bt-2):E=E.substring(0,bt-1));const ft=(i[1]+i[0])/2,Se=b+ut/2,Qe=a.length,dt=new Uint8Array(Qe);for(let un=0;un<Qe;un++)dt[un]=a[un];const cn=[new j(ft,e),new j(Se,e)];return new nt(E,dt,0,cn,$.CODE_128,new Date().getTime())}}H.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],H.MAX_AVG_VARIANCE=.25,H.MAX_INDIVIDUAL_VARIANCE=.7,H.CODE_SHIFT=98,H.CODE_CODE_C=99,H.CODE_CODE_B=100,H.CODE_CODE_A=101,H.CODE_FNC_1=102,H.CODE_FNC_2=97,H.CODE_FNC_3=96,H.CODE_FNC_4_A=101,H.CODE_FNC_4_B=100,H.CODE_START_A=103,H.CODE_START_B=104,H.CODE_START_C=105,H.CODE_STOP=106;class Ve extends Ue{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i=Ve.findAsteriskPattern(t,r),s=t.getNextSet(i[1]),o=t.getSize(),a,u;do{Ve.recordPattern(t,s,r);let y=Ve.toNarrowWidePattern(r);if(y<0)throw new v;a=Ve.patternToChar(y),this.decodeRowResult+=a,u=s;for(let N of r)s+=N;s=t.getNextSet(s)}while(a!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let h=0;for(let y of r)h+=y;let w=s-u-h;if(s!==o&&w*2<h)throw new v;if(this.usingCheckDigit){let y=this.decodeRowResult.length-1,N=0;for(let M=0;M<y;M++)N+=Ve.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(M));if(this.decodeRowResult.charAt(y)!==Ve.ALPHABET_STRING.charAt(N%43))throw new q;this.decodeRowResult=this.decodeRowResult.substring(0,y)}if(this.decodeRowResult.length===0)throw new v;let E;this.extendedMode?E=Ve.decodeExtended(this.decodeRowResult):E=this.decodeRowResult;let b=(i[1]+i[0])/2,I=u+h/2;return new nt(E,null,0,[new j(b,e),new j(I,e)],$.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,s=r,o=!1,a=t.length;for(let u=r;u<n;u++)if(e.get(u)!==o)t[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(t)===Ve.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((u-s)/2)),s,!1))return[s,u];s+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,o=!o}throw new v}static toNarrowWidePattern(e){let t=e.length,n=0,r;do{let i=2147483647;for(let a of e)a<i&&a>n&&(i=a);n=i,r=0;let s=0,o=0;for(let a=0;a<t;a++){let u=e[a];u>n&&(o|=1<<t-1-a,r++,s+=u)}if(r===3){for(let a=0;a<t&&r>0;a++){let u=e[a];if(u>n&&(r--,u*2>=s))return-1}return o}}while(r>3);return-1}static patternToChar(e){for(let t=0;t<Ve.CHARACTER_ENCODINGS.length;t++)if(Ve.CHARACTER_ENCODINGS[t]===e)return Ve.ALPHABET_STRING.charAt(t);if(e===Ve.ASTERISK_ENCODING)return"*";throw new v}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let i=e.charAt(r);if(i==="+"||i==="$"||i==="%"||i==="/"){let s=e.charAt(r+1),o="\0";switch(i){case"+":if(s>="A"&&s<="Z")o=String.fromCharCode(s.charCodeAt(0)+32);else throw new U;break;case"$":if(s>="A"&&s<="Z")o=String.fromCharCode(s.charCodeAt(0)-64);else throw new U;break;case"%":if(s>="A"&&s<="E")o=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")o=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")o=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")o=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")o="\0";else if(s==="V")o="@";else if(s==="W")o="`";else if(s==="X"||s==="Y"||s==="Z")o="";else throw new U;break;case"/":if(s>="A"&&s<="O")o=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")o=":";else throw new U;break}n+=o,r++}else n+=i}return n}}Ve.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ve.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ve.ASTERISK_ENCODING=148;class Ie extends Ue{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),s=new pe;Ie.decodeMiddle(t,r[1],i[0],s);let o=s.toString(),a=null;n!=null&&(a=n.get(ue.ALLOWED_LENGTHS)),a==null&&(a=Ie.DEFAULT_ALLOWED_LENGTHS);let u=o.length,h=!1,w=0;for(let I of a){if(u===I){h=!0;break}I>w&&(w=I)}if(!h&&u>w&&(h=!0),!h)throw new U;const E=[new j(r[1],e),new j(i[0],e)];return new nt(o,null,0,E,$.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),s=new Int32Array(5),o=new Int32Array(5);for(i.fill(0),s.fill(0),o.fill(0);t<n;){Ue.recordPattern(e,t,i);for(let u=0;u<5;u++){let h=2*u;s[u]=i[h],o[u]=i[h+1]}let a=Ie.decodeDigit(s);r.append(a.toString()),a=this.decodeDigit(o),r.append(a.toString()),i.forEach(function(u){t+=u})}}decodeStart(e){let t=Ie.skipWhiteSpace(e),n=Ie.findGuardPattern(e,t,Ie.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(n!==0)throw new v}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new v;return n}decodeEnd(e){e.reverse();try{let t=Ie.skipWhiteSpace(e),n;try{n=Ie.findGuardPattern(e,t,Ie.END_PATTERN_REVERSED[0])}catch(i){i instanceof v&&(n=Ie.findGuardPattern(e,t,Ie.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),s=e.getSize(),o=!1,a=0,u=t;i.fill(0);for(let h=t;h<s;h++)if(e.get(h)!==o)i[a]++;else{if(a===r-1){if(Ue.patternMatchVariance(i,n,Ie.MAX_INDIVIDUAL_VARIANCE)<Ie.MAX_AVG_VARIANCE)return[u,h];u+=i[0]+i[1],G.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,o=!o}throw new v}static decodeDigit(e){let t=Ie.MAX_AVG_VARIANCE,n=-1,r=Ie.PATTERNS.length;for(let i=0;i<r;i++){let s=Ie.PATTERNS[i],o=Ue.patternMatchVariance(e,s,Ie.MAX_INDIVIDUAL_VARIANCE);o<t?(t=o,n=i):o===t&&(n=-1)}if(n>=0)return n%10;throw new v}}Ie.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ie.MAX_AVG_VARIANCE=.38,Ie.MAX_INDIVIDUAL_VARIANCE=.5,Ie.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ie.START_PATTERN=Int32Array.from([1,1,1,1]),Ie.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Be extends Ue{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,r=0,i=Int32Array.from([0,0,0]);for(;!t;){i=Int32Array.from([0,0,0]),n=Be.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let s=n[0];r=n[1];let o=s-(r-s);o>=0&&(t=e.isRange(o,s,!1))}return n}static checkChecksum(e){return Be.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Be.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new U;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new U;n+=i}return(1e3-n)%10}static decodeEnd(e,t){return Be.findGuardPattern(e,t,!1,Be.START_END_PATTERN,new Int32Array(Be.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let s=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let o=0,a=t,u=r.length,h=n;for(let w=t;w<s;w++)if(e.get(w)!==h)i[o]++;else{if(o===u-1){if(Ue.patternMatchVariance(i,r,Be.MAX_INDIVIDUAL_VARIANCE)<Be.MAX_AVG_VARIANCE)return Int32Array.from([a,w]);a+=i[0]+i[1];let E=i.slice(2,i.length-1);for(let b=0;b<o-1;b++)i[b]=E[b];i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,h=!h}throw new v}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,s=-1,o=r.length;for(let a=0;a<o;a++){let u=r[a],h=Ue.patternMatchVariance(t,u,Be.MAX_INDIVIDUAL_VARIANCE);h<i&&(i=h,s=a)}if(s>=0)return s;throw new v}}Be.MAX_AVG_VARIANCE=.48,Be.MAX_INDIVIDUAL_VARIANCE=.7,Be.START_END_PATTERN=Int32Array.from([1,1,1]),Be.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Be.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Be.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class En{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),o=En.parseExtensionString(s),a=[new j((n[0]+n[1])/2,e),new j(i,e)],u=new nt(s,null,0,a,$.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&u.putAllMetadata(o),u}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let u=0;u<5&&s<i;u++){let h=Be.decodeDigit(e,r,s,Be.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);for(let w of r)s+=w;h>=10&&(o|=1<<4-u),u!==4&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(n.length!==5)throw new v;let a=this.determineCheckDigit(o);if(En.extensionChecksum(n.toString())!==a)throw new v;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new v}static parseExtensionString(e){if(e.length!==5)return null;let t=En.parseExtension5String(e);return t==null?null:new Map([[ze.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),r=(n/100).toString(),i=n%100,s=i<10?"0"+i:i.toString();return t+r+"."+s}}class cr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),o=cr.parseExtensionString(s),a=[new j((n[0]+n[1])/2,e),new j(i,e)],u=new nt(s,null,0,a,$.UPC_EAN_EXTENSION,new Date().getTime());return o!=null&&u.putAllMetadata(o),u}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let a=0;a<2&&s<i;a++){let u=Be.decodeDigit(e,r,s,Be.L_AND_G_PATTERNS);n+=String.fromCharCode(48+u%10);for(let h of r)s+=h;u>=10&&(o|=1<<1-a),a!==1&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(n.length!==2)throw new v;if(parseInt(n.toString())%4!==o)throw new v;return s}static parseExtensionString(e){return e.length!==2?null:new Map([[ze.ISSUE_NUMBER,parseInt(e)]])}}class Zr{static decodeRow(e,t,n){let r=Be.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new En().decodeRow(e,t,r)}catch{return new cr().decodeRow(e,t,r)}}}Zr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ae extends Be{constructor(){super(),this.decodeRowStringBuffer="",Ae.L_AND_G_PATTERNS=Ae.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ae.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];Ae.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Ae.findStartGuardPattern(t),i=n==null?null:n.get(ue.NEED_RESULT_POINT_CALLBACK);if(i!=null){const L=new j((r[0]+r[1])/2,e);i.foundPossibleResultPoint(L)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),o=s.rowOffset,a=s.resultString;if(i!=null){const L=new j(o,e);i.foundPossibleResultPoint(L)}let u=this.decodeEnd(t,o);if(i!=null){const L=new j((u[0]+u[1])/2,e);i.foundPossibleResultPoint(L)}let h=u[1],w=h+(h-u[0]);if(w>=t.getSize()||!t.isRange(h,w,!1))throw new v;let E=a.toString();if(E.length<8)throw new U;if(!Ae.checkChecksum(E))throw new q;let b=(r[1]+r[0])/2,I=(u[1]+u[0])/2,y=this.getBarcodeFormat(),N=[new j(b,e),new j(I,e)],M=new nt(E,null,0,N,y,new Date().getTime()),F=0;try{let L=Zr.decodeRow(e,t,u[1]);M.putMetadata(ze.UPC_EAN_EXTENSION,L.getText()),M.putAllMetadata(L.getResultMetadata()),M.addResultPoints(L.getResultPoints()),F=L.getText().length}catch{}let k=n==null?null:n.get(ue.ALLOWED_EAN_EXTENSIONS);if(k!=null){let L=!1;for(let fe in k)if(F.toString()===fe){L=!0;break}if(!L)throw new v}return M}decodeEnd(e,t){return Ae.findGuardPattern(e,t,!1,Ae.START_END_PATTERN,new Int32Array(Ae.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ae.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Ae.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new U;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new U;n+=i}return(1e3-n)%10}}class Xt extends Ae{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],o=0;for(let u=0;u<6&&s<i;u++){let h=Ae.decodeDigit(e,r,s,Ae.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);for(let w of r)s+=w;h>=10&&(o|=1<<5-u)}n=Xt.determineFirstDigit(n,o),s=Ae.findGuardPattern(e,s,!0,Ae.MIDDLE_PATTERN,new Int32Array(Ae.MIDDLE_PATTERN.length).fill(0))[1];for(let u=0;u<6&&s<i;u++){let h=Ae.decodeDigit(e,r,s,Ae.L_PATTERNS);n+=String.fromCharCode(48+h);for(let w of r)s+=w}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return $.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode(48+n)+e,e;throw new v}}Xt.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class jr extends Ae{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1];for(let a=0;a<4&&s<i;a++){let u=Ae.decodeDigit(e,r,s,Ae.L_PATTERNS);n+=String.fromCharCode(48+u);for(let h of r)s+=h}s=Ae.findGuardPattern(e,s,!0,Ae.MIDDLE_PATTERN,new Int32Array(Ae.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<4&&s<i;a++){let u=Ae.decodeDigit(e,r,s,Ae.L_PATTERNS);n+=String.fromCharCode(48+u);for(let h of r)s+=h}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return $.EAN_8}}class qr extends Ae{constructor(){super(...arguments),this.ean13Reader=new Xt}getBarcodeFormat(){return $.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new nt(t.substring(1),null,null,e.getResultPoints(),$.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new v}reset(){this.ean13Reader.reset()}}class pt extends Ae{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(u=>u);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let s=t[1],o=0;for(let u=0;u<6&&s<i;u++){const h=pt.decodeDigit(e,r,s,pt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);for(let w of r)s+=w;h>=10&&(o|=1<<5-u)}let a=pt.determineNumSysAndCheckDigit(n,o);return{rowOffset:s,resultString:a}}decodeEnd(e,t){return pt.findGuardPatternWithoutCounters(e,t,!0,pt.MIDDLE_END_PATTERN)}checkChecksum(e){return Ae.checkChecksum(pt.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let i=String.fromCharCode(48+n),s=String.fromCharCode(48+r);return i+e+s}throw v.getNotFoundInstance()}getBarcodeFormat(){return $.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(i=>i.charCodeAt(0)),n=new pe;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}pt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ur extends Ue{constructor(e){super();let t=e==null?null:e.get(ue.POSSIBLE_FORMATS),n=[];d(t)?(n.push(new Xt),n.push(new qr),n.push(new jr),n.push(new pt)):(t.indexOf($.EAN_13)>-1&&n.push(new Xt),t.indexOf($.UPC_A)>-1&&n.push(new qr),t.indexOf($.EAN_8)>-1&&n.push(new jr),t.indexOf($.UPC_E)>-1&&n.push(new pt)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{const i=r.decodeRow(e,t,n),s=i.getBarcodeFormat()===$.EAN_13&&i.getText().charAt(0)==="0",o=n==null?null:n.get(ue.POSSIBLE_FORMATS),a=o==null||o.includes($.UPC_A);if(s&&a){const u=i.getRawBytes(),h=new nt(i.getText().substring(1),u,u?u.length:null,i.getResultPoints(),$.UPC_A);return h.putAllMetadata(i.getResultMetadata()),h}return i}catch{}throw new v}reset(){for(let e of this.readers)e.reset()}}class Je extends Ue{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(Ue.patternMatchVariance(e,t[n],Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return n;throw new v}static count(e){return xe.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],r=t/n;if(r>=Je.MIN_FINDER_PATTERN_RATIO&&r<=Je.MAX_FINDER_PATTERN_RATIO){let i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;for(let o of e)o>s&&(s=o),o<i&&(i=o);return s<10*i}return!1}}Je.MAX_AVG_VARIANCE=.2,Je.MAX_INDIVIDUAL_VARIANCE=.45,Je.MIN_FINDER_PATTERN_RATIO=9.5/12,Je.MAX_FINDER_PATTERN_RATIO=12.5/14;class tn{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof tn))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ln{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new j(n,i)),this.resultPoints.push(new j(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Ln))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class St{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let a of e)r+=a;let i=0,s=0,o=e.length;for(let a=0;a<o-1;a++){let u;for(u=1,s|=1<<a;u<e[a];u++,s&=~(1<<a)){let h=St.combins(r-u-1,o-a-2);if(n&&s===0&&r-u-(o-a-1)>=o-a-1&&(h-=St.combins(r-u-(o-a),o-a-2)),o-a-1>1){let w=0;for(let E=r-u-(o-a-2);E>t;E--)w+=St.combins(r-u-E-1,o-a-3);h-=w*(o-1-a)}else r-u>t&&h--;i+=h}r-=u}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,s=1;for(let o=e;o>n;o--)i*=o,s<=r&&(i/=s,s++);for(;s<=r;)i/=s,s++;return i}}class us{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,r=new ie(n),i=0,o=e[0].getRightChar().getValue();for(let a=11;a>=0;--a)(o&1<<a)!=0&&r.set(i),i++;for(let a=1;a<e.length;++a){let u=e[a],h=u.getLeftChar().getValue();for(let w=11;w>=0;--w)(h&1<<w)!=0&&r.set(i),i++;if(u.getRightChar()!=null){let w=u.getRightChar().getValue();for(let E=11;E>=0;--E)(w&1<<E)!=0&&r.set(i),i++}}return r}}class zt{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class fr{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class at extends fr{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===at.FNC1}}at.FNC1="$";class Yt extends fr{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class wt extends fr{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new U;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===wt.FNC1}isSecondDigitFNC1(){return this.secondDigit===wt.FNC1}isAnyFNC1(){return this.firstDigit===wt.FNC1||this.secondDigit===wt.FNC1}}wt.FNC1=10;class z{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new v;let t=e.substring(0,2);for(let i of z.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===z.VARIABLE_LENGTH?z.processVariableAI(2,i[2],e):z.processFixedAI(2,i[1],e);if(e.length<3)throw new v;let n=e.substring(0,3);for(let i of z.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===z.VARIABLE_LENGTH?z.processVariableAI(3,i[2],e):z.processFixedAI(3,i[1],e);for(let i of z.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===z.VARIABLE_LENGTH?z.processVariableAI(4,i[2],e):z.processFixedAI(4,i[1],e);if(e.length<4)throw new v;let r=e.substring(0,4);for(let i of z.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===z.VARIABLE_LENGTH?z.processVariableAI(4,i[2],e):z.processFixedAI(4,i[1],e);throw new v}static processFixedAI(e,t,n){if(n.length<e)throw new v;let r=n.substring(0,e);if(n.length<e+t)throw new v;let i=n.substring(e,e+t),s=n.substring(e+t),o="("+r+")"+i,a=z.parseFieldsInGeneralPurpose(s);return a==null?o:o+a}static processVariableAI(e,t,n){let r=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;let s=n.substring(e,i),o=n.substring(i),a="("+r+")"+s,u=z.parseFieldsInGeneralPurpose(o);return u==null?a:a+u}}z.VARIABLE_LENGTH=[],z.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",z.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",z.VARIABLE_LENGTH,20],["22",z.VARIABLE_LENGTH,29],["30",z.VARIABLE_LENGTH,8],["37",z.VARIABLE_LENGTH,8],["90",z.VARIABLE_LENGTH,30],["91",z.VARIABLE_LENGTH,30],["92",z.VARIABLE_LENGTH,30],["93",z.VARIABLE_LENGTH,30],["94",z.VARIABLE_LENGTH,30],["95",z.VARIABLE_LENGTH,30],["96",z.VARIABLE_LENGTH,30],["97",z.VARIABLE_LENGTH,3],["98",z.VARIABLE_LENGTH,30],["99",z.VARIABLE_LENGTH,30]],z.THREE_DIGIT_DATA_LENGTH=[["240",z.VARIABLE_LENGTH,30],["241",z.VARIABLE_LENGTH,30],["242",z.VARIABLE_LENGTH,6],["250",z.VARIABLE_LENGTH,30],["251",z.VARIABLE_LENGTH,30],["253",z.VARIABLE_LENGTH,17],["254",z.VARIABLE_LENGTH,20],["400",z.VARIABLE_LENGTH,30],["401",z.VARIABLE_LENGTH,30],["402",17],["403",z.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",z.VARIABLE_LENGTH,20],["421",z.VARIABLE_LENGTH,15],["422",3],["423",z.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],z.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",z.VARIABLE_LENGTH,15],["391",z.VARIABLE_LENGTH,18],["392",z.VARIABLE_LENGTH,15],["393",z.VARIABLE_LENGTH,18],["703",z.VARIABLE_LENGTH,30]],z.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",z.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",z.VARIABLE_LENGTH,20],["8003",z.VARIABLE_LENGTH,30],["8004",z.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",z.VARIABLE_LENGTH,30],["8008",z.VARIABLE_LENGTH,12],["8018",18],["8020",z.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",z.VARIABLE_LENGTH,70],["8200",z.VARIABLE_LENGTH,70]];class nn{constructor(e){this.buffer=new pe,this.information=e}decodeAllCodes(e,t){let n=t,r=null;do{let i=this.decodeGeneralPurposeField(n,r),s=z.parseFieldsInGeneralPurpose(i.getNewString());if(s!=null&&e.append(s),i.isRemaining()?r=""+i.getRemainingValue():r=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let i=this.extractNumericValueFromBitArray(e,4);return i===0?new wt(this.information.getSize(),wt.FNC1,wt.FNC1):new wt(this.information.getSize(),i-1,wt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,r=(t-8)%11;return new wt(e+7,n,r)}extractNumericValueFromBitArray(e,t){return nn.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new Yt(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Yt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new Yt(this.current.getPosition(),this.buffer.toString()):t=new Yt(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new zt(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new Yt(this.current.getPosition(),this.buffer.toString());return new zt(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new zt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new Yt(this.current.getPosition(),this.buffer.toString());return new zt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new zt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new Yt(this.current.getPosition(),this.buffer.toString());return new zt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new zt(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new at(e+5,at.FNC1);if(t>=5&&t<15)return new at(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new at(e+7,""+(n+1));if(n>=90&&n<116)return new at(e+7,""+(n+7));let r=this.extractNumericValueFromBitArray(e,8),i;switch(r){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new U}return new at(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new at(e+5,at.FNC1);if(t>=5&&t<15)return new at(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new at(e+6,""+(n+33));let r;switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new yt("Decoding invalid alphanumeric value: "+n)}return new at(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class hr{constructor(e){this.information=e,this.generalDecoder=new nn(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class lt extends hr{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i)}lt.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-48;n+=(r&1)===0?3*i:i}n=10-n%10,n===10&&(n=0),e.append(n)}}lt.GTIN_SIZE=40;class rn extends lt{constructor(e){super(e)}parseInformation(){let e=new pe;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(rn.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,rn.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,rn.HEADER_SIZE+44)}}rn.HEADER_SIZE=4;class Fn extends hr{constructor(e){super(e)}parseInformation(){let e=new pe;return this.getGeneralDecoder().decodeAllCodes(e,Fn.HEADER_SIZE)}}Fn.HEADER_SIZE=5;class kn extends lt{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),s=1e5;for(let o=0;o<5;++o)i/s===0&&e.append("0"),s/=10;e.append(i)}}class Tt extends kn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Tt.HEADER_SIZE+kn.GTIN_SIZE+Tt.WEIGHT_SIZE)throw new v;let e=new pe;return this.encodeCompressedGtin(e,Tt.HEADER_SIZE),this.encodeCompressedWeight(e,Tt.HEADER_SIZE+kn.GTIN_SIZE,Tt.WEIGHT_SIZE),e.toString()}}Tt.HEADER_SIZE=5,Tt.WEIGHT_SIZE=15;class fs extends Tt{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class hs extends Tt{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Nt extends lt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Nt.HEADER_SIZE+lt.GTIN_SIZE)throw new v;let e=new pe;this.encodeCompressedGtin(e,Nt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Nt.HEADER_SIZE+lt.GTIN_SIZE,Nt.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Nt.HEADER_SIZE+lt.GTIN_SIZE+Nt.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Nt.HEADER_SIZE=8,Nt.LAST_DIGIT_SIZE=2;class it extends lt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<it.HEADER_SIZE+lt.GTIN_SIZE)throw new v;let e=new pe;this.encodeCompressedGtin(e,it.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(it.HEADER_SIZE+lt.GTIN_SIZE,it.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(it.HEADER_SIZE+lt.GTIN_SIZE+it.LAST_DIGIT_SIZE,it.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(it.HEADER_SIZE+lt.GTIN_SIZE+it.LAST_DIGIT_SIZE+it.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}it.HEADER_SIZE=8,it.LAST_DIGIT_SIZE=2,it.FIRST_THREE_DIGITS_SIZE=10;class _e extends kn{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=_e.HEADER_SIZE+_e.GTIN_SIZE+_e.WEIGHT_SIZE+_e.DATE_SIZE)throw new v;let e=new pe;return this.encodeCompressedGtin(e,_e.HEADER_SIZE),this.encodeCompressedWeight(e,_e.HEADER_SIZE+_e.GTIN_SIZE,_e.WEIGHT_SIZE),this.encodeCompressedDate(e,_e.HEADER_SIZE+_e.GTIN_SIZE+_e.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,_e.DATE_SIZE);if(n==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let s=n;s/10==0&&e.append("0"),e.append(s),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}_e.HEADER_SIZE=8,_e.WEIGHT_SIZE=20,_e.DATE_SIZE=16;function Kr(g){try{if(g.get(1))return new rn(g);if(!g.get(2))return new Fn(g);switch(nn.extractNumericValueFromBitArray(g,1,4)){case 4:return new fs(g);case 5:return new hs(g)}switch(nn.extractNumericValueFromBitArray(g,1,5)){case 12:return new Nt(g);case 13:return new it(g)}switch(nn.extractNumericValueFromBitArray(g,1,7)){case 56:return new _e(g,"310","11");case 57:return new _e(g,"320","11");case 58:return new _e(g,"310","13");case 59:return new _e(g,"320","13");case 60:return new _e(g,"310","15");case 61:return new _e(g,"320","15");case 62:return new _e(g,"310","17");case 63:return new _e(g,"320","17")}}catch(e){throw console.log(e),new yt("unknown decoder: "+g)}}class Ft{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof Ft?Ft.equalsOrNull(e.leftchar,t.leftchar)&&Ft.equalsOrNull(e.rightchar,t.rightchar)&&Ft.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:Ft.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class dr{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof dr?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,i)=>{t.forEach(s=>{r.getLeftChar().getValue()===s.getLeftChar().getValue()&&r.getRightChar().getValue()===s.getRightChar().getValue()&&r.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}}class P extends Je{constructor(e){super(...arguments),this.pairs=new Array(P.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return P.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,P.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof v){if(!this.pairs.length)throw new v;n=!0}}if(this.checkChecksum())return this.pairs;let r;if(this.rows.length?r=!0:r=!1,this.storeRow(e,!1),r){let i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new v}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let s of e)this.pairs.push(s.getPairs());if(this.pairs.push(r.getPairs()),!P.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(r);try{return this.checkRows(i,n+1)}catch(s){this.verbose&&console.log(s)}}throw new v}static isValidSequence(e){for(let t of P.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let s=this.rows[n];if(s.getRowNumber()>e){i=s.isEquivalent(this.pairs);break}r=s.isEquivalent(this.pairs),n++}i||r||P.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new dr(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let r of n.getPairs())for(let i of e)if(Ft.equals(r,i))break}}static isPartialRow(e,t){for(let n of t){let r=!0;for(let i of e){let s=!1;for(let o of n.getPairs())if(i.equals(o)){s=!0;break}if(!s){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=us.buildBitArray(e),r=Kr(t).parseInformation(),i=e[0].getFinderPattern().getResultPoints(),s=e[e.length-1].getFinderPattern().getResultPoints(),o=[i[0],i[1],s[0],s[1]];return new nt(r,null,null,o,$.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let r=n.getChecksumPortion(),i=2;for(let o=1;o<this.pairs.size();++o){let a=this.pairs.get(o);r+=a.getLeftChar().getChecksumPortion(),i++;let u=a.getRightChar();u!=null&&(r+=u.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let i,s=!0,o=-1;do this.findNextPair(e,t,o),i=this.parseFoundFinderPattern(e,n,r),i==null?o=P.getNextSecondBar(e,this.startEnd[0]):s=!1;while(s);let a=this.decodeDataCharacter(e,i,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new v;let u;try{u=this.decodeDataCharacter(e,i,r,!1)}catch(h){u=null,this.verbose&&console.log(h)}return new Ft(a,u,i,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s;n>=0?s=n:this.isEmptyPair(t)?s=0:s=t[t.length-1].getFinderPattern().getStartEnd()[1];let o=t.length%2!=0;this.startFromEven&&(o=!o);let a=!1;for(;s<i&&(a=!e.get(s),!!a);)s++;let u=0,h=s;for(let w=s;w<i;w++)if(e.get(w)!=a)r[u]++;else{if(u==3){if(o&&P.reverseCounters(r),P.isFinderPattern(r)){this.startEnd[0]=h,this.startEnd[1]=w;return}o&&P.reverseCounters(r),h+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,u--}else u++;r[u]=1,a=!a}throw new v}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,s;if(n){let u=this.startEnd[0]-1;for(;u>=0&&!e.get(u);)u--;u++,r=this.startEnd[0]-u,i=u,s=this.startEnd[1]}else i=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),r=s-this.startEnd[1];let o=this.getDecodeFinderCounters();G.arraycopy(o,0,o,1,o.length-1),o[0]=r;let a;try{a=this.parseFinderValue(o,P.FINDER_PATTERNS)}catch{return null}return new Ln(a,[i,s],i,s,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let Se=0;Se<i.length;Se++)i[Se]=0;if(r)P.recordPatternInReverse(e,t.getStartEnd()[0],i);else{P.recordPattern(e,t.getStartEnd()[1],i);for(let Se=0,Qe=i.length-1;Se<Qe;Se++,Qe--){let dt=i[Se];i[Se]=i[Qe],i[Qe]=dt}}let s=17,o=xe.sum(new Int32Array(i))/s,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(o-a)/a>.3)throw new v;let u=this.getOddCounts(),h=this.getEvenCounts(),w=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let Se=0;Se<i.length;Se++){let Qe=1*i[Se]/o,dt=Qe+.5;if(dt<1){if(Qe<.3)throw new v;dt=1}else if(dt>8){if(Qe>8.7)throw new v;dt=8}let cn=Se/2;(Se&1)==0?(u[cn]=dt,w[cn]=Qe-dt):(h[cn]=dt,E[cn]=Qe-dt)}this.adjustOddEvenCounts(s);let b=4*t.getValue()+(n?0:2)+(r?0:1)-1,I=0,y=0;for(let Se=u.length-1;Se>=0;Se--){if(P.isNotA1left(t,n,r)){let Qe=P.WEIGHTS[b][2*Se];y+=u[Se]*Qe}I+=u[Se]}let N=0;for(let Se=h.length-1;Se>=0;Se--)if(P.isNotA1left(t,n,r)){let Qe=P.WEIGHTS[b][2*Se+1];N+=h[Se]*Qe}let M=y+N;if((I&1)!=0||I>13||I<4)throw new v;let F=(13-I)/2,k=P.SYMBOL_WIDEST[F],L=9-k,fe=St.getRSSvalue(u,k,!0),se=St.getRSSvalue(h,L,!1),ut=P.EVEN_TOTAL_SUBSET[F],bt=P.GSUM[F],ft=fe*ut+se+bt;return new tn(ft,M)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=xe.sum(new Int32Array(this.getOddCounts())),n=xe.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let s=!1,o=!1;n>13?o=!0:n<4&&(s=!0);let a=t+n-e,u=(t&1)==1,h=(n&1)==0;if(a==1)if(u){if(h)throw new v;i=!0}else{if(!h)throw new v;o=!0}else if(a==-1)if(u){if(h)throw new v;r=!0}else{if(!h)throw new v;s=!0}else if(a==0){if(u){if(!h)throw new v;t<n?(r=!0,o=!0):(i=!0,s=!0)}else if(h)throw new v}else throw new v;if(r){if(i)throw new v;P.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&P.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(o)throw new v;P.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&P.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}P.SYMBOL_WIDEST=[7,5,4,3,1],P.EVEN_TOTAL_SUBSET=[4,20,52,104,204],P.GSUM=[0,348,1388,2948,3988],P.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],P.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],P.FINDER_PAT_A=0,P.FINDER_PAT_B=1,P.FINDER_PAT_C=2,P.FINDER_PAT_D=3,P.FINDER_PAT_E=4,P.FINDER_PAT_F=5,P.FINDER_PATTERN_SEQUENCES=[[P.FINDER_PAT_A,P.FINDER_PAT_A],[P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B],[P.FINDER_PAT_A,P.FINDER_PAT_C,P.FINDER_PAT_B,P.FINDER_PAT_D],[P.FINDER_PAT_A,P.FINDER_PAT_E,P.FINDER_PAT_B,P.FINDER_PAT_D,P.FINDER_PAT_C],[P.FINDER_PAT_A,P.FINDER_PAT_E,P.FINDER_PAT_B,P.FINDER_PAT_D,P.FINDER_PAT_D,P.FINDER_PAT_F],[P.FINDER_PAT_A,P.FINDER_PAT_E,P.FINDER_PAT_B,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_F,P.FINDER_PAT_F],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_D],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_E],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_F,P.FINDER_PAT_F],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_E,P.FINDER_PAT_F,P.FINDER_PAT_F]],P.MAX_PAIRS=11;class ds extends tn{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ve extends Je{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);ve.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);ve.addOrTally(this.possibleRightPairs,i),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1){for(let o of this.possibleRightPairs)if(o.getCount()>1&&ve.checkChecksum(s,o))return ve.constructResult(s,o)}throw new v}static addOrTally(e,t){if(t==null)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new pe;for(let u=13-r.length;u>0;u--)i.append("0");i.append(r);let s=0;for(let u=0;u<13;u++){let h=i.charAt(u).charCodeAt(0)-48;s+=(u&1)===0?3*h:h}s=10-s%10,s===10&&(s=0),i.append(s.toString());let o=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new nt(i.toString(),null,0,[o[0],o[1],a[0],a[1]],$.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,i),o=r==null?null:r.get(ue.NEED_RESULT_POINT_CALLBACK);if(o!=null){let h=(i[0]+i[1])/2;t&&(h=e.getSize()-1-h),o.foundPossibleResultPoint(new j(h,n))}let a=this.decodeDataCharacter(e,s,!0),u=this.decodeDataCharacter(e,s,!1);return new ds(1597*a.getValue()+u.getValue(),a.getChecksumPortion()+4*u.getChecksumPortion(),s)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let N=0;N<r.length;N++)r[N]=0;if(n)Ue.recordPatternInReverse(e,t.getStartEnd()[0],r);else{Ue.recordPattern(e,t.getStartEnd()[1]+1,r);for(let N=0,M=r.length-1;N<M;N++,M--){let F=r[N];r[N]=r[M],r[M]=F}}let i=n?16:15,s=xe.sum(new Int32Array(r))/i,o=this.getOddCounts(),a=this.getEvenCounts(),u=this.getOddRoundingErrors(),h=this.getEvenRoundingErrors();for(let N=0;N<r.length;N++){let M=r[N]/s,F=Math.floor(M+.5);F<1?F=1:F>8&&(F=8);let k=Math.floor(N/2);(N&1)===0?(o[k]=F,u[k]=M-F):(a[k]=F,h[k]=M-F)}this.adjustOddEvenCounts(n,i);let w=0,E=0;for(let N=o.length-1;N>=0;N--)E*=9,E+=o[N],w+=o[N];let b=0,I=0;for(let N=a.length-1;N>=0;N--)b*=9,b+=a[N],I+=a[N];let y=E+3*b;if(n){if((w&1)!==0||w>12||w<4)throw new v;let N=(12-w)/2,M=ve.OUTSIDE_ODD_WIDEST[N],F=9-M,k=St.getRSSvalue(o,M,!1),L=St.getRSSvalue(a,F,!0),fe=ve.OUTSIDE_EVEN_TOTAL_SUBSET[N],se=ve.OUTSIDE_GSUM[N];return new tn(k*fe+L+se,y)}else{if((I&1)!==0||I>10||I<4)throw new v;let N=(10-I)/2,M=ve.INSIDE_ODD_WIDEST[N],F=9-M,k=St.getRSSvalue(o,M,!0),L=St.getRSSvalue(a,F,!1),fe=ve.INSIDE_ODD_TOTAL_SUBSET[N],se=ve.INSIDE_GSUM[N];return new tn(L*fe+k+se,y)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,s=0;for(;s<r&&(i=!e.get(s),t!==i);)s++;let o=0,a=s;for(let u=s;u<r;u++)if(e.get(u)!==i)n[o]++;else{if(o===3){if(Je.isFinderPattern(n))return[a,u];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,o--}else o++;n[o]=1,i=!i}throw new v}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),s=r[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;const o=r[0]-s,a=this.getDecodeFinderCounters(),u=new Int32Array(a.length);G.arraycopy(a,0,u,1,a.length-1),u[0]=o;const h=this.parseFinderValue(u,ve.FINDER_PATTERNS);let w=s,E=r[1];return n&&(w=e.getSize()-1-w,E=e.getSize()-1-E),new Ln(h,[s,r[1]],w,E,t)}adjustOddEvenCounts(e,t){let n=xe.sum(new Int32Array(this.getOddCounts())),r=xe.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,o=!1,a=!1;e?(n>12?s=!0:n<4&&(i=!0),r>12?a=!0:r<4&&(o=!0)):(n>11?s=!0:n<5&&(i=!0),r>10?a=!0:r<4&&(o=!0));let u=n+r-t,h=(n&1)===(e?1:0),w=(r&1)===1;if(u===1)if(h){if(w)throw new v;s=!0}else{if(!w)throw new v;a=!0}else if(u===-1)if(h){if(w)throw new v;i=!0}else{if(!w)throw new v;o=!0}else if(u===0){if(h){if(!w)throw new v;n<r?(i=!0,a=!0):(s=!0,o=!0)}else if(w)throw new v}else throw new v;if(i){if(s)throw new v;Je.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Je.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new v;Je.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Je.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ve.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ve.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ve.OUTSIDE_GSUM=[0,161,961,2015,2715],ve.INSIDE_GSUM=[0,336,1036,1516],ve.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ve.INSIDE_ODD_WIDEST=[2,4,6,8],ve.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class sn extends Ue{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const n=e?e.get(ue.POSSIBLE_FORMATS):null,r=e&&e.get(ue.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes($.EAN_13)||n.includes($.UPC_A)||n.includes($.EAN_8)||n.includes($.UPC_E))&&this.readers.push(new ur(e)),n.includes($.CODE_39)&&this.readers.push(new Ve(r)),n.includes($.CODE_128)&&this.readers.push(new H),n.includes($.ITF)&&this.readers.push(new Ie),n.includes($.RSS_14)&&this.readers.push(new ve),n.includes($.RSS_EXPANDED)&&this.readers.push(new P(this.verbose))):(this.readers.push(new ur(e)),this.readers.push(new Ve),this.readers.push(new ur(e)),this.readers.push(new H),this.readers.push(new Ie),this.readers.push(new ve),this.readers.push(new P(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new v}reset(){this.readers.forEach(e=>e.reset())}}class xs extends Wt{constructor(e=500,t){super(new sn(t),e,t)}}class me{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ee{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class he{constructor(e,t,n,r,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=s;let o=0;const a=s.getECCodewords(),u=s.getECBlocks();for(let h of u)o+=h.getCount()*(h.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if((e&1)!==0||(t&1)!==0)throw new U;for(let n of he.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new he(1,10,10,8,8,new me(5,new Ee(1,3))),new he(2,12,12,10,10,new me(7,new Ee(1,5))),new he(3,14,14,12,12,new me(10,new Ee(1,8))),new he(4,16,16,14,14,new me(12,new Ee(1,12))),new he(5,18,18,16,16,new me(14,new Ee(1,18))),new he(6,20,20,18,18,new me(18,new Ee(1,22))),new he(7,22,22,20,20,new me(20,new Ee(1,30))),new he(8,24,24,22,22,new me(24,new Ee(1,36))),new he(9,26,26,24,24,new me(28,new Ee(1,44))),new he(10,32,32,14,14,new me(36,new Ee(1,62))),new he(11,36,36,16,16,new me(42,new Ee(1,86))),new he(12,40,40,18,18,new me(48,new Ee(1,114))),new he(13,44,44,20,20,new me(56,new Ee(1,144))),new he(14,48,48,22,22,new me(68,new Ee(1,174))),new he(15,52,52,24,24,new me(42,new Ee(2,102))),new he(16,64,64,14,14,new me(56,new Ee(2,140))),new he(17,72,72,16,16,new me(36,new Ee(4,92))),new he(18,80,80,18,18,new me(48,new Ee(4,114))),new he(19,88,88,20,20,new me(56,new Ee(4,144))),new he(20,96,96,22,22,new me(68,new Ee(4,174))),new he(21,104,104,24,24,new me(56,new Ee(6,136))),new he(22,120,120,18,18,new me(68,new Ee(6,175))),new he(23,132,132,20,20,new me(62,new Ee(8,163))),new he(24,144,144,22,22,new me(62,new Ee(8,156),new Ee(2,155))),new he(25,8,18,6,16,new me(7,new Ee(1,5))),new he(26,8,32,6,14,new me(11,new Ee(1,10))),new he(27,12,26,10,24,new me(14,new Ee(1,16))),new he(28,12,36,10,16,new me(18,new Ee(1,22))),new he(29,16,36,14,16,new me(24,new Ee(1,32))),new he(30,16,48,14,22,new me(28,new Ee(1,49)))]}}he.VERSIONS=he.buildVersions();class xr{constructor(e){const t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new U;this.version=xr.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new We(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return he.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let o=!1,a=!1,u=!1,h=!1;do if(n===i&&r===0&&!o)e[t++]=this.readCorner1(i,s)&255,n-=2,r+=2,o=!0;else if(n===i-2&&r===0&&(s&3)!==0&&!a)e[t++]=this.readCorner2(i,s)&255,n-=2,r+=2,a=!0;else if(n===i+4&&r===2&&(s&7)===0&&!u)e[t++]=this.readCorner3(i,s)&255,n-=2,r+=2,u=!0;else if(n===i-2&&r===0&&(s&7)===4&&!h)e[t++]=this.readCorner4(i,s)&255,n-=2,r+=2,h=!0;else{do n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,s)&255),n-=2,r+=2;while(n>=0&&r<s);n+=1,r+=3;do n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,s)&255),n+=2,r-=2;while(n<i&&r>=0);n+=3,r+=1}while(n<i||r<s);if(t!==this.version.getTotalCodewords())throw new U;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new R("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/r|0,o=n/i|0,a=s*r,u=o*i,h=new We(u,a);for(let w=0;w<s;++w){const E=w*r;for(let b=0;b<o;++b){const I=b*i;for(let y=0;y<r;++y){const N=w*(r+2)+1+y,M=E+y;for(let F=0;F<i;++F){const k=b*(i+2)+1+F;if(e.get(k,N)){const L=I+F;h.set(L,M)}}}}}return h}}class gr{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let y of i)r+=y.getCount();const s=new Array(r);let o=0;for(let y of i)for(let N=0;N<y.getCount();N++){const M=y.getDataCodewords(),F=n.getECCodewords()+M;s[o++]=new gr(M,new Uint8Array(F))}const u=s[0].codewords.length-n.getECCodewords(),h=u-1;let w=0;for(let y=0;y<h;y++)for(let N=0;N<o;N++)s[N].codewords[y]=e[w++];const E=t.getVersionNumber()===24,b=E?8:o;for(let y=0;y<b;y++)s[y].codewords[u-1]=e[w++];const I=s[0].codewords.length;for(let y=u;y<I;y++)for(let N=0;N<o;N++){const M=E?(N+8)%o:N,F=E&&M>7?y-1:y;s[M].codewords[F]=e[w++]}if(w!==e.length)throw new R;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class wr{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new R(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const s=8-n,o=e<s?e:s,a=s-o,u=255>>8-o<<a;t=(i[r]&u)>>a,e-=o,n+=o,n===8&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|i[r]&255,r++,e-=8;if(e>0){const s=8-e,o=255>>s<<s;t=t<<e|(i[r]&o)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var He;(function(g){g[g.PAD_ENCODE=0]="PAD_ENCODE",g[g.ASCII_ENCODE=1]="ASCII_ENCODE",g[g.C40_ENCODE=2]="C40_ENCODE",g[g.TEXT_ENCODE=3]="TEXT_ENCODE",g[g.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",g[g.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",g[g.BASE256_ENCODE=6]="BASE256_ENCODE"})(He||(He={}));class kt{static decode(e){const t=new wr(e),n=new pe,r=new pe,i=new Array;let s=He.ASCII_ENCODE;do if(s===He.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case He.C40_ENCODE:this.decodeC40Segment(t,n);break;case He.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case He.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case He.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case He.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new U}s=He.ASCII_ENCODE}while(s!==He.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new gn(e,n.toString(),i.length===0?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(i===0)throw new U;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),He.ASCII_ENCODE;if(i===129)return He.PAD_ENCODE;if(i<=229){const s=i-130;s<10&&t.append("0"),t.append(""+s)}else switch(i){case 230:return He.C40_ENCODE;case 231:return He.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return He.ANSIX12_ENCODE;case 239:return He.TEXT_ENCODE;case 240:return He.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new U;break}}while(e.available()>0);return He.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),r);for(let o=0;o<3;o++){const a=r[o];switch(i){case 0:if(a<3)i=a+1;else if(a<this.C40_BASIC_SET_CHARS.length){const u=this.C40_BASIC_SET_CHARS[a];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new U;break;case 1:n?(t.append(String.fromCharCode(a+128)),n=!1):t.append(String.fromCharCode(a)),i=0;break;case 2:if(a<this.C40_SHIFT2_SET_CHARS.length){const u=this.C40_SHIFT2_SET_CHARS[a];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(a){case 27:t.append("");break;case 30:n=!0;break;default:throw new U}i=0;break;case 3:n?(t.append(String.fromCharCode(a+224)),n=!1):t.append(String.fromCharCode(a+96)),i=0;break;default:throw new U}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),r);for(let o=0;o<3;o++){const a=r[o];switch(i){case 0:if(a<3)i=a+1;else if(a<this.TEXT_BASIC_SET_CHARS.length){const u=this.TEXT_BASIC_SET_CHARS[a];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new U;break;case 1:n?(t.append(String.fromCharCode(a+128)),n=!1):t.append(String.fromCharCode(a)),i=0;break;case 2:if(a<this.TEXT_SHIFT2_SET_CHARS.length){const u=this.TEXT_SHIFT2_SET_CHARS[a];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(a){case 27:t.append("");break;case 30:n=!0;break;default:throw new U}i=0;break;case 3:if(a<this.TEXT_SHIFT3_SET_CHARS.length){const u=this.TEXT_SHIFT3_SET_CHARS[a];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u),i=0}else throw new U;break;default:throw new U}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(e.available()===8)return;const r=e.readBits(8);if(r===254)return;this.parseTwoBytes(r,e.readBits(8),n);for(let i=0;i<3;i++){const s=n[i];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new U;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=i*1600,i=Math.floor(r/40),n[1]=i,n[2]=r-i*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(r===31){const i=8-e.getBitOffset();i!==8&&e.readBits(i);return}(r&32)===0&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let s;if(i===0?s=e.available()/8|0:i<250?s=i:s=250*(i-249)+this.unrandomize255State(e.readBits(8),r++),s<0)throw new U;const o=new Uint8Array(s);for(let a=0;a<s;a++){if(e.available()<8)throw new U;o[a]=this.unrandomize255State(e.readBits(8),r++)}n.push(o);try{t.append(st.decode(o,re.ISO88591))}catch(a){throw new yt("Platform does not support required encoding: "+a.message)}}static unrandomize255State(e,t){const n=149*t%255+1,r=e-n;return r>=0?r:r+256}}kt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],kt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],kt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],kt.TEXT_SHIFT2_SET_CHARS=kt.C40_SHIFT2_SET_CHARS,kt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class gs{constructor(){this.rsDecoder=new An(we.DATA_MATRIX_FIELD_256)}decode(e){const t=new xr(e),n=t.getVersion(),r=t.readCodewords(),i=gr.getDataBlocks(r,n);let s=0;for(let u of i)s+=u.getNumDataCodewords();const o=new Uint8Array(s),a=i.length;for(let u=0;u<a;u++){const h=i[u],w=h.getCodewords(),E=h.getNumDataCodewords();this.correctErrors(w,E);for(let b=0;b<E;b++)o[b*a+u]=w[b]}return kt.decode(o)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new q}for(let r=0;r<t;r++)e[r]=n[r]}}class Fe{constructor(e){this.image=e,this.rectangleDetector=new Mt(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new v;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],s=t[3];let o=this.transitionsBetween(n,s)+1,a=this.transitionsBetween(i,s)+1;(o&1)===1&&(o+=1),(a&1)===1&&(a+=1),4*o<7*a&&4*a<7*o&&(o=a=Math.max(o,a));let u=Fe.sampleGrid(this.image,n,r,i,s,o,a);return new vn(u,[n,r,i,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new j(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new j(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],s=this.transitionsBetween(t,n),o=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),u=this.transitionsBetween(i,t),h=s,w=[i,t,n,r];return h>o&&(h=o,w[0]=t,w[1]=n,w[2]=r,w[3]=i),h>a&&(h=a,w[0]=n,w[1]=r,w[2]=i,w[3]=t),h>u&&(w[0]=r,w[1]=i,w[2]=t,w[3]=n),w}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),o=Fe.shiftPoint(n,r,(s+1)*4),a=Fe.shiftPoint(r,n,(s+1)*4),u=this.transitionsBetween(o,t),h=this.transitionsBetween(a,i);return u<h?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),o=this.transitionsBetween(n,i),a=Fe.shiftPoint(t,n,(o+1)*4),u=Fe.shiftPoint(r,n,(s+1)*4);s=this.transitionsBetween(a,i),o=this.transitionsBetween(u,i);let h=new j(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1)),w=new j(i.getX()+(t.getX()-n.getX())/(o+1),i.getY()+(t.getY()-n.getY())/(o+1));if(!this.isValid(h))return this.isValid(w)?w:null;if(!this.isValid(w))return h;let E=this.transitionsBetween(a,h)+this.transitionsBetween(u,h),b=this.transitionsBetween(a,w)+this.transitionsBetween(u,w);return E>b?h:w}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i)+1,o=this.transitionsBetween(r,i)+1,a=Fe.shiftPoint(t,n,o*4),u=Fe.shiftPoint(r,n,s*4);s=this.transitionsBetween(a,i)+1,o=this.transitionsBetween(u,i)+1,(s&1)===1&&(s+=1),(o&1)===1&&(o+=1);let h=(t.getX()+n.getX()+r.getX()+i.getX())/4,w=(t.getY()+n.getY()+r.getY()+i.getY())/4;t=Fe.moveAway(t,h,w),n=Fe.moveAway(n,h,w),r=Fe.moveAway(r,h,w),i=Fe.moveAway(i,h,w);let E,b;return a=Fe.shiftPoint(t,n,o*4),a=Fe.shiftPoint(a,i,s*4),E=Fe.shiftPoint(n,t,o*4),E=Fe.shiftPoint(E,r,s*4),u=Fe.shiftPoint(r,i,o*4),u=Fe.shiftPoint(u,n,s*4),b=Fe.shiftPoint(i,r,o*4),b=Fe.shiftPoint(b,t,s*4),[a,E,u,b]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,s,o){return Lt.getInstance().sampleGrid(e,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),o=Math.abs(s-r)>Math.abs(i-n);if(o){let y=n;n=r,r=y,y=i,i=s,s=y}let a=Math.abs(i-n),u=Math.abs(s-r),h=-a/2,w=r<s?1:-1,E=n<i?1:-1,b=0,I=this.image.get(o?r:n,o?n:r);for(let y=n,N=r;y!==i;y+=E){let M=this.image.get(o?N:y,o?y:N);if(M!==I&&(b++,I=M),h+=u,h>0){if(N===s)break;N+=w,h-=a}}return b}}class Ut{constructor(){this.decoder=new gs}decode(e,t=null){let n,r;if(t!=null&&t.has(ue.PURE_BARCODE)){const u=Ut.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(u),r=Ut.NO_POINTS}else{const u=new Fe(e.getBlackMatrix()).detect();n=this.decoder.decode(u.getBits()),r=u.getPoints()}const i=n.getRawBytes(),s=new nt(n.getText(),i,8*i.length,r,$.DATA_MATRIX,G.currentTimeMillis()),o=n.getByteSegments();o!=null&&s.putMetadata(ze.BYTE_SEGMENTS,o);const a=n.getECLevel();return a!=null&&s.putMetadata(ze.ERROR_CORRECTION_LEVEL,a),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new v;const r=this.moduleSize(t,e);let i=t[1];const s=n[1];let o=t[0];const u=(n[0]-o+1)/r,h=(s-i+1)/r;if(u<=0||h<=0)throw new v;const w=r/2;i+=w,o+=w;const E=new We(u,h);for(let b=0;b<h;b++){const I=i+b*r;for(let y=0;y<u;y++)e.get(o+y*r,I)&&E.set(y,b)}return E}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new v;const s=r-e[0];if(s===0)throw new v;return s}}Ut.NO_POINTS=[];class ws extends Wt{constructor(e=500){super(new Ut,e)}}var on;(function(g){g[g.L=0]="L",g[g.M=1]="M",g[g.Q=2]="Q",g[g.H=3]="H"})(on||(on={}));class Ne{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,Ne.FOR_BITS.set(n,this),Ne.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ne.L;case"M":return Ne.M;case"Q":return Ne.Q;case"H":return Ne.H;default:throw new T(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ne))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Ne.FOR_BITS.size)throw new R;return Ne.FOR_BITS.get(e)}}Ne.FOR_BITS=new Map,Ne.FOR_VALUE=new Map,Ne.L=new Ne(on.L,"L",1),Ne.M=new Ne(on.M,"M",0),Ne.Q=new Ne(on.Q,"Q",3),Ne.H=new Ne(on.H,"H",2);class $e{constructor(e){this.errorCorrectionLevel=Ne.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return X.bitCount(e^t)}static decodeFormatInformation(e,t){const n=$e.doDecodeFormatInformation(e,t);return n!==null?n:$e.doDecodeFormatInformation(e^$e.FORMAT_INFO_MASK_QR,t^$e.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of $e.FORMAT_INFO_DECODE_LOOKUP){const s=i[0];if(s===e||s===t)return new $e(i[1]);let o=$e.numBitsDiffering(e,s);o<n&&(r=i[1],n=o),e!==t&&(o=$e.numBitsDiffering(t,s),o<n&&(r=i[1],n=o))}return n<=3?new $e(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof $e))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}$e.FORMAT_INFO_MASK_QR=21522,$e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class O{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class m{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class K{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0;const i=n[0].getECCodewordsPerBlock(),s=n[0].getECBlocks();for(const o of s)r+=o.getCount()*(o.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new U;try{return this.getVersionForNumber((e-17)/4)}catch{throw new U}}static getVersionForNumber(e){if(e<1||e>40)throw new R;return K.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<K.VERSION_DECODE_INFO.length;r++){const i=K.VERSION_DECODE_INFO[r];if(i===e)return K.getVersionForNumber(r+7);const s=$e.numBitsDiffering(e,i);s<t&&(n=r+7,t=s)}return t<=3?K.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new We(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const i=this.alignmentPatternCenters[r]-2;for(let s=0;s<n;s++)r===0&&(s===0||s===n-1)||r===n-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,i,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}K.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),K.VERSIONS=[new K(1,new Int32Array(0),new O(7,new m(1,19)),new O(10,new m(1,16)),new O(13,new m(1,13)),new O(17,new m(1,9))),new K(2,Int32Array.from([6,18]),new O(10,new m(1,34)),new O(16,new m(1,28)),new O(22,new m(1,22)),new O(28,new m(1,16))),new K(3,Int32Array.from([6,22]),new O(15,new m(1,55)),new O(26,new m(1,44)),new O(18,new m(2,17)),new O(22,new m(2,13))),new K(4,Int32Array.from([6,26]),new O(20,new m(1,80)),new O(18,new m(2,32)),new O(26,new m(2,24)),new O(16,new m(4,9))),new K(5,Int32Array.from([6,30]),new O(26,new m(1,108)),new O(24,new m(2,43)),new O(18,new m(2,15),new m(2,16)),new O(22,new m(2,11),new m(2,12))),new K(6,Int32Array.from([6,34]),new O(18,new m(2,68)),new O(16,new m(4,27)),new O(24,new m(4,19)),new O(28,new m(4,15))),new K(7,Int32Array.from([6,22,38]),new O(20,new m(2,78)),new O(18,new m(4,31)),new O(18,new m(2,14),new m(4,15)),new O(26,new m(4,13),new m(1,14))),new K(8,Int32Array.from([6,24,42]),new O(24,new m(2,97)),new O(22,new m(2,38),new m(2,39)),new O(22,new m(4,18),new m(2,19)),new O(26,new m(4,14),new m(2,15))),new K(9,Int32Array.from([6,26,46]),new O(30,new m(2,116)),new O(22,new m(3,36),new m(2,37)),new O(20,new m(4,16),new m(4,17)),new O(24,new m(4,12),new m(4,13))),new K(10,Int32Array.from([6,28,50]),new O(18,new m(2,68),new m(2,69)),new O(26,new m(4,43),new m(1,44)),new O(24,new m(6,19),new m(2,20)),new O(28,new m(6,15),new m(2,16))),new K(11,Int32Array.from([6,30,54]),new O(20,new m(4,81)),new O(30,new m(1,50),new m(4,51)),new O(28,new m(4,22),new m(4,23)),new O(24,new m(3,12),new m(8,13))),new K(12,Int32Array.from([6,32,58]),new O(24,new m(2,92),new m(2,93)),new O(22,new m(6,36),new m(2,37)),new O(26,new m(4,20),new m(6,21)),new O(28,new m(7,14),new m(4,15))),new K(13,Int32Array.from([6,34,62]),new O(26,new m(4,107)),new O(22,new m(8,37),new m(1,38)),new O(24,new m(8,20),new m(4,21)),new O(22,new m(12,11),new m(4,12))),new K(14,Int32Array.from([6,26,46,66]),new O(30,new m(3,115),new m(1,116)),new O(24,new m(4,40),new m(5,41)),new O(20,new m(11,16),new m(5,17)),new O(24,new m(11,12),new m(5,13))),new K(15,Int32Array.from([6,26,48,70]),new O(22,new m(5,87),new m(1,88)),new O(24,new m(5,41),new m(5,42)),new O(30,new m(5,24),new m(7,25)),new O(24,new m(11,12),new m(7,13))),new K(16,Int32Array.from([6,26,50,74]),new O(24,new m(5,98),new m(1,99)),new O(28,new m(7,45),new m(3,46)),new O(24,new m(15,19),new m(2,20)),new O(30,new m(3,15),new m(13,16))),new K(17,Int32Array.from([6,30,54,78]),new O(28,new m(1,107),new m(5,108)),new O(28,new m(10,46),new m(1,47)),new O(28,new m(1,22),new m(15,23)),new O(28,new m(2,14),new m(17,15))),new K(18,Int32Array.from([6,30,56,82]),new O(30,new m(5,120),new m(1,121)),new O(26,new m(9,43),new m(4,44)),new O(28,new m(17,22),new m(1,23)),new O(28,new m(2,14),new m(19,15))),new K(19,Int32Array.from([6,30,58,86]),new O(28,new m(3,113),new m(4,114)),new O(26,new m(3,44),new m(11,45)),new O(26,new m(17,21),new m(4,22)),new O(26,new m(9,13),new m(16,14))),new K(20,Int32Array.from([6,34,62,90]),new O(28,new m(3,107),new m(5,108)),new O(26,new m(3,41),new m(13,42)),new O(30,new m(15,24),new m(5,25)),new O(28,new m(15,15),new m(10,16))),new K(21,Int32Array.from([6,28,50,72,94]),new O(28,new m(4,116),new m(4,117)),new O(26,new m(17,42)),new O(28,new m(17,22),new m(6,23)),new O(30,new m(19,16),new m(6,17))),new K(22,Int32Array.from([6,26,50,74,98]),new O(28,new m(2,111),new m(7,112)),new O(28,new m(17,46)),new O(30,new m(7,24),new m(16,25)),new O(24,new m(34,13))),new K(23,Int32Array.from([6,30,54,78,102]),new O(30,new m(4,121),new m(5,122)),new O(28,new m(4,47),new m(14,48)),new O(30,new m(11,24),new m(14,25)),new O(30,new m(16,15),new m(14,16))),new K(24,Int32Array.from([6,28,54,80,106]),new O(30,new m(6,117),new m(4,118)),new O(28,new m(6,45),new m(14,46)),new O(30,new m(11,24),new m(16,25)),new O(30,new m(30,16),new m(2,17))),new K(25,Int32Array.from([6,32,58,84,110]),new O(26,new m(8,106),new m(4,107)),new O(28,new m(8,47),new m(13,48)),new O(30,new m(7,24),new m(22,25)),new O(30,new m(22,15),new m(13,16))),new K(26,Int32Array.from([6,30,58,86,114]),new O(28,new m(10,114),new m(2,115)),new O(28,new m(19,46),new m(4,47)),new O(28,new m(28,22),new m(6,23)),new O(30,new m(33,16),new m(4,17))),new K(27,Int32Array.from([6,34,62,90,118]),new O(30,new m(8,122),new m(4,123)),new O(28,new m(22,45),new m(3,46)),new O(30,new m(8,23),new m(26,24)),new O(30,new m(12,15),new m(28,16))),new K(28,Int32Array.from([6,26,50,74,98,122]),new O(30,new m(3,117),new m(10,118)),new O(28,new m(3,45),new m(23,46)),new O(30,new m(4,24),new m(31,25)),new O(30,new m(11,15),new m(31,16))),new K(29,Int32Array.from([6,30,54,78,102,126]),new O(30,new m(7,116),new m(7,117)),new O(28,new m(21,45),new m(7,46)),new O(30,new m(1,23),new m(37,24)),new O(30,new m(19,15),new m(26,16))),new K(30,Int32Array.from([6,26,52,78,104,130]),new O(30,new m(5,115),new m(10,116)),new O(28,new m(19,47),new m(10,48)),new O(30,new m(15,24),new m(25,25)),new O(30,new m(23,15),new m(25,16))),new K(31,Int32Array.from([6,30,56,82,108,134]),new O(30,new m(13,115),new m(3,116)),new O(28,new m(2,46),new m(29,47)),new O(30,new m(42,24),new m(1,25)),new O(30,new m(23,15),new m(28,16))),new K(32,Int32Array.from([6,34,60,86,112,138]),new O(30,new m(17,115)),new O(28,new m(10,46),new m(23,47)),new O(30,new m(10,24),new m(35,25)),new O(30,new m(19,15),new m(35,16))),new K(33,Int32Array.from([6,30,58,86,114,142]),new O(30,new m(17,115),new m(1,116)),new O(28,new m(14,46),new m(21,47)),new O(30,new m(29,24),new m(19,25)),new O(30,new m(11,15),new m(46,16))),new K(34,Int32Array.from([6,34,62,90,118,146]),new O(30,new m(13,115),new m(6,116)),new O(28,new m(14,46),new m(23,47)),new O(30,new m(44,24),new m(7,25)),new O(30,new m(59,16),new m(1,17))),new K(35,Int32Array.from([6,30,54,78,102,126,150]),new O(30,new m(12,121),new m(7,122)),new O(28,new m(12,47),new m(26,48)),new O(30,new m(39,24),new m(14,25)),new O(30,new m(22,15),new m(41,16))),new K(36,Int32Array.from([6,24,50,76,102,128,154]),new O(30,new m(6,121),new m(14,122)),new O(28,new m(6,47),new m(34,48)),new O(30,new m(46,24),new m(10,25)),new O(30,new m(2,15),new m(64,16))),new K(37,Int32Array.from([6,28,54,80,106,132,158]),new O(30,new m(17,122),new m(4,123)),new O(28,new m(29,46),new m(14,47)),new O(30,new m(49,24),new m(10,25)),new O(30,new m(24,15),new m(46,16))),new K(38,Int32Array.from([6,32,58,84,110,136,162]),new O(30,new m(4,122),new m(18,123)),new O(28,new m(13,46),new m(32,47)),new O(30,new m(48,24),new m(14,25)),new O(30,new m(42,15),new m(32,16))),new K(39,Int32Array.from([6,26,54,82,110,138,166]),new O(30,new m(20,117),new m(4,118)),new O(28,new m(40,47),new m(7,48)),new O(30,new m(43,24),new m(22,25)),new O(30,new m(10,15),new m(67,16))),new K(40,Int32Array.from([6,30,58,86,114,142,170]),new O(30,new m(19,118),new m(6,119)),new O(28,new m(18,47),new m(31,48)),new O(30,new m(34,24),new m(34,25)),new O(30,new m(20,15),new m(61,16)))];var Ye;(function(g){g[g.DATA_MASK_000=0]="DATA_MASK_000",g[g.DATA_MASK_001=1]="DATA_MASK_001",g[g.DATA_MASK_010=2]="DATA_MASK_010",g[g.DATA_MASK_011=3]="DATA_MASK_011",g[g.DATA_MASK_100=4]="DATA_MASK_100",g[g.DATA_MASK_101=5]="DATA_MASK_101",g[g.DATA_MASK_110=6]="DATA_MASK_110",g[g.DATA_MASK_111=7]="DATA_MASK_111"})(Ye||(Ye={}));class At{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}At.values=new Map([[Ye.DATA_MASK_000,new At(Ye.DATA_MASK_000,(g,e)=>(g+e&1)===0)],[Ye.DATA_MASK_001,new At(Ye.DATA_MASK_001,(g,e)=>(g&1)===0)],[Ye.DATA_MASK_010,new At(Ye.DATA_MASK_010,(g,e)=>e%3===0)],[Ye.DATA_MASK_011,new At(Ye.DATA_MASK_011,(g,e)=>(g+e)%3===0)],[Ye.DATA_MASK_100,new At(Ye.DATA_MASK_100,(g,e)=>(Math.floor(g/2)+Math.floor(e/3)&1)===0)],[Ye.DATA_MASK_101,new At(Ye.DATA_MASK_101,(g,e)=>g*e%6===0)],[Ye.DATA_MASK_110,new At(Ye.DATA_MASK_110,(g,e)=>g*e%6<3)],[Ye.DATA_MASK_111,new At(Ye.DATA_MASK_111,(g,e)=>(g+e+g*e%3&1)===0)]]);class As{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new U;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=$e.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return K.getVersionForNumber(t);let n=0;const r=e-11;for(let s=5;s>=0;s--)for(let o=e-9;o>=r;o--)n=this.copyBit(o,s,n);let i=K.decodeVersionInformation(n);if(i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let s=5;s>=0;s--)for(let o=e-9;o>=r;o--)n=this.copyBit(s,o,n);if(i=K.decodeVersionInformation(n),i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new U}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=At.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let s=!0;const o=new Uint8Array(t.getTotalCodewords());let a=0,u=0,h=0;for(let w=r-1;w>0;w-=2){w===6&&w--;for(let E=0;E<r;E++){const b=s?r-1-E:E;for(let I=0;I<2;I++)i.get(w-I,b)||(h++,u<<=1,this.bitMatrix.get(w-I,b)&&(u|=1),h===8&&(o[a++]=u,h=0,u=0))}s=!s}if(a!==t.getTotalCodewords())throw new U;return o}remask(){if(this.parsedFormatInfo===null)return;const e=At.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Ar{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new R;const r=t.getECBlocksForLevel(n);let i=0;const s=r.getECBlocks();for(const I of s)i+=I.getCount();const o=new Array(i);let a=0;for(const I of s)for(let y=0;y<I.getCount();y++){const N=I.getDataCodewords(),M=r.getECCodewordsPerBlock()+N;o[a++]=new Ar(N,new Uint8Array(M))}const u=o[0].codewords.length;let h=o.length-1;for(;h>=0&&o[h].codewords.length!==u;)h--;h++;const w=u-r.getECCodewordsPerBlock();let E=0;for(let I=0;I<w;I++)for(let y=0;y<a;y++)o[y].codewords[I]=e[E++];for(let I=h;I<a;I++)o[I].codewords[w]=e[E++];const b=o[0].codewords.length;for(let I=w;I<b;I++)for(let y=0;y<a;y++){const N=y<h?I:I+1;o[y].codewords[N]=e[E++]}return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Et;(function(g){g[g.TERMINATOR=0]="TERMINATOR",g[g.NUMERIC=1]="NUMERIC",g[g.ALPHANUMERIC=2]="ALPHANUMERIC",g[g.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",g[g.BYTE=4]="BYTE",g[g.ECI=5]="ECI",g[g.KANJI=6]="KANJI",g[g.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",g[g.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",g[g.HANZI=9]="HANZI"})(Et||(Et={}));class J{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,J.FOR_BITS.set(r,this),J.FOR_VALUE.set(e,this)}static forBits(e){const t=J.FOR_BITS.get(e);if(t===void 0)throw new R;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof J))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}J.FOR_BITS=new Map,J.FOR_VALUE=new Map,J.TERMINATOR=new J(Et.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),J.NUMERIC=new J(Et.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),J.ALPHANUMERIC=new J(Et.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),J.STRUCTURED_APPEND=new J(Et.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),J.BYTE=new J(Et.BYTE,"BYTE",Int32Array.from([8,16,16]),4),J.ECI=new J(Et.ECI,"ECI",Int32Array.from([0,0,0]),7),J.KANJI=new J(Et.KANJI,"KANJI",Int32Array.from([8,10,12]),8),J.FNC1_FIRST_POSITION=new J(Et.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),J.FNC1_SECOND_POSITION=new J(Et.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),J.HANZI=new J(Et.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Me{static decode(e,t,n,r){const i=new wr(e);let s=new pe;const o=new Array;let a=-1,u=-1;try{let h=null,w=!1,E;do{if(i.available()<4)E=J.TERMINATOR;else{const b=i.readBits(4);E=J.forBits(b)}switch(E){case J.TERMINATOR:break;case J.FNC1_FIRST_POSITION:case J.FNC1_SECOND_POSITION:w=!0;break;case J.STRUCTURED_APPEND:if(i.available()<16)throw new U;a=i.readBits(8),u=i.readBits(8);break;case J.ECI:const b=Me.parseECIValue(i);if(h=V.getCharacterSetECIByValue(b),h===null)throw new U;break;case J.HANZI:const I=i.readBits(4),y=i.readBits(E.getCharacterCountBits(t));I===Me.GB2312_SUBSET&&Me.decodeHanziSegment(i,s,y);break;default:const N=i.readBits(E.getCharacterCountBits(t));switch(E){case J.NUMERIC:Me.decodeNumericSegment(i,s,N);break;case J.ALPHANUMERIC:Me.decodeAlphanumericSegment(i,s,N,w);break;case J.BYTE:Me.decodeByteSegment(i,s,N,h,o,r);break;case J.KANJI:Me.decodeKanjiSegment(i,s,N);break;default:throw new U}break}}while(E!==J.TERMINATOR)}catch{throw new U}return new gn(e,s.toString(),o.length===0?null:o,n===null?null:n.toString(),a,u)}static decodeHanziSegment(e,t,n){if(n*13>e.available())throw new U;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const s=e.readBits(13);let o=s/96<<8&4294967295|s%96;o<959?o+=41377:o+=42657,r[i]=o>>8&255,r[i+1]=o&255,i+=2,n--}try{t.append(st.decode(r,re.GB2312))}catch(s){throw new U(s)}}static decodeKanjiSegment(e,t,n){if(n*13>e.available())throw new U;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const s=e.readBits(13);let o=s/192<<8&4294967295|s%192;o<7936?o+=33088:o+=49472,r[i]=o>>8,r[i+1]=o,i+=2,n--}try{t.append(st.decode(r,re.SHIFT_JIS))}catch(s){throw new U(s)}}static decodeByteSegment(e,t,n,r,i,s){if(8*n>e.available())throw new U;const o=new Uint8Array(n);for(let u=0;u<n;u++)o[u]=e.readBits(8);let a;r===null?a=re.guessEncoding(o,s):a=r.getName();try{t.append(st.decode(o,a))}catch(u){throw new U(u)}i.push(o)}static toAlphaNumericChar(e){if(e>=Me.ALPHANUMERIC_CHARS.length)throw new U;return Me.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new U;const s=e.readBits(11);t.append(Me.toAlphaNumericChar(Math.floor(s/45))),t.append(Me.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new U;t.append(Me.toAlphaNumericChar(e.readBits(6)))}if(r)for(let s=i;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new U;const r=e.readBits(10);if(r>=1e3)throw new U;t.append(Me.toAlphaNumericChar(Math.floor(r/100))),t.append(Me.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(Me.toAlphaNumericChar(r%10)),n-=3}if(n===2){if(e.available()<7)throw new U;const r=e.readBits(7);if(r>=100)throw new U;t.append(Me.toAlphaNumericChar(Math.floor(r/10))),t.append(Me.toAlphaNumericChar(r%10))}else if(n===1){if(e.available()<4)throw new U;const r=e.readBits(4);if(r>=10)throw new U;t.append(Me.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){const n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){const n=e.readBits(16);return(t&31)<<16&4294967295|n}throw new U}}Me.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Me.GB2312_SUBSET=1;class Qr{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Es{constructor(){this.rsDecoder=new An(we.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(We.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new As(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const i=this.decodeBitMatrixParser(n,t);return i.setOther(new Qr(!0)),i}catch(i){throw r!==null?r:i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=Ar.getDataBlocks(i,n,r);let o=0;for(const h of s)o+=h.getNumDataCodewords();const a=new Uint8Array(o);let u=0;for(const h of s){const w=h.getCodewords(),E=h.getNumDataCodewords();this.correctErrors(w,E);for(let b=0;b<E;b++)a[u++]=w[b]}return Me.decode(a,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new q}for(let r=0;r<t;r++)e[r]=n[r]}}class Er extends j{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new Er(r,i,s)}}class Un{constructor(e,t,n,r,i,s,o){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=this.width,r=e+n,i=this.startY+t/2,s=new Int32Array(3),o=this.image;for(let a=0;a<t;a++){const u=i+((a&1)===0?Math.floor((a+1)/2):-Math.floor((a+1)/2));s[0]=0,s[1]=0,s[2]=0;let h=e;for(;h<r&&!o.get(h,u);)h++;let w=0;for(;h<r;){if(o.get(h,u))if(w===1)s[1]++;else if(w===2){if(this.foundPatternCross(s)){const E=this.handlePossibleCenter(s,u,h);if(E!==null)return E}s[0]=s[2],s[1]=1,s[2]=0,w=1}else s[++w]++;else w===1&&w++,s[w]++;h++}if(this.foundPatternCross(s)){const E=this.handlePossibleCenter(s,u,r);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new v}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;let a=e;for(;a>=0&&i.get(t,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&!i.get(t,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&i.get(t,a)&&o[1]<=n;)o[1]++,a++;if(a===s||o[1]>n)return NaN;for(;a<s&&!i.get(t,a)&&o[2]<=n;)o[2]++,a++;if(o[2]>n)return NaN;const u=o[0]+o[1]+o[2];return 5*Math.abs(u-r)>=2*r?NaN:this.foundPatternCross(o)?Un.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Un.centerFromEnd(e,n),s=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(s)){const o=(e[0]+e[1]+e[2])/3;for(const u of this.possibleCenters)if(u.aboutEquals(o,s,i))return u.combineEstimate(s,i,o);const a=new Er(i,s,o);this.possibleCenters.push(a),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(a)}return null}}class Cr extends j{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,r===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,s=(this.count*this.getY()+e)/r,o=(this.count*this.estimatedModuleSize+n)/r;return new Cr(i,s,o,r)}}class Cs{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ze{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(ue.TRY_HARDER)!==void 0,n=e!=null&&e.get(ue.PURE_BARCODE)!==void 0,r=this.image,i=r.getHeight(),s=r.getWidth();let o=Math.floor(3*i/(4*Ze.MAX_MODULES));(o<Ze.MIN_SKIP||t)&&(o=Ze.MIN_SKIP);let a=!1;const u=new Int32Array(5);for(let w=o-1;w<i&&!a;w+=o){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;let E=0;for(let b=0;b<s;b++)if(r.get(b,w))(E&1)===1&&E++,u[E]++;else if((E&1)===0)if(E===4)if(Ze.foundPatternCross(u)){if(this.handlePossibleCenter(u,w,b,n)===!0)if(o=2,this.hasSkipped===!0)a=this.haveMultiplyConfirmedCenters();else{const y=this.findRowSkip();y>u[2]&&(w+=y-u[2]-o,b=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,E=3;continue}E=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,E=3;else u[++E]++;else u[E]++;Ze.foundPatternCross(u)&&this.handlePossibleCenter(u,w,s,n)===!0&&(o=u[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}const h=this.selectBestPatterns();return j.orderBestPatterns(h),new Cs(h)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const s=e[i];if(s===0)return!1;t+=s}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let s=0;const o=this.image;for(;e>=s&&t>=s&&o.get(t-s,e-s);)i[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!o.get(t-s,e-s)&&i[1]<=n;)i[1]++,s++;if(e<s||t<s||i[1]>n)return!1;for(;e>=s&&t>=s&&o.get(t-s,e-s)&&i[0]<=n;)i[0]++,s++;if(i[0]>n)return!1;const a=o.getHeight(),u=o.getWidth();for(s=1;e+s<a&&t+s<u&&o.get(t+s,e+s);)i[2]++,s++;if(e+s>=a||t+s>=u)return!1;for(;e+s<a&&t+s<u&&!o.get(t+s,e+s)&&i[3]<n;)i[3]++,s++;if(e+s>=a||t+s>=u||i[3]>=n)return!1;for(;e+s<a&&t+s<u&&o.get(t+s,e+s)&&i[4]<n;)i[4]++,s++;if(i[4]>=n)return!1;const h=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(h-r)<2*r&&Ze.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),o=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(t,a);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(t,a)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&i.get(t,a)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&i.get(t,a);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!i.get(t,a)&&o[3]<n;)o[3]++,a++;if(a===s||o[3]>=n)return NaN;for(;a<s&&i.get(t,a)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return NaN;const u=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(u-r)>=2*r?NaN:Ze.foundPatternCross(o)?Ze.centerFromEnd(o,a):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,s=i.getWidth(),o=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(a,t);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(a,t)&&o[1]<=n;)o[1]++,a--;if(a<0||o[1]>n)return NaN;for(;a>=0&&i.get(a,t)&&o[0]<=n;)o[0]++,a--;if(o[0]>n)return NaN;for(a=e+1;a<s&&i.get(a,t);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!i.get(a,t)&&o[3]<n;)o[3]++,a++;if(a===s||o[3]>=n)return NaN;for(;a<s&&i.get(a,t)&&o[4]<n;)o[4]++,a++;if(o[4]>=n)return NaN;const u=o[0]+o[1]+o[2]+o[3]+o[4];return 5*Math.abs(u-r)>=r?NaN:Ze.foundPatternCross(o)?Ze.centerFromEnd(o,a):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let s=Ze.centerFromEnd(e,n),o=this.crossCheckVertical(t,Math.floor(s),e[2],i);if(!isNaN(o)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),e[2],i),!isNaN(s)&&(!r||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),e[2],i)))){const a=i/7;let u=!1;const h=this.possibleCenters;for(let w=0,E=h.length;w<E;w++){const b=h[w];if(b.aboutEquals(a,o,s)){h[w]=b.combineEstimate(o,s,a),u=!0;break}}if(!u){const w=new Cr(s,o,a);h.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const n of this.possibleCenters)if(n.getCount()>=Ze.CENTER_QUORUM)if(t==null)t=n;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-n.getX())-Math.abs(t.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=Ze.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const s of this.possibleCenters)i+=Math.abs(s.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new v;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const a of this.possibleCenters){const u=a.getEstimatedModuleSize();r+=u,i+=u*u}n=r/e;let s=Math.sqrt(i/e-n*n);t.sort((a,u)=>{const h=Math.abs(u.getEstimatedModuleSize()-n),w=Math.abs(a.getEstimatedModuleSize()-n);return h<w?-1:h>w?1:0});const o=Math.max(.2*n,s);for(let a=0;a<t.length&&t.length>3;a++){const u=t[a];Math.abs(u.getEstimatedModuleSize()-n)>o&&(t.splice(a,1),a--)}}if(t.length>3){let r=0;for(const i of t)r+=i.getEstimatedModuleSize();n=r/t.length,t.sort((i,s)=>{if(s.getCount()===i.getCount()){const o=Math.abs(s.getEstimatedModuleSize()-n),a=Math.abs(i.getEstimatedModuleSize()-n);return o<a?1:o>a?-1:0}else return s.getCount()-i.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Ze.CENTER_QUORUM=2,Ze.MIN_SKIP=3,Ze.MAX_MODULES=57;class Cn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ue.NEED_RESULT_POINT_CALLBACK);const n=new Ze(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new v("No pattern found in proccess finder.");const s=Cn.computeDimension(t,n,r,i),o=K.getProvisionalVersionForDimension(s),a=o.getDimensionForVersion()-7;let u=null;if(o.getAlignmentPatternCenters().length>0){const b=n.getX()-t.getX()+r.getX(),I=n.getY()-t.getY()+r.getY(),y=1-3/a,N=Math.floor(t.getX()+y*(b-t.getX())),M=Math.floor(t.getY()+y*(I-t.getY()));for(let F=4;F<=16;F<<=1)try{u=this.findAlignmentInRegion(i,N,M,F);break}catch(k){if(!(k instanceof v))throw k}}const h=Cn.createTransform(t,n,r,u,s),w=Cn.sampleGrid(this.image,h,s);let E;return u===null?E=[r,t,n]:E=[r,t,n,u],new vn(w,E)}static createTransform(e,t,n,r,i){const s=i-3.5;let o,a,u,h;return r!==null?(o=r.getX(),a=r.getY(),u=s-3,h=u):(o=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),u=s,h=s),mt.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,h,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),o,a,n.getX(),n.getY())}static sampleGrid(e,t,n){return Lt.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=xe.round(j.distance(e,t)/r),s=xe.round(j.distance(e,n)/r);let o=Math.floor((i+s)/2)+7;switch(o&3){case 0:o++;break;case 2:o--;break;case 3:throw new v("Dimensions could be not found.")}return o}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,o=e-(n-e);o<0?(s=e/(e-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(o-e),o=this.image.getWidth()-1);let a=Math.floor(t-(r-t)*s);return s=1,a<0?(s=t/(t-a),a=0):a>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(a-t),a=this.image.getHeight()-1),o=Math.floor(e+(o-e)*s),i+=this.sizeOfBlackWhiteBlackRun(e,t,o,a),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let b=e;e=t,t=b,b=n,n=r,r=b}const s=Math.abs(n-e),o=Math.abs(r-t);let a=-s/2;const u=e<n?1:-1,h=t<r?1:-1;let w=0;const E=n+u;for(let b=e,I=t;b!==E;b+=u){const y=i?I:b,N=i?b:I;if(w===1===this.image.get(y,N)){if(w===2)return xe.distance(b,I,e,t);w++}if(a+=o,a>0){if(I===r)break;I+=h,a-=s}}return w===2?xe.distance(n+u,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),s=Math.max(0,t-i),o=Math.min(this.image.getWidth()-1,t+i);if(o-s<e*3)throw new v("Alignment top exceeds estimated module size.");const a=Math.max(0,n-i),u=Math.min(this.image.getHeight()-1,n+i);if(u-a<e*3)throw new v("Alignment bottom exceeds estimated module size.");return new Un(this.image,s,a,o-s,u-a,e,this.resultPointCallback).find()}}class Vt{constructor(){this.decoder=new Es}getDecoder(){return this.decoder}decode(e,t){let n,r;if(t!=null&&t.get(ue.PURE_BARCODE)!==void 0){const a=Vt.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,t),r=Vt.NO_POINTS}else{const a=new Cn(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(a.getBits(),t),r=a.getPoints()}n.getOther()instanceof Qr&&n.getOther().applyMirroredCorrection(r);const i=new nt(n.getText(),n.getRawBytes(),void 0,r,$.QR_CODE,void 0),s=n.getByteSegments();s!==null&&i.putMetadata(ze.BYTE_SEGMENTS,s);const o=n.getECLevel();return o!==null&&i.putMetadata(ze.ERROR_CORRECTION_LEVEL,o),n.hasStructuredAppend()&&(i.putMetadata(ze.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(ze.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new v;const r=this.moduleSize(t,e);let i=t[1],s=n[1],o=t[0],a=n[0];if(o>=a||i>=s)throw new v;if(s-i!==a-o&&(a=o+(s-i),a>=e.getWidth()))throw new v;const u=Math.round((a-o+1)/r),h=Math.round((s-i+1)/r);if(u<=0||h<=0)throw new v;if(h!==u)throw new v;const w=Math.floor(r/2);i+=w,o+=w;const E=o+Math.floor((u-1)*r)-a;if(E>0){if(E>w)throw new v;o-=E}const b=i+Math.floor((h-1)*r)-s;if(b>0){if(b>w)throw new v;i-=b}const I=new We(u,h);for(let y=0;y<h;y++){const N=i+Math.floor(y*r);for(let M=0;M<u;M++)e.get(o+Math.floor(M*r),N)&&I.set(M,y)}return I}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],s=e[1],o=!0,a=0;for(;i<r&&s<n;){if(o!==t.get(i,s)){if(++a===5)break;o=!o}i++,s++}if(i===r||s===n)throw new v;return(i-e[0])/7}}Vt.NO_POINTS=new Array;class te{PDF417Common(){}static getBitCountSum(e){return xe.sum(e)}static toIntArray(e){if(e==null||!e.length)return te.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=ne.binarySearch(te.SYMBOL_TABLE,e&262143);return t<0?-1:(te.CODEWORD_TABLE[t]-1)%te.NUMBER_OF_CODEWORDS}}te.NUMBER_OF_CODEWORDS=929,te.MAX_CODEWORDS_IN_BARCODE=te.NUMBER_OF_CODEWORDS-1,te.MIN_ROWS_IN_BARCODE=3,te.MAX_ROWS_IN_BARCODE=90,te.MODULES_IN_CODEWORD=17,te.MODULES_IN_STOP_PATTERN=18,te.BARS_IN_MODULE=8,te.EMPTY_INT_ARRAY=new Int32Array([]),te.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),te.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ms{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class le{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=le.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=le.detect(n,r)),new ms(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,s=!1;for(;r<t.getHeight();){const o=le.findVertices(t,r,i);if(o[0]==null&&o[3]==null){if(!s)break;s=!1,i=0;for(const a of n)a[1]!=null&&(r=Math.trunc(Math.max(r,a[1].getY()))),a[3]!=null&&(r=Math.max(r,Math.trunc(a[3].getY())));r+=le.ROW_STEP;continue}if(s=!0,n.push(o),!e)break;o[2]!=null?(i=Math.trunc(o[2].getX()),r=Math.trunc(o[2].getY())):(i=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY()))}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),s=new Array(8);return le.copyToResult(s,le.findRowsWithPattern(e,r,i,t,n,le.START_PATTERN),le.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),le.copyToResult(s,le.findRowsWithPattern(e,r,i,t,n,le.STOP_PATTERN),le.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,s){const o=new Array(4);let a=!1;const u=new Int32Array(s.length);for(;r<t;r+=le.ROW_STEP){let w=le.findGuardPattern(e,i,r,n,!1,s,u);if(w!=null){for(;r>0;){const E=le.findGuardPattern(e,i,--r,n,!1,s,u);if(E!=null)w=E;else{r++;break}}o[0]=new j(w[0],r),o[1]=new j(w[1],r),a=!0;break}}let h=r+1;if(a){let w=0,E=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);for(;h<t;h++){const b=le.findGuardPattern(e,E[0],h,n,!1,s,u);if(b!=null&&Math.abs(E[0]-b[0])<le.MAX_PATTERN_DRIFT&&Math.abs(E[1]-b[1])<le.MAX_PATTERN_DRIFT)E=b,w=0;else{if(w>le.SKIPPED_ROW_COUNT_MAX)break;w++}}h-=w+1,o[2]=new j(E[0],h),o[3]=new j(E[1],h)}return h-r<le.BARCODE_MIN_HEIGHT&&ne.fill(o,null),o}static findGuardPattern(e,t,n,r,i,s,o){ne.fillWithin(o,0,o.length,0);let a=t,u=0;for(;e.get(a,n)&&a>0&&u++<le.MAX_PIXEL_DRIFT;)a--;let h=a,w=0,E=s.length;for(let b=i;h<r;h++)if(e.get(h,n)!==b)o[w]++;else{if(w===E-1){if(le.patternMatchVariance(o,s,le.MAX_INDIVIDUAL_VARIANCE)<le.MAX_AVG_VARIANCE)return new Int32Array([a,h]);a+=o[0]+o[1],G.arraycopy(o,2,o,0,w-1),o[w-1]=0,o[w]=0,w--}else w++;o[w]=1,b=!b}return w===E-1&&le.patternMatchVariance(o,s,le.MAX_INDIVIDUAL_VARIANCE)<le.MAX_AVG_VARIANCE?new Int32Array([a,h-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,s=0;for(let u=0;u<r;u++)i+=e[u],s+=t[u];if(i<s)return 1/0;let o=i/s;n*=o;let a=0;for(let u=0;u<r;u++){let h=e[u],w=t[u]*o,E=h>w?h-w:w-h;if(E>n)return 1/0;a+=E}return a/i}}le.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),le.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),le.MAX_AVG_VARIANCE=.42,le.MAX_INDIVIDUAL_VARIANCE=.8,le.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),le.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),le.MAX_PIXEL_DRIFT=3,le.MAX_PATTERN_DRIFT=5,le.SKIPPED_ROW_COUNT_MAX=25,le.ROW_STEP=5,le.BARCODE_MIN_HEIGHT=10;class qe{constructor(e,t){if(t.length===0)throw new R;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),G.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let r=0;for(let i of this.coefficients)r=this.field.add(r,i);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let s=t;t=n,n=s}let r=new Int32Array(n.length),i=n.length-t.length;G.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=this.field.add(t[s-i],n[s]);return new qe(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new R("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof qe?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new qe(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1);for(let o=0;o<n;o++){let a=t[o];for(let u=0;u<i;u++)s[o+u]=this.field.add(s[o+u],this.field.multiply(a,r[u]))}return new qe(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new qe(this.field,t)}multiplyScalar(e){if(e===0)return new qe(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new qe(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new R;if(t===0)return new qe(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new qe(this.field,r)}toString(){let e=new pe;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class ps{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new R;return this.logTable[e]}inverse(e){if(e===0)throw new Mn;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class mr extends ps{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new qe(this,new Int32Array([0])),this.one=new qe(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new R;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new qe(this,n)}}mr.PDF417_GF=new mr(te.NUMBER_OF_CODEWORDS,3);class Jr{constructor(){this.field=mr.PDF417_GF}decode(e,t,n){let r=new qe(this.field,e),i=new Int32Array(t),s=!1;for(let I=t;I>0;I--){let y=r.evaluateAt(this.field.exp(I));i[t-I]=y,y!==0&&(s=!0)}if(!s)return 0;let o=this.field.getOne();if(n!=null)for(const I of n){let y=this.field.exp(e.length-1-I),N=new qe(this.field,new Int32Array([this.field.subtract(0,y),1]));o=o.multiply(N)}let a=new qe(this.field,i),u=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),a,t),h=u[0],w=u[1],E=this.findErrorLocations(h),b=this.findErrorMagnitudes(w,h,E);for(let I=0;I<E.length;I++){let y=e.length-1-this.field.log(E[I]);if(y<0)throw q.getChecksumInstance();e[y]=this.field.subtract(e[y],b[I])}return E.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let E=e;e=t,t=E}let r=e,i=t,s=this.field.getZero(),o=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let E=r,b=s;if(r=i,s=o,r.isZero())throw q.getChecksumInstance();i=E;let I=this.field.getZero(),y=r.getCoefficient(r.getDegree()),N=this.field.inverse(y);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let M=i.getDegree()-r.getDegree(),F=this.field.multiply(i.getCoefficient(i.getDegree()),N);I=I.add(this.field.buildMonomial(M,F)),i=i.subtract(r.multiplyByMonomial(M,F))}o=I.multiply(s).subtract(b).negative()}let a=o.getCoefficient(0);if(a===0)throw q.getChecksumInstance();let u=this.field.inverse(a),h=o.multiply(u),w=i.multiply(u);return[h,w]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)e.evaluateAt(i)===0&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw q.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let u=1;u<=r;u++)i[r-u]=this.field.multiply(u,t.getCoefficient(u));let s=new qe(this.field,i),o=n.length,a=new Int32Array(o);for(let u=0;u<o;u++){let h=this.field.inverse(n[u]),w=this.field.subtract(0,e.evaluateAt(h)),E=this.field.inverse(s.evaluateAt(h));a[u]=this.field.multiply(w,E)}return a}}class Zt{constructor(e,t,n,r,i){e instanceof Zt?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const s=t==null||n==null,o=r==null||i==null;if(s&&o)throw new v;s?(t=new j(0,r.getY()),n=new j(0,i.getY())):o&&(r=new j(e.getWidth()-1,t.getY()),i=new j(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new Zt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(e>0){let a=n?this.topLeft:this.topRight,u=Math.trunc(a.getY()-e);u<0&&(u=0);let h=new j(a.getX(),u);n?r=h:s=h}if(t>0){let a=n?this.bottomLeft:this.bottomRight,u=Math.trunc(a.getY()+t);u>=this.image.getHeight()&&(u=this.image.getHeight()-1);let h=new j(a.getX(),u);n?i=h:o=h}return new Zt(this.image,r,i,s,o)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class bs{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class mn{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(s,o,a,u,h,w){if(s==="%%")return"%";if(t[++n]===void 0)return;s=u?parseInt(u.substr(1)):void 0;let E=h?parseInt(h.substr(1)):void 0,b;switch(w){case"s":b=t[n];break;case"c":b=t[n][0];break;case"f":b=parseFloat(t[n]).toFixed(s);break;case"p":b=parseFloat(t[n]).toPrecision(s);break;case"e":b=parseFloat(t[n]).toExponential(s);break;case"x":b=parseInt(t[n]).toString(E||16);break;case"d":b=parseFloat(parseInt(t[n],E||10).toPrecision(s)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(E);let I=parseInt(a),y=a&&a[0]+""=="0"?"0":" ";for(;b.length<I;)b=o!==void 0?b+y:y+b;return b}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e,...t){this.buffer+=mn.form(e,t)}toString(){return this.buffer}}class pn{constructor(e){this.boundingBox=new Zt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let n=1;n<pn.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],t!=null)||(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new mn;let t=0;for(const n of this.codewords){if(n==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue())}return e.toString()}}pn.MAX_NEARBY_DISTANCE=5;class bn{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return te.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class $r extends pn{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,u=1,h=0;for(let w=s;w<o;w++){if(t[w]==null)continue;let E=t[w],b=E.getRowNumber()-a;if(b===0)h++;else if(b===1)u=Math.max(u,h),h=1,a=E.getRowNumber();else if(b<0||E.getRowNumber()>=e.getRowCount()||b>w)t[w]=null;else{let I;u>2?I=(u-2)*b:I=b;let y=I>=w;for(let N=1;N<=I&&!y;N++)y=t[w-N]!=null;y?t[w]=null:(a=E.getRowNumber(),h=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.getCodewords(),a=-1;for(let u=i;u<s;u++){if(o[u]==null)continue;let h=o[u];h.setRowNumberAsRowIndicatorColumn();let w=h.getRowNumber()-a;w===0||(w===1?a=h.getRowNumber():h.getRowNumber()>=e.getRowCount()?o[u]=null:a=h.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new bn,n=new bn,r=new bn,i=new bn;for(let o of e){if(o==null)continue;o.setRowNumberAsRowIndicatorColumn();let a=o.getValue()%30,u=o.getRowNumber();switch(this._isLeft||(u+=2),u%3){case 0:n.setValue(a*3+1);break;case 1:i.setValue(a/3),r.setValue(a%3);break;case 2:t.setValue(a+1);break}}if(t.getValue().length===0||n.getValue().length===0||r.getValue().length===0||i.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<te.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>te.MAX_ROWS_IN_BARCODE)return null;let s=new bs(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(e[n]==null)continue;let i=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:i*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class In{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=te.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)n[r]!=null&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let i=this.detectionResultColumns[r].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let s=this.barcodeColumnCount+1;s>0&&i<this.ADJUST_ROW_NUMBER_SKIP;s--){let o=this.detectionResultColumns[s].getCodewords()[n];o!=null&&(i=In.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let s=1;s<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;s++){let o=this.detectionResultColumns[s].getCodewords()[n];o!=null&&(i=In.adjustRowNumberIfValid(r,i,o),o.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;this.detectionResultColumns[e+1]!=null&&(s=this.detectionResultColumns[e+1].getCodewords());let o=new Array(14);o[2]=i[t],o[3]=s[t],t>0&&(o[0]=n[t-1],o[4]=i[t-1],o[5]=s[t-1]),t>1&&(o[8]=n[t-2],o[10]=i[t-2],o[11]=s[t-2]),t<n.length-1&&(o[1]=n[t+1],o[6]=i[t+1],o[7]=s[t+1]),t<n.length-2&&(o[9]=n[t+2],o[12]=i[t+2],o[13]=s[t+2]);for(let a of o)if(In.adjustRowNumber(r,a))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new mn;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(this.detectionResultColumns[r]==null){t.format("    |   ");continue}let i=this.detectionResultColumns[r].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()}}class yn{constructor(e,t,n,r){this.rowNumber=yn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==yn.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}yn.BARCODE_ROW_UNKNOWN=-1;class ct{static initialize(){for(let e=0;e<te.SYMBOL_TABLE.length;e++){let t=te.SYMBOL_TABLE[e],n=t&1;for(let r=0;r<te.BARS_IN_MODULE;r++){let i=0;for(;(t&1)===n;)i+=1,t>>=1;n=t&1,ct.RATIOS_TABLE[e]||(ct.RATIOS_TABLE[e]=new Array(te.BARS_IN_MODULE)),ct.RATIOS_TABLE[e][te.BARS_IN_MODULE-r-1]=Math.fround(i/te.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=ct.getDecodedCodewordValue(ct.sampleBitCounts(e));return t!==-1?t:ct.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=xe.sum(e),n=new Int32Array(te.BARS_IN_MODULE),r=0,i=0;for(let s=0;s<te.MODULES_IN_CODEWORD;s++){let o=t/(2*te.MODULES_IN_CODEWORD)+s*t/te.MODULES_IN_CODEWORD;i+e[r]<=o&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=ct.getBitValue(e);return te.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=xe.sum(e),n=new Array(te.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let r=Bn.MAX_VALUE,i=-1;this.bSymbolTableReady||ct.initialize();for(let s=0;s<ct.RATIOS_TABLE.length;s++){let o=0,a=ct.RATIOS_TABLE[s];for(let u=0;u<te.BARS_IN_MODULE;u++){let h=Math.fround(a[u]-n[u]);if(o+=Math.fround(h*h),o>=r)break}o<r&&(r=o,i=te.SYMBOL_TABLE[s])}return i}}ct.bSymbolTableReady=!1,ct.RATIOS_TABLE=new Array(te.SYMBOL_TABLE.length).map(g=>new Array(te.BARS_IN_MODULE));class ei{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class ti{static parseLong(e,t=void 0){return parseInt(e,t)}}class ni extends C{}ni.kind="NullPointerException";class Is{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new ni;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new Z;if(n===0)return;for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class ys extends C{}class Ss extends Is{constructor(e=32){if(super(),this.count=0,e<0)throw new R("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new ys;n=X.MAX_VALUE}this.buf=ne.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new Z;this.ensureCapacity(this.count+n),G.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ne.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var be;(function(g){g[g.ALPHA=0]="ALPHA",g[g.LOWER=1]="LOWER",g[g.MIXED=2]="MIXED",g[g.PUNCT=3]="PUNCT",g[g.ALPHA_SHIFT=4]="ALPHA_SHIFT",g[g.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(be||(be={}));function ri(){if(typeof window<"u")return window.BigInt||null;if(typeof zn<"u")return zn.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Vn;function Ht(g){if(typeof Vn>"u"&&(Vn=ri()),Vn===null)throw new Error("BigInt is not supported!");return Vn(g)}function Ts(){let g=[];g[0]=Ht(1);let e=Ht(900);g[1]=e;for(let t=2;t<16;t++)g[t]=g[t-1]*e;return g}class D{static decode(e,t){let n=new pe(""),r=V.ISO8859_1;n.enableDecoding(r);let i=1,s=e[i++],o=new ei;for(;i<e[0];){switch(s){case D.TEXT_COMPACTION_MODE_LATCH:i=D.textCompaction(e,i,n);break;case D.BYTE_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:i=D.byteCompaction(s,e,r,i,n);break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case D.NUMERIC_COMPACTION_MODE_LATCH:i=D.numericCompaction(e,i,n);break;case D.ECI_CHARSET:V.getCharacterSetECIByValue(e[i++]);break;case D.ECI_GENERAL_PURPOSE:i+=2;break;case D.ECI_USER_DEFINED:i++;break;case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=D.decodeMacroBlock(e,i,o);break;case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:throw new U;default:i--,i=D.textCompaction(e,i,n);break}if(i<e.length)s=e[i++];else throw U.getFormatInstance()}if(n.length()===0)throw U.getFormatInstance();let a=new gn(null,n.toString(),null,t);return a.setOther(o),a}static decodeMacroBlock(e,t,n){if(t+D.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw U.getFormatInstance();let r=new Int32Array(D.NUMBER_OF_SEQUENCE_CODEWORDS);for(let o=0;o<D.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)r[o]=e[t];n.setSegmentIndex(X.parseInt(D.decodeBase900toBase10(r,D.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new pe;t=D.textCompaction(e,t,i),n.setFileId(i.toString());let s=-1;for(e[t]===D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case D.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let o=new pe;t=D.textCompaction(e,t+1,o),n.setFileName(o.toString());break;case D.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let a=new pe;t=D.textCompaction(e,t+1,a),n.setSender(a.toString());break;case D.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let u=new pe;t=D.textCompaction(e,t+1,u),n.setAddressee(u.toString());break;case D.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let h=new pe;t=D.numericCompaction(e,t+1,h),n.setSegmentCount(X.parseInt(h.toString()));break;case D.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let w=new pe;t=D.numericCompaction(e,t+1,w),n.setTimestamp(ti.parseLong(w.toString()));break;case D.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new pe;t=D.numericCompaction(e,t+1,E),n.setChecksum(X.parseInt(E.toString()));break;case D.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let b=new pe;t=D.numericCompaction(e,t+1,b),n.setFileSize(ti.parseLong(b.toString()));break;default:throw U.getFormatInstance()}break;case D.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(s!==-1){let o=t-s;n.isLastSegment()&&o--,n.setOptionalData(ne.copyOfRange(e,s,s+o))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),s=0,o=!1;for(;t<e[0]&&!o;){let a=e[t++];if(a<D.TEXT_COMPACTION_MODE_LATCH)r[s]=a/30,r[s+1]=a%30,s+=2;else switch(a){case D.TEXT_COMPACTION_MODE_LATCH:r[s++]=D.TEXT_COMPACTION_MODE_LATCH;break;case D.BYTE_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.NUMERIC_COMPACTION_MODE_LATCH:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:t--,o=!0;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,a=e[t++],i[s]=a,s++;break}}return D.decodeTextCompaction(r,i,s,n),t}static decodeTextCompaction(e,t,n,r){let i=be.ALPHA,s=be.ALPHA,o=0;for(;o<n;){let a=e[o],u="";switch(i){case be.ALPHA:if(a<26)u=String.fromCharCode(65+a);else switch(a){case 26:u=" ";break;case D.LL:i=be.LOWER;break;case D.ML:i=be.MIXED;break;case D.PS:s=i,i=be.PUNCT_SHIFT;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case D.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break;case be.LOWER:if(a<26)u=String.fromCharCode(97+a);else switch(a){case 26:u=" ";break;case D.AS:s=i,i=be.ALPHA_SHIFT;break;case D.ML:i=be.MIXED;break;case D.PS:s=i,i=be.PUNCT_SHIFT;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case D.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break;case be.MIXED:if(a<D.PL)u=D.MIXED_CHARS[a];else switch(a){case D.PL:i=be.PUNCT;break;case 26:u=" ";break;case D.LL:i=be.LOWER;break;case D.AL:i=be.ALPHA;break;case D.PS:s=i,i=be.PUNCT_SHIFT;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case D.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break;case be.PUNCT:if(a<D.PAL)u=D.PUNCT_CHARS[a];else switch(a){case D.PAL:i=be.ALPHA;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case D.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break;case be.ALPHA_SHIFT:if(i=s,a<26)u=String.fromCharCode(65+a);else switch(a){case 26:u=" ";break;case D.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break;case be.PUNCT_SHIFT:if(i=s,a<D.PAL)u=D.PUNCT_CHARS[a];else switch(a){case D.PAL:i=be.ALPHA;break;case D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o]);break;case D.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break}u!==""&&r.append(u),o++}}static byteCompaction(e,t,n,r,i){let s=new Ss,o=0,a=0,u=!1;switch(e){case D.BYTE_COMPACTION_MODE_LATCH:let h=new Int32Array(6),w=t[r++];for(;r<t[0]&&!u;)switch(h[o++]=w,a=900*a+w,w=t[r++],w){case D.TEXT_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH:case D.NUMERIC_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:r--,u=!0;break;default:if(o%5===0&&o>0){for(let E=0;E<6;++E)s.write(Number(Ht(a)>>Ht(8*(5-E))));a=0,o=0}break}r===t[0]&&w<D.TEXT_COMPACTION_MODE_LATCH&&(h[o++]=w);for(let E=0;E<o;E++)s.write(h[E]);break;case D.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!u;){let E=t[r++];if(E<D.TEXT_COMPACTION_MODE_LATCH)o++,a=900*a+E;else switch(E){case D.TEXT_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH:case D.NUMERIC_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:r--,u=!0;break}if(o%5===0&&o>0){for(let b=0;b<6;++b)s.write(Number(Ht(a)>>Ht(8*(5-b))));a=0,o=0}}break}return i.append(st.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,s=new Int32Array(D.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let o=e[t++];if(t===e[0]&&(i=!0),o<D.TEXT_COMPACTION_MODE_LATCH)s[r]=o,r++;else switch(o){case D.TEXT_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH:case D.BYTE_COMPACTION_MODE_LATCH_6:case D.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case D.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(r%D.MAX_NUMERIC_CODEWORDS===0||o===D.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(D.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=Ht(0);for(let i=0;i<t;i++)n+=D.EXP900[t-i-1]*Ht(e[i]);let r=n.toString();if(r.charAt(0)!=="1")throw new U;return r.substring(1)}}D.TEXT_COMPACTION_MODE_LATCH=900,D.BYTE_COMPACTION_MODE_LATCH=901,D.NUMERIC_COMPACTION_MODE_LATCH=902,D.BYTE_COMPACTION_MODE_LATCH_6=924,D.ECI_USER_DEFINED=925,D.ECI_GENERAL_PURPOSE=926,D.ECI_CHARSET=927,D.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,D.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,D.MACRO_PDF417_TERMINATOR=922,D.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,D.MAX_NUMERIC_CODEWORDS=15,D.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,D.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,D.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,D.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,D.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,D.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,D.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,D.PL=25,D.LL=27,D.AS=27,D.ML=28,D.AL=28,D.PS=29,D.PAL=29,D.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,D.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",D.EXP900=ri()?Ts():[],D.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ce{constructor(){}static decode(e,t,n,r,i,s,o){let a=new Zt(e,t,n,r,i),u=null,h=null,w;for(let I=!0;;I=!1){if(t!=null&&(u=ce.getRowIndicatorColumn(e,a,t,!0,s,o)),r!=null&&(h=ce.getRowIndicatorColumn(e,a,r,!1,s,o)),w=ce.merge(u,h),w==null)throw v.getNotFoundInstance();let y=w.getBoundingBox();if(I&&y!=null&&(y.getMinY()<a.getMinY()||y.getMaxY()>a.getMaxY()))a=y;else break}w.setBoundingBox(a);let E=w.getBarcodeColumnCount()+1;w.setDetectionResultColumn(0,u),w.setDetectionResultColumn(E,h);let b=u!=null;for(let I=1;I<=E;I++){let y=b?I:E-I;if(w.getDetectionResultColumn(y)!==void 0)continue;let N;y===0||y===E?N=new $r(a,y===0):N=new pn(a),w.setDetectionResultColumn(y,N);let M=-1,F=M;for(let k=a.getMinY();k<=a.getMaxY();k++){if(M=ce.getStartColumn(w,y,k,b),M<0||M>a.getMaxX()){if(F===-1)continue;M=F}let L=ce.detectCodeword(e,a.getMinX(),a.getMaxX(),b,M,k,s,o);L!=null&&(N.setCodeword(k,L),F=M,s=Math.min(s,L.getWidth()),o=Math.max(o,L.getWidth()))}}return ce.createDecoderResult(w)}static merge(e,t){if(e==null&&t==null)return null;let n=ce.getBarcodeMetadata(e,t);if(n==null)return null;let r=Zt.merge(ce.adjustBoundingBox(e),ce.adjustBoundingBox(t));return new In(n,r)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=ce.getMax(t),r=0;for(let o of t)if(r+=n-o,o>0)break;let i=e.getCodewords();for(let o=0;r>0&&i[o]==null;o++)r--;let s=0;for(let o=t.length-1;o>=0&&(s+=n-t[o],!(t[o]>0));o--);for(let o=i.length-1;s>0&&i[o]==null;o--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let r;return t==null||(r=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,s){let o=new $r(t,r);for(let a=0;a<2;a++){let u=a===0?1:-1,h=Math.trunc(Math.trunc(n.getX()));for(let w=Math.trunc(Math.trunc(n.getY()));w<=t.getMaxY()&&w>=t.getMinY();w+=u){let E=ce.detectCodeword(e,0,e.getWidth(),r,h,w,i,s);E!=null&&(o.setCodeword(w,E),r?h=E.getStartX():h=E.getEndX())}}return o}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-ce.getNumberOfECCodeWords(e.getBarcodeECLevel());if(r.length===0){if(i<1||i>te.MAX_CODEWORDS_IN_BARCODE)throw v.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=ce.createBarcodeMatrix(e);ce.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array;for(let a=0;a<e.getBarcodeRowCount();a++)for(let u=0;u<e.getBarcodeColumnCount();u++){let h=t[a][u+1].getValue(),w=a*e.getBarcodeColumnCount()+u;h.length===0?n.push(w):h.length===1?r[w]=h[0]:(s.push(w),i.push(h))}let o=new Array(i.length);for(let a=0;a<o.length;a++)o[a]=i[a];return ce.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,te.toIntArray(n),te.toIntArray(s),o)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let s=new Int32Array(r.length),o=100;for(;o-- >0;){for(let a=0;a<s.length;a++)t[r[a]]=i[a][s[a]];try{return ce.decodeCodewords(t,e,n)}catch(a){if(!(a instanceof q))throw a}if(s.length===0)throw q.getChecksumInstance();for(let a=0;a<s.length;a++)if(s[a]<i[a].length-1){s[a]++;break}else if(s[a]=0,a===s.length-1)throw q.getChecksumInstance()}throw q.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)t[r][i]=new bn;let n=0;for(let r of e.getDetectionResultColumns()){if(r!=null){for(let i of r.getCodewords())if(i!=null){let s=i.getRowNumber();if(s>=0){if(s>=t.length)continue;t[s][n].setValue(i.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,s=null;if(ce.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(n)),s!=null)return r?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),s!=null)return r?s.getStartX():s.getEndX();if(ce.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),s!=null)return r?s.getEndX():s.getStartX();let o=0;for(;ce.isValidBarcodeColumn(e,t-i);){t-=i;for(let a of e.getDetectionResultColumn(t).getCodewords())if(a!=null)return(r?a.getEndX():a.getStartX())+i*o*(a.getEndX()-a.getStartX());o++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,s,o,a){i=ce.adjustCodewordStartColumn(e,t,n,r,i,s);let u=ce.getModuleBitCount(e,t,n,r,i,s);if(u==null)return null;let h,w=xe.sum(u);if(r)h=i+w;else{for(let I=0;I<u.length/2;I++){let y=u[I];u[I]=u[u.length-1-I],u[u.length-1-I]=y}h=i,i=h-w}if(!ce.checkCodewordSkew(w,o,a))return null;let E=ct.getDecodedValue(u),b=te.getCodeword(E);return b===-1?null:new yn(i,h,ce.getCodewordBucketNumber(E),b)}static getModuleBitCount(e,t,n,r,i,s){let o=i,a=new Int32Array(8),u=0,h=r?1:-1,w=r;for(;(r?o<n:o>=t)&&u<a.length;)e.get(o,s)===w?(a[u]++,o+=h):(u++,w=!w);return u===a.length||o===(r?n:t)&&u===a.length-1?a:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,s){let o=i,a=r?-1:1;for(let u=0;u<2;u++){for(;(r?o>=t:o<n)&&r===e.get(o,s);){if(Math.abs(i-o)>ce.CODEWORD_SKEW_SIZE)return i;o+=a}a=-a,r=!r}return o}static checkCodewordSkew(e,t,n){return t-ce.CODEWORD_SKEW_SIZE<=e&&e<=n+ce.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw U.getFormatInstance();let r=1<<t+1,i=ce.correctErrors(e,n,r);ce.verifyCodewordCount(e,r);let s=D.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(n.length),s}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+ce.MAX_ERRORS||n<0||n>ce.MAX_EC_CODEWORDS)throw q.getChecksumInstance();return ce.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw U.getFormatInstance();let n=e[0];if(n>e.length)throw U.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw U.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((e&1)!==n&&(n=e&1,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return ce.getCodewordBucketNumber(ce.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new mn;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}ce.CODEWORD_SKEW_SIZE=2,ce.MAX_ERRORS=3,ce.MAX_EC_CODEWORDS=512,ce.errorCorrection=new Jr;class Ke{decode(e,t=null){let n=Ke.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw v.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return Ke.decode(e,t,!0)}catch(n){throw n instanceof U||n instanceof q?v.getNotFoundInstance():n}}static decode(e,t,n){const r=new Array,i=le.detectMultiple(e,t,n);for(const s of i.getPoints()){const o=ce.decode(i.getBits(),s[4],s[5],s[6],s[7],Ke.getMinCodewordWidth(s),Ke.getMaxCodewordWidth(s)),a=new nt(o.getText(),o.getRawBytes(),void 0,s,$.PDF_417);a.putMetadata(ze.ERROR_CORRECTION_LEVEL,o.getECLevel());const u=o.getOther();u!=null&&a.putMetadata(ze.PDF417_EXTRA_METADATA,u),r.push(a)}return r.map(s=>s)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?X.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(Ke.getMaxWidth(e[0],e[4]),Ke.getMaxWidth(e[6],e[2])*te.MODULES_IN_CODEWORD/te.MODULES_IN_STOP_PATTERN),Math.max(Ke.getMaxWidth(e[1],e[5]),Ke.getMaxWidth(e[7],e[3])*te.MODULES_IN_CODEWORD/te.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(Ke.getMinWidth(e[0],e[4]),Ke.getMinWidth(e[6],e[2])*te.MODULES_IN_CODEWORD/te.MODULES_IN_STOP_PATTERN),Math.min(Ke.getMinWidth(e[1],e[5]),Ke.getMinWidth(e[7],e[3])*te.MODULES_IN_CODEWORD/te.MODULES_IN_STOP_PATTERN)))}reset(){}}class Hn extends C{}Hn.kind="ReaderException";class ii{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!d(e)&&e.get(ue.TRY_HARDER)===!0,n=d(e)?null:e.get(ue.POSSIBLE_FORMATS),r=new Array;if(!d(n)){const i=n.some(s=>s===$.UPC_A||s===$.UPC_E||s===$.EAN_13||s===$.EAN_8||s===$.CODABAR||s===$.CODE_39||s===$.CODE_93||s===$.CODE_128||s===$.ITF||s===$.RSS_14||s===$.RSS_EXPANDED);i&&!t&&r.push(new sn(e,this.verbose)),n.includes($.QR_CODE)&&r.push(new Vt),n.includes($.DATA_MATRIX)&&r.push(new Ut),n.includes($.AZTEC)&&r.push(new Pn),n.includes($.PDF_417)&&r.push(new Ke),i&&t&&r.push(new sn(e,this.verbose))}r.length===0&&(t||r.push(new sn(e,this.verbose)),r.push(new Vt),r.push(new Ut),r.push(new Pn),r.push(new Ke),t&&r.push(new sn(e,this.verbose))),this.readers=r}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Hn("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof Hn)continue}throw new v("No MultiFormat Readers were able to detect the code.")}}class Ns extends Wt{constructor(e=null,t=500){const n=new ii;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Rs extends Wt{constructor(e=500){super(new Ke,e)}}class Os extends Wt{constructor(e=500){super(new Vt,e)}}var pr;(function(g){g[g.ERROR_CORRECTION=0]="ERROR_CORRECTION",g[g.CHARACTER_SET=1]="CHARACTER_SET",g[g.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",g[g.MIN_SIZE=3]="MIN_SIZE",g[g.MAX_SIZE=4]="MAX_SIZE",g[g.MARGIN=5]="MARGIN",g[g.PDF417_COMPACT=6]="PDF417_COMPACT",g[g.PDF417_COMPACTION=7]="PDF417_COMPACTION",g[g.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",g[g.AZTEC_LAYERS=9]="AZTEC_LAYERS",g[g.QR_VERSION=10]="QR_VERSION"})(pr||(pr={}));var Ge=pr;class br{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ot(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const s=n.multiply(new ot(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(s),n=s}}return t[e]}encode(e,t){if(t===0)throw new R("No error correction bytes");const n=e.length-t;if(n<=0)throw new R("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);G.arraycopy(e,0,i,0,n);let s=new ot(this.field,i);s=s.multiplyByMonomial(t,1);const a=s.divide(r)[1].getCoefficients(),u=t-a.length;for(let h=0;h<u;h++)e[n+h]=0;G.arraycopy(a,0,e,n+u,a.length)}}class Pe{constructor(){}static applyMaskPenaltyRule1(e){return Pe.applyMaskPenaltyRule1Internal(e,!0)+Pe.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i-1;s++){const o=n[s];for(let a=0;a<r-1;a++){const u=o[a];u===o[a+1]&&u===n[s+1][a]&&u===n[s+1][a+1]&&t++}}return Pe.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++)for(let o=0;o<r;o++){const a=n[s];o+6<r&&a[o]===1&&a[o+1]===0&&a[o+2]===1&&a[o+3]===1&&a[o+4]===1&&a[o+5]===0&&a[o+6]===1&&(Pe.isWhiteHorizontal(a,o-4,o)||Pe.isWhiteHorizontal(a,o+7,o+11))&&t++,s+6<i&&n[s][o]===1&&n[s+1][o]===0&&n[s+2][o]===1&&n[s+3][o]===1&&n[s+4][o]===1&&n[s+5][o]===0&&n[s+6][o]===1&&(Pe.isWhiteVertical(n,o,s-4,s)||Pe.isWhiteVertical(n,o,s+7,s+11))&&t++}return t*Pe.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(e[r]===1)return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(e[i][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let a=0;a<i;a++){const u=n[a];for(let h=0;h<r;h++)u[h]===1&&t++}const s=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-s)*10/s)*Pe.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=n&1;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(i&1)+i%3;break;case 6:i=n*t,r=(i&1)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new R("Invalid mask pattern: "+e)}return r===0}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),s=e.getArray();for(let o=0;o<r;o++){let a=0,u=-1;for(let h=0;h<i;h++){const w=t?s[o][h]:s[h][o];w===u?a++:(a>=5&&(n+=Pe.N1+(a-5)),a=1,u=w)}a>=5&&(n+=Pe.N1+(a-5))}return n}}Pe.N1=3,Pe.N2=3,Pe.N3=40,Pe.N4=10;class Gn{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)ne.fill(t,e)}equals(e){if(!(e instanceof Gn))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const i=this.bytes[n],s=t.bytes[n];for(let o=0,a=this.width;o<a;++o)if(i[o]!==s[o])return!1}return!0}toString(){const e=new pe;for(let t=0,n=this.height;t<n;++t){const r=this.bytes[t];for(let i=0,s=this.width;i<s;++i)switch(r[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class jt{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new pe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<jt.NUM_MASK_PATTERNS}}jt.NUM_MASK_PATTERNS=8;class ye extends C{}ye.kind="WriterException";class ee{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){ee.clearMatrix(i),ee.embedBasicPatterns(n,i),ee.embedTypeInfo(t,r,i),ee.maybeEmbedVersionInfo(n,i),ee.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){ee.embedPositionDetectionPatternsAndSeparators(t),ee.embedDarkDotAtLeftBottomCorner(t),ee.maybeEmbedPositionAdjustmentPatterns(e,t),ee.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new ie;ee.makeTypeInfoBits(e,t,r);for(let i=0,s=r.getSize();i<s;++i){const o=r.get(r.getSize()-1-i),a=ee.TYPE_INFO_COORDINATES[i],u=a[0],h=a[1];if(n.setBoolean(u,h,o),i<8){const w=n.getWidth()-i-1;n.setBoolean(w,8,o)}else{const E=n.getHeight()-7+(i-8);n.setBoolean(8,E,o)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new ie;ee.makeVersionInfoBits(e,n);let r=6*3-1;for(let i=0;i<6;++i)for(let s=0;s<3;++s){const o=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+s,o),t.setBoolean(t.getHeight()-11+s,i,o)}}static embedDataBits(e,t,n){let r=0,i=-1,s=n.getWidth()-1,o=n.getHeight()-1;for(;s>0;){for(s===6&&(s-=1);o>=0&&o<n.getHeight();){for(let a=0;a<2;++a){const u=s-a;if(!ee.isEmpty(n.get(u,o)))continue;let h;r<e.getSize()?(h=e.get(r),++r):h=!1,t!==255&&Pe.getDataMaskBit(t,u,o)&&(h=!h),n.setBoolean(u,o,h)}o+=i}i=-i,o+=i,s-=2}if(r!==e.getSize())throw new ye("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-X.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new R("0 polynomial");const n=ee.findMSBSet(t);for(e<<=n-1;ee.findMSBSet(e)>=n;)e^=t<<ee.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!jt.isValidMaskPattern(t))throw new ye("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=ee.calculateBCHCode(r,ee.TYPE_INFO_POLY);n.appendBits(i,10);const s=new ie;if(s.appendBits(ee.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new ye("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=ee.calculateBCHCode(e.getVersionNumber(),ee.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new ye("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;ee.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),ee.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new ye;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!ee.isEmpty(n.get(e+r,t)))throw new ye;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!ee.isEmpty(n.get(e,t+r)))throw new ye;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=ee.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=ee.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=ee.POSITION_DETECTION_PATTERN[0].length;ee.embedPositionDetectionPattern(0,0,e),ee.embedPositionDetectionPattern(e.getWidth()-t,0,e),ee.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;ee.embedHorizontalSeparationPattern(0,n-1,e),ee.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),ee.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;ee.embedVerticalSeparationPattern(r,0,e),ee.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),ee.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=ee.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,s=r.length;i!==s;i++){const o=r[i];if(o>=0)for(let a=0;a!==s;a++){const u=r[a];u>=0&&ee.isEmpty(t.get(u,o))&&ee.embedPositionAdjustmentPattern(u-2,o-2,t)}}}}ee.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ee.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ee.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ee.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ee.VERSION_INFO_POLY=7973,ee.TYPE_INFO_POLY=1335,ee.TYPE_INFO_MASK_PATTERN=21522;class _s{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Re{constructor(){}static calculateMaskPenalty(e){return Pe.applyMaskPenaltyRule1(e)+Pe.applyMaskPenaltyRule2(e)+Pe.applyMaskPenaltyRule3(e)+Pe.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=Re.DEFAULT_BYTE_MODE_ENCODING;const i=n!==null&&n.get(Ge.CHARACTER_SET)!==void 0;i&&(r=n.get(Ge.CHARACTER_SET).toString());const s=this.chooseMode(e,r),o=new ie;if(s===J.BYTE&&(i||Re.DEFAULT_BYTE_MODE_ENCODING!==r)){const k=V.getCharacterSetECIByName(r);k!==void 0&&this.appendECI(k,o)}this.appendModeInfo(s,o);const a=new ie;this.appendBytes(e,s,a,r);let u;if(n!==null&&n.get(Ge.QR_VERSION)!==void 0){const k=Number.parseInt(n.get(Ge.QR_VERSION).toString(),10);u=K.getVersionForNumber(k);const L=this.calculateBitsNeeded(s,o,a,u);if(!this.willFit(L,u,t))throw new ye("Data too big for requested version")}else u=this.recommendVersion(t,s,o,a);const h=new ie;h.appendBitArray(o);const w=s===J.BYTE?a.getSizeInBytes():e.length;this.appendLengthInfo(w,u,s,h),h.appendBitArray(a);const E=u.getECBlocksForLevel(t),b=u.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(b,h);const I=this.interleaveWithECBytes(h,u.getTotalCodewords(),b,E.getNumBlocks()),y=new jt;y.setECLevel(t),y.setMode(s),y.setVersion(u);const N=u.getDimensionForVersion(),M=new Gn(N,N),F=this.chooseMaskPattern(I,t,u,M);return y.setMaskPattern(F),ee.buildMatrix(I,t,u,F,M),y.setMatrix(M),y}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,K.getVersionForNumber(1)),s=this.chooseVersion(i,e),o=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(o,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<Re.ALPHANUMERIC_TABLE.length?Re.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(V.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return J.KANJI;let n=!1,r=!1;for(let i=0,s=e.length;i<s;++i){const o=e.charAt(i);if(Re.isDigit(o))n=!0;else if(this.getAlphanumericCode(o.charCodeAt(0))!==-1)r=!0;else return J.BYTE}return r?J.ALPHANUMERIC:n?J.NUMERIC:J.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=st.encode(e,V.SJIS)}catch{return!1}const n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){const i=t[r]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let o=0;o<jt.NUM_MASK_PATTERNS;o++){ee.buildMatrix(e,t,n,o,r);let a=this.calculateMaskPenalty(r);a<i&&(i=a,s=o)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=K.getVersionForNumber(n);if(Re.willFit(e,r,t))return r}throw new ye("Data too big")}static willFit(e,t,n){const r=t.getTotalCodewords(),s=t.getECBlocksForLevel(n).getTotalECCodewords(),o=r-s,a=(e+7)/8;return o>=a}static terminateBits(e,t){const n=e*8;if(t.getSize()>n)throw new ye("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const r=t.getSize()&7;if(r>0)for(let s=r;s<8;s++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let s=0;s<i;++s)t.appendBits((s&1)===0?236:17,8);if(t.getSize()!==n)throw new ye("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,s){if(r>=n)throw new ye("Block ID too large");const o=e%n,a=n-o,u=Math.floor(e/n),h=u+1,w=Math.floor(t/n),E=w+1,b=u-w,I=h-E;if(b!==I)throw new ye("EC bytes mismatch");if(n!==a+o)throw new ye("RS blocks mismatch");if(e!==(w+b)*a+(E+I)*o)throw new ye("Total bytes mismatch");r<a?(i[0]=w,s[0]=b):(i[0]=E,s[0]=I)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new ye("Number of bits and data bytes does not match");let i=0,s=0,o=0;const a=new Array;for(let h=0;h<r;++h){const w=new Int32Array(1),E=new Int32Array(1);Re.getNumDataBytesAndNumECBytesForBlockID(t,n,r,h,w,E);const b=w[0],I=new Uint8Array(b);e.toBytes(8*i,I,0,b);const y=Re.generateECBytes(I,E[0]);a.push(new _s(I,y)),s=Math.max(s,b),o=Math.max(o,y.length),i+=w[0]}if(n!==i)throw new ye("Data bytes does not match offset");const u=new ie;for(let h=0;h<s;++h)for(const w of a){const E=w.getDataBytes();h<E.length&&u.appendBits(E[h],8)}for(let h=0;h<o;++h)for(const w of a){const E=w.getErrorCorrectionBytes();h<E.length&&u.appendBits(E[h],8)}if(t!==u.getSizeInBytes())throw new ye("Interleaving error: "+t+" and "+u.getSizeInBytes()+" differ.");return u}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=e[s]&255;new br(we.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=r[n+s];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new ye(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case J.NUMERIC:Re.appendNumericBytes(e,n);break;case J.ALPHANUMERIC:Re.appendAlphanumericBytes(e,n);break;case J.BYTE:Re.append8BitBytes(e,n,r);break;case J.KANJI:Re.appendKanjiBytes(e,n);break;default:throw new ye("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Re.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=Re.getDigit(e.charAt(r));if(r+2<n){const s=Re.getDigit(e.charAt(r+1)),o=Re.getDigit(e.charAt(r+2));t.appendBits(i*100+s*10+o,10),r+=3}else if(r+1<n){const s=Re.getDigit(e.charAt(r+1));t.appendBits(i*10+s,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=Re.getAlphanumericCode(e.charCodeAt(r));if(i===-1)throw new ye;if(r+1<n){const s=Re.getAlphanumericCode(e.charCodeAt(r+1));if(s===-1)throw new ye;t.appendBits(i*45+s,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=st.encode(e,n)}catch(i){throw new ye(i)}for(let i=0,s=r.length;i!==s;i++){const o=r[i];t.appendBits(o,8)}}static appendKanjiBytes(e,t){let n;try{n=st.encode(e,V.SJIS)}catch(i){throw new ye(i)}const r=n.length;for(let i=0;i<r;i+=2){const s=n[i]&255,o=n[i+1]&255,a=s<<8&4294967295|o;let u=-1;if(a>=33088&&a<=40956?u=a-33088:a>=57408&&a<=60351&&(u=a-49472),u===-1)throw new ye("Invalid byte sequence");const h=(u>>8)*192+(u&255);t.appendBits(h,13)}}static appendECI(e,t){t.appendBits(J.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Re.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Re.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class qt{write(e,t,n,r=null){if(e.length===0)throw new R("Found empty contents");if(t<0||n<0)throw new R("Requested dimensions are too small: "+t+"x"+n);let i=Ne.L,s=qt.QUIET_ZONE_SIZE;r!==null&&(r.get(Ge.ERROR_CORRECTION)!==void 0&&(i=Ne.fromString(r.get(Ge.ERROR_CORRECTION).toString())),r.get(Ge.MARGIN)!==void 0&&(s=Number.parseInt(r.get(Ge.MARGIN).toString(),10)));const o=Re.encode(e,i,r);return this.renderResult(o,t,n,s)}writeToDom(e,t,n,r,i=null){typeof e=="string"&&(e=document.querySelector(e));const s=this.write(t,n,r,i);e&&e.appendChild(s)}renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new yt;const s=i.getWidth(),o=i.getHeight(),a=s+r*2,u=o+r*2,h=Math.max(t,a),w=Math.max(n,u),E=Math.min(Math.floor(h/a),Math.floor(w/u)),b=Math.floor((h-s*E)/2),I=Math.floor((w-o*E)/2),y=this.createSVGElement(h,w);for(let N=0,M=I;N<o;N++,M+=E)for(let F=0,k=b;F<s;F++,k+=E)if(i.get(F,N)===1){const L=this.createSvgRectElement(k,M,E,E);y.appendChild(L)}return y}createSVGElement(e,t){const n=document.createElementNS(qt.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(qt.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}qt.QUIET_ZONE_SIZE=4,qt.SVG_NS="http://www.w3.org/2000/svg";class an{encode(e,t,n,r,i){if(e.length===0)throw new R("Found empty contents");if(t!==$.QR_CODE)throw new R("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new R(`Requested dimensions are too small: ${n}x${r}`);let s=Ne.L,o=an.QUIET_ZONE_SIZE;i!==null&&(i.get(Ge.ERROR_CORRECTION)!==void 0&&(s=Ne.fromString(i.get(Ge.ERROR_CORRECTION).toString())),i.get(Ge.MARGIN)!==void 0&&(o=Number.parseInt(i.get(Ge.MARGIN).toString(),10)));const a=Re.encode(e,s,i);return an.renderResult(a,n,r,o)}static renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new yt;const s=i.getWidth(),o=i.getHeight(),a=s+r*2,u=o+r*2,h=Math.max(t,a),w=Math.max(n,u),E=Math.min(Math.floor(h/a),Math.floor(w/u)),b=Math.floor((h-s*E)/2),I=Math.floor((w-o*E)/2),y=new We(h,w);for(let N=0,M=I;N<o;N++,M+=E)for(let F=0,k=b;F<s;F++,k+=E)i.get(F,N)===1&&y.setRegion(k,M,E,E);return y}}an.QUIET_ZONE_SIZE=4;class Ds{encode(e,t,n,r,i){let s;switch(t){case $.QR_CODE:s=new an;break;default:throw new R("No encoder available for format "+t)}return s.encode(e,t,n,r,i)}}class Rt extends xn{constructor(e,t,n,r,i,s,o,a){if(super(s,o),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+s>t||i+o>n)throw new R("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(s,o)}getRow(e,t){if(e<0||e>=this.getHeight())throw new R("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return G.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return G.arraycopy(this.yuvData,i,r,0,n),r;for(let s=0;s<t;s++){const o=s*e;G.arraycopy(this.yuvData,i,r,o,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Rt(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/Rt.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Rt.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const o=s*e;for(let a=0;a<e;a++){const u=r[i+a*Rt.THUMBNAIL_SCALE_FACTOR]&255;n[o+a]=4278190080|u*65793}i+=this.dataWidth*Rt.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Rt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Rt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const s=i+e/2;for(let o=i,a=i+e-1;o<s;o++,a--){const u=n[o];n[o]=n[a],n[a]=u}}}invert(){return new vt(this)}}Rt.THUMBNAIL_SCALE_FACTOR=2;class Ir extends xn{constructor(e,t,n,r,i,s,o){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=s,this.top=o,e.BYTES_PER_ELEMENT===4){const a=t*n,u=new Uint8ClampedArray(a);for(let h=0;h<a;h++){const w=e[h],E=w>>16&255,b=w>>7&510,I=w&255;u[h]=(E+b+I)/4&255}this.luminances=u}else this.luminances=e;if(r===void 0&&(this.dataWidth=t),i===void 0&&(this.dataHeight=n),s===void 0&&(this.left=0),o===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new R("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return G.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return G.arraycopy(this.luminances,i,r,0,n),r;for(let s=0;s<t;s++){const o=s*e;G.arraycopy(this.luminances,i,r,o,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Ir(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new vt(this)}}class si extends V{static forName(e){return this.getCharacterSetECIByName(e)}}class yr{}yr.ISO_8859_1=V.ISO8859_1;class oi{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class ai{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Ms{constructor(e){this.previous=e}getPrevious(){return this.previous}}class ln extends Ms{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new ln(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ln(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+X.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Sr extends ln{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Sr(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Bs(g,e,t){return new Sr(g,e,t)}function Sn(g,e,t){return new ln(g,e,t)}const vs=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Gt=0,Wn=1,Ct=2,li=3,Ot=4,Ps=new ln(null,0,0),Tr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ls(g){for(let e of g)ne.fill(e,-1);return g[Gt][Ot]=0,g[Wn][Ot]=0,g[Wn][Gt]=28,g[li][Ot]=0,g[Ct][Ot]=0,g[Ct][Gt]=15,g}const ci=Ls(ne.createInt32Array(6,6));class _t{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let s=Tr[this.mode][e];r=Sn(r,s&65535,s>>16),n+=s>>16}let i=e===Ct?4:5;return r=Sn(r,t,i),new _t(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===Ct?4:5;return n=Sn(n,ci[this.mode][e],r),n=Sn(n,t,5),new _t(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Ot||this.mode===Ct){let o=Tr[n][Gt];t=Sn(t,o&65535,o>>16),r+=o>>16,n=Gt}let i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new _t(t,n,this.binaryShiftByteCount+1,r+i);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=Bs(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new _t(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Tr[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=_t.calculateBinaryShiftCost(e)-_t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;r!==null;r=r.getPrevious())t.unshift(r);let n=new ie;for(const r of t)r.appendTo(n,e);return n}toString(){return re.format("%s bits=%d bytes=%d",vs[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}_t.INITIAL_STATE=new _t(Ps,Gt,0,0);function Fs(g){const e=re.getCharCode(" "),t=re.getCharCode("."),n=re.getCharCode(",");g[Gt][e]=1;const r=re.getCharCode("Z"),i=re.getCharCode("A");for(let E=i;E<=r;E++)g[Gt][E]=E-i+2;g[Wn][e]=1;const s=re.getCharCode("z"),o=re.getCharCode("a");for(let E=o;E<=s;E++)g[Wn][E]=E-o+2;g[Ct][e]=1;const a=re.getCharCode("9"),u=re.getCharCode("0");for(let E=u;E<=a;E++)g[Ct][E]=E-u+2;g[Ct][n]=12,g[Ct][t]=13;const h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let E=0;E<h.length;E++)g[li][re.getCharCode(h[E])]=E;const w=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<w.length;E++)re.getCharCode(w[E])>0&&(g[Ot][re.getCharCode(w[E])]=E);return g}const Nr=Fs(ne.createInt32Array(5,256));class Tn{constructor(e){this.text=e}encode(){const e=re.getCharCode(" "),t=re.getCharCode(`
`);let n=ai.singletonList(_t.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let s,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case re.getCharCode("\r"):s=o===t?2:0;break;case re.getCharCode("."):s=o===e?3:0;break;case re.getCharCode(","):s=o===e?4:0;break;case re.getCharCode(":"):s=o===e?5:0;break;default:s=0}s>0?(n=Tn.updateStateListForPair(n,i,s),i++):n=this.updateStateListForChar(n,i)}return ai.min(n,(i,s)=>i.getBitCount()-s.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return Tn.simplifyStates(n)}updateStateForChar(e,t,n){let r=this.text[t]&255,i=Nr[e.getMode()][r]>0,s=null;for(let o=0;o<=Ot;o++){let a=Nr[o][r];if(a>0){if(s==null&&(s=e.endBinaryShift(t)),!i||o===e.getMode()||o===Ct){const u=s.latchAndAppend(o,a);n.push(u)}if(!i&&ci[e.getMode()][o]>=0){const u=s.shiftAndAppend(o,a);n.push(u)}}}if(e.getBinaryShiftByteCount()>0||Nr[e.getMode()][r]===0){let o=e.addBinaryShiftChar(t);n.push(o)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Ot,n)),e.getMode()!==Ot&&r.push(i.shiftAndAppend(Ot,n)),n===3||n===4){let s=i.latchAndAppend(Ct,16-n).latchAndAppend(Ct,1);r.push(s)}if(e.getBinaryShiftByteCount()>0){let s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(s)}}static simplifyStates(e){let t=[];for(const n of e){let r=!0;for(const i of t){if(i.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(i)&&(t=t.filter(s=>s!==i))}r&&t.push(n)}return t}}class ge{constructor(){}static encodeBytes(e){return ge.encode(e,ge.DEFAULT_EC_PERCENT,ge.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r=new Tn(e).encode(),i=X.truncDivision(r.getSize()*t,100)+11,s=r.getSize()+i,o,a,u,h,w;if(n!==ge.DEFAULT_AZTEC_LAYERS){if(o=n<0,a=Math.abs(n),a>(o?ge.MAX_NB_BITS_COMPACT:ge.MAX_NB_BITS))throw new R(re.format("Illegal value %s for layers",n));u=ge.totalBitsInLayer(a,o),h=ge.WORD_SIZE[a];let L=u-u%h;if(w=ge.stuffBits(r,h),w.getSize()+i>L)throw new R("Data to large for user specified layer");if(o&&w.getSize()>h*64)throw new R("Data to large for user specified layer")}else{h=0,w=null;for(let L=0;;L++){if(L>ge.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(o=L<=3,a=o?L+1:L,u=ge.totalBitsInLayer(a,o),s>u)continue;(w==null||h!==ge.WORD_SIZE[a])&&(h=ge.WORD_SIZE[a],w=ge.stuffBits(r,h));let fe=u-u%h;if(!(o&&w.getSize()>h*64)&&w.getSize()+i<=fe)break}}let E=ge.generateCheckWords(w,u,h),b=w.getSize()/h,I=ge.generateModeMessage(o,a,b),y=(o?11:14)+a*4,N=new Int32Array(y),M;if(o){M=y;for(let L=0;L<N.length;L++)N[L]=L}else{M=y+1+2*X.truncDivision(X.truncDivision(y,2)-1,15);let L=X.truncDivision(y,2),fe=X.truncDivision(M,2);for(let se=0;se<L;se++){let ut=se+X.truncDivision(se,15);N[L-se-1]=fe-ut-1,N[L+se]=fe+ut+1}}let F=new We(M);for(let L=0,fe=0;L<a;L++){let se=(a-L)*4+(o?9:12);for(let ut=0;ut<se;ut++){let bt=ut*2;for(let ft=0;ft<2;ft++)E.get(fe+bt+ft)&&F.set(N[L*2+ft],N[L*2+ut]),E.get(fe+se*2+bt+ft)&&F.set(N[L*2+ut],N[y-1-L*2-ft]),E.get(fe+se*4+bt+ft)&&F.set(N[y-1-L*2-ft],N[y-1-L*2-ut]),E.get(fe+se*6+bt+ft)&&F.set(N[y-1-L*2-ut],N[L*2+ft])}fe+=se*8}if(ge.drawModeMessage(F,o,M,I),o)ge.drawBullsEye(F,X.truncDivision(M,2),5);else{ge.drawBullsEye(F,X.truncDivision(M,2),7);for(let L=0,fe=0;L<X.truncDivision(y,2)-1;L+=15,fe+=16)for(let se=X.truncDivision(M,2)&1;se<M;se+=2)F.set(X.truncDivision(M,2)-fe,se),F.set(X.truncDivision(M,2)+fe,se),F.set(se,X.truncDivision(M,2)-fe),F.set(se,X.truncDivision(M,2)+fe)}let k=new oi;return k.setCompact(o),k.setSize(M),k.setLayers(a),k.setCodeWords(b),k.setMatrix(F),k}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let i=t-r;i<=t+r;i++)e.set(i,t-r),e.set(i,t+r),e.set(t-r,i),e.set(t+r,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new ie;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=ge.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=ge.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=X.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let o=i-3+s;r.get(s)&&e.set(o,i-5),r.get(s+7)&&e.set(i+5,o),r.get(20-s)&&e.set(o,i+5),r.get(27-s)&&e.set(i-5,o)}else for(let s=0;s<10;s++){let o=i-5+s+X.truncDivision(s,5);r.get(s)&&e.set(o,i-7),r.get(s+10)&&e.set(i+7,o),r.get(29-s)&&e.set(o,i+7),r.get(39-s)&&e.set(i-7,o)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new br(ge.getGF(n)),s=X.truncDivision(t,n),o=ge.bitsToWords(e,n,s);i.encode(o,s-r);let a=t%n,u=new ie;u.appendBits(0,a);for(const h of Array.from(o))u.appendBits(h,n);return u}static bitsToWords(e,t,n){let r=new Int32Array(n),i,s;for(i=0,s=e.getSize()/t;i<s;i++){let o=0;for(let a=0;a<t;a++)o|=e.get(i*t+a)?1<<t-a-1:0;r[i]=o}return r}static getGF(e){switch(e){case 4:return we.AZTEC_PARAM;case 6:return we.AZTEC_DATA_6;case 8:return we.AZTEC_DATA_8;case 10:return we.AZTEC_DATA_10;case 12:return we.AZTEC_DATA_12;default:throw new R("Unsupported word size "+e)}}static stuffBits(e,t){let n=new ie,r=e.getSize(),i=(1<<t)-2;for(let s=0;s<r;s+=t){let o=0;for(let a=0;a<t;a++)(s+a>=r||e.get(s+a))&&(o|=1<<t-1-a);(o&i)===i?(n.appendBits(o&i,t),s--):(o&i)===0?(n.appendBits(o|1,t),s--):n.appendBits(o,t)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ge.DEFAULT_EC_PERCENT=33,ge.DEFAULT_AZTEC_LAYERS=0,ge.MAX_NB_BITS=32,ge.MAX_NB_BITS_COMPACT=4,ge.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Xn{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let s=yr.ISO_8859_1,o=ge.DEFAULT_EC_PERCENT,a=ge.DEFAULT_AZTEC_LAYERS;return i!=null&&(i.has(Ge.CHARACTER_SET)&&(s=si.forName(i.get(Ge.CHARACTER_SET).toString())),i.has(Ge.ERROR_CORRECTION)&&(o=X.parseInt(i.get(Ge.ERROR_CORRECTION).toString())),i.has(Ge.AZTEC_LAYERS)&&(a=X.parseInt(i.get(Ge.AZTEC_LAYERS).toString()))),Xn.encodeLayers(e,t,n,r,s,o,a)}static encodeLayers(e,t,n,r,i,s,o){if(t!==$.AZTEC)throw new R("Can only encode AZTEC, but got "+t);let a=ge.encode(re.getBytes(e,i),s,o);return Xn.renderResult(a,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(r==null)throw new yt;let i=r.getWidth(),s=r.getHeight(),o=Math.max(t,i),a=Math.max(n,s),u=Math.min(o/i,a/s),h=(o-i*u)/2,w=(a-s*u)/2,E=new We(o,a);for(let b=0,I=w;b<s;b++,I+=u)for(let y=0,N=h;y<i;y++,N+=u)r.get(y,b)&&E.setRegion(N,I,u,u);return E}}f.AbstractExpandedDecoder=hr,f.ArgumentException=T,f.ArithmeticException=Mn,f.AztecCode=oi,f.AztecCodeReader=Pn,f.AztecCodeWriter=Xn,f.AztecDecoder=Te,f.AztecDetector=Yr,f.AztecDetectorResult=Xr,f.AztecEncoder=ge,f.AztecHighLevelEncoder=Tn,f.AztecPoint=rt,f.BarcodeFormat=$,f.Binarizer=W,f.BinaryBitmap=Q,f.BitArray=ie,f.BitMatrix=We,f.BitSource=wr,f.BrowserAztecCodeReader=cs,f.BrowserBarcodeReader=xs,f.BrowserCodeReader=Wt,f.BrowserDatamatrixCodeReader=ws,f.BrowserMultiFormatReader=Ns,f.BrowserPDF417Reader=Rs,f.BrowserQRCodeReader=Os,f.BrowserQRCodeSvgWriter=qt,f.CharacterSetECI=V,f.ChecksumException=q,f.Code128Reader=H,f.Code39Reader=Ve,f.DataMatrixDecodedBitStreamParser=kt,f.DataMatrixReader=Ut,f.DecodeHintType=ue,f.DecoderResult=gn,f.DefaultGridSampler=zr,f.DetectorResult=vn,f.EAN13Reader=Xt,f.EncodeHintType=Ge,f.Exception=C,f.FormatException=U,f.GenericGF=we,f.GenericGFPoly=ot,f.GlobalHistogramBinarizer=Xe,f.GridSampler=lr,f.GridSamplerInstance=Lt,f.HTMLCanvasElementLuminanceSource=Pt,f.HybridBinarizer=ae,f.ITFReader=Ie,f.IllegalArgumentException=R,f.IllegalStateException=yt,f.InvertedLuminanceSource=vt,f.LuminanceSource=xn,f.MathUtils=xe,f.MultiFormatOneDReader=sn,f.MultiFormatReader=ii,f.MultiFormatWriter=Ds,f.NotFoundException=v,f.OneDReader=Ue,f.PDF417DecodedBitStreamParser=D,f.PDF417DecoderErrorCorrection=Jr,f.PDF417Reader=Ke,f.PDF417ResultMetadata=ei,f.PerspectiveTransform=mt,f.PlanarYUVLuminanceSource=Rt,f.QRCodeByteMatrix=Gn,f.QRCodeDataMask=At,f.QRCodeDecodedBitStreamParser=Me,f.QRCodeDecoderErrorCorrectionLevel=Ne,f.QRCodeDecoderFormatInformation=$e,f.QRCodeEncoder=Re,f.QRCodeEncoderQRCode=jt,f.QRCodeMaskUtil=Pe,f.QRCodeMatrixUtil=ee,f.QRCodeMode=J,f.QRCodeReader=Vt,f.QRCodeVersion=K,f.QRCodeWriter=an,f.RGBLuminanceSource=Ir,f.RSS14Reader=ve,f.RSSExpandedReader=P,f.ReaderException=Hn,f.ReedSolomonDecoder=An,f.ReedSolomonEncoder=br,f.ReedSolomonException=en,f.Result=nt,f.ResultMetadataType=ze,f.ResultPoint=j,f.StringUtils=re,f.UnsupportedOperationException=$t,f.VideoInputDevice=Wr,f.WhiteRectangleDetector=Mt,f.WriterException=ye,f.ZXingArrays=ne,f.ZXingCharset=si,f.ZXingInteger=X,f.ZXingStandardCharsets=yr,f.ZXingStringBuilder=pe,f.ZXingStringEncoding=st,f.ZXingSystem=G,f.createAbstractExpandedDecoder=Kr,Object.defineProperty(f,"__esModule",{value:!0})})}(Rn,Rn.exports)),Rn.exports}var Oe=ya();const Sa=ba(Oe),Ta=Vs({__proto__:null,default:Sa},[Oe]);var Ri=function(){function c(l,f,d){if(this.formatMap=new Map([[Y.QR_CODE,Oe.BarcodeFormat.QR_CODE],[Y.AZTEC,Oe.BarcodeFormat.AZTEC],[Y.CODABAR,Oe.BarcodeFormat.CODABAR],[Y.CODE_39,Oe.BarcodeFormat.CODE_39],[Y.CODE_93,Oe.BarcodeFormat.CODE_93],[Y.CODE_128,Oe.BarcodeFormat.CODE_128],[Y.DATA_MATRIX,Oe.BarcodeFormat.DATA_MATRIX],[Y.MAXICODE,Oe.BarcodeFormat.MAXICODE],[Y.ITF,Oe.BarcodeFormat.ITF],[Y.EAN_13,Oe.BarcodeFormat.EAN_13],[Y.EAN_8,Oe.BarcodeFormat.EAN_8],[Y.PDF_417,Oe.BarcodeFormat.PDF_417],[Y.RSS_14,Oe.BarcodeFormat.RSS_14],[Y.RSS_EXPANDED,Oe.BarcodeFormat.RSS_EXPANDED],[Y.UPC_A,Oe.BarcodeFormat.UPC_A],[Y.UPC_E,Oe.BarcodeFormat.UPC_E],[Y.UPC_EAN_EXTENSION,Oe.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Ta)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=f,this.logger=d;var A=this.createZXingFormats(l),x=new Map;x.set(Oe.DecodeHintType.POSSIBLE_FORMATS,A),x.set(Oe.DecodeHintType.TRY_HARDER,!1),this.hints=x}return c.prototype.decodeAsync=function(l){var f=this;return new Promise(function(d,A){try{d(f.decode(l))}catch(x){A(x)}})},c.prototype.decode=function(l){var f=new Oe.MultiFormatReader(this.verbose,this.hints),d=new Oe.HTMLCanvasElementLuminanceSource(l),A=new Oe.BinaryBitmap(new Oe.HybridBinarizer(d)),x=f.decode(A);return{text:x.text,format:os.create(this.toHtml5QrcodeSupportedFormats(x.format)),debugData:this.createDebugData()}},c.prototype.createReverseFormatMap=function(){var l=new Map;return this.formatMap.forEach(function(f,d,A){l.set(f,d)}),l},c.prototype.toHtml5QrcodeSupportedFormats=function(l){if(!this.reverseFormatMap.has(l))throw"reverseFormatMap doesn't have ".concat(l);return this.reverseFormatMap.get(l)},c.prototype.createZXingFormats=function(l){for(var f=[],d=0,A=l;d<A.length;d++){var x=A[d];this.formatMap.has(x)?f.push(this.formatMap.get(x)):this.logger.logError("".concat(x," is not supported by")+"ZXingHtml5QrcodeShim")}return f},c.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},c}(),Na=function(c,l,f,d){function A(x){return x instanceof f?x:new f(function(p){p(x)})}return new(f||(f=Promise))(function(x,p){function S(T){try{C(d.next(T))}catch(R){p(R)}}function _(T){try{C(d.throw(T))}catch(R){p(R)}}function C(T){T.done?x(T.value):A(T.value).then(S,_)}C((d=d.apply(c,l||[])).next())})},Ra=function(c,l){var f={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},d,A,x,p;return p={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function S(C){return function(T){return _([C,T])}}function _(C){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,C[0]&&(f=0)),f;)try{if(d=1,A&&(x=C[0]&2?A.return:C[0]?A.throw||((x=A.return)&&x.call(A),0):A.next)&&!(x=x.call(A,C[1])).done)return x;switch(A=0,x&&(C=[C[0]&2,x.value]),C[0]){case 0:case 1:x=C;break;case 4:return f.label++,{value:C[1],done:!1};case 5:f.label++,A=C[1],C=[0];continue;case 7:C=f.ops.pop(),f.trys.pop();continue;default:if(x=f.trys,!(x=x.length>0&&x[x.length-1])&&(C[0]===6||C[0]===2)){f=0;continue}if(C[0]===3&&(!x||C[1]>x[0]&&C[1]<x[3])){f.label=C[1];break}if(C[0]===6&&f.label<x[1]){f.label=x[1],x=C;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(C);break}x[2]&&f.ops.pop(),f.trys.pop();continue}C=l.call(c,f)}catch(T){C=[6,T],A=0}finally{d=x=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Oi=function(){function c(l,f,d){if(this.formatMap=new Map([[Y.QR_CODE,"qr_code"],[Y.AZTEC,"aztec"],[Y.CODABAR,"codabar"],[Y.CODE_39,"code_39"],[Y.CODE_93,"code_93"],[Y.CODE_128,"code_128"],[Y.DATA_MATRIX,"data_matrix"],[Y.ITF,"itf"],[Y.EAN_13,"ean_13"],[Y.EAN_8,"ean_8"],[Y.PDF_417,"pdf417"],[Y.UPC_A,"upc_a"],[Y.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!c.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=f,this.logger=d;var A=this.createBarcodeDetectorFormats(l);if(this.detector=new BarcodeDetector(A),!this.detector)throw"BarcodeDetector detector not supported"}return c.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var l=new BarcodeDetector({formats:["qr_code"]});return typeof l<"u"},c.prototype.decodeAsync=function(l){return Na(this,void 0,void 0,function(){var f,d;return Ra(this,function(A){switch(A.label){case 0:return[4,this.detector.detect(l)];case 1:if(f=A.sent(),!f||f.length===0)throw"No barcode or QR code detected.";return d=this.selectLargestBarcode(f),[2,{text:d.rawValue,format:os.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}]}})})},c.prototype.selectLargestBarcode=function(l){for(var f=null,d=0,A=0,x=l;A<x.length;A++){var p=x[A],S=p.boundingBox.width*p.boundingBox.height;S>d&&(d=S,f=p)}if(!f)throw"No largest barcode found";return f},c.prototype.createBarcodeDetectorFormats=function(l){for(var f=[],d=0,A=l;d<A.length;d++){var x=A[d];this.formatMap.has(x)?f.push(this.formatMap.get(x)):this.logger.warn("".concat(x," is not supported by")+"BarcodeDetectorDelegate")}return{formats:f}},c.prototype.toHtml5QrcodeSupportedFormats=function(l){if(!this.reverseFormatMap.has(l))throw"reverseFormatMap doesn't have ".concat(l);return this.reverseFormatMap.get(l)},c.prototype.createReverseFormatMap=function(){var l=new Map;return this.formatMap.forEach(function(f,d,A){l.set(f,d)}),l},c.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},c}(),_i=function(c,l,f,d){function A(x){return x instanceof f?x:new f(function(p){p(x)})}return new(f||(f=Promise))(function(x,p){function S(T){try{C(d.next(T))}catch(R){p(R)}}function _(T){try{C(d.throw(T))}catch(R){p(R)}}function C(T){T.done?x(T.value):A(T.value).then(S,_)}C((d=d.apply(c,l||[])).next())})},Di=function(c,l){var f={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},d,A,x,p;return p={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function S(C){return function(T){return _([C,T])}}function _(C){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,C[0]&&(f=0)),f;)try{if(d=1,A&&(x=C[0]&2?A.return:C[0]?A.throw||((x=A.return)&&x.call(A),0):A.next)&&!(x=x.call(A,C[1])).done)return x;switch(A=0,x&&(C=[C[0]&2,x.value]),C[0]){case 0:case 1:x=C;break;case 4:return f.label++,{value:C[1],done:!1};case 5:f.label++,A=C[1],C=[0];continue;case 7:C=f.ops.pop(),f.trys.pop();continue;default:if(x=f.trys,!(x=x.length>0&&x[x.length-1])&&(C[0]===6||C[0]===2)){f=0;continue}if(C[0]===3&&(!x||C[1]>x[0]&&C[1]<x[3])){f.label=C[1];break}if(C[0]===6&&f.label<x[1]){f.label=x[1],x=C;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(C);break}x[2]&&f.ops.pop(),f.trys.pop();continue}C=l.call(c,f)}catch(T){C=[6,T],A=0}finally{d=x=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Oa=function(){function c(l,f,d,A){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=d,f&&Oi.isSupported()?(this.primaryDecoder=new Oi(l,d,A),this.secondaryDecoder=new Ri(l,d,A)):this.primaryDecoder=new Ri(l,d,A)}return c.prototype.decodeAsync=function(l){return _i(this,void 0,void 0,function(){var f;return Di(this,function(d){switch(d.label){case 0:f=performance.now(),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(l)];case 2:return[2,d.sent()];case 3:return this.possiblyLogPerformance(f),[7];case 4:return[2]}})})},c.prototype.decodeRobustlyAsync=function(l){return _i(this,void 0,void 0,function(){var f,d;return Di(this,function(A){switch(A.label){case 0:f=performance.now(),A.label=1;case 1:return A.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(l)];case 2:return[2,A.sent()];case 3:if(d=A.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(l)];throw d;case 4:return this.possiblyLogPerformance(f),[7];case 5:return[2]}})})},c.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},c.prototype.possiblyLogPerformance=function(l){if(this.verbose){var f=performance.now()-l;this.executionResults.push(f),this.executions++,this.possiblyFlushPerformanceReport()}},c.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var l=0,f=0,d=this.executionResults;f<d.length;f++){var A=d[f];l+=A}var x=l/this.executionResults.length;console.log("".concat(x," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},c}(),Gr=function(){var c=function(l,f){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,A){d.__proto__=A}||function(d,A){for(var x in A)Object.prototype.hasOwnProperty.call(A,x)&&(d[x]=A[x])},c(l,f)};return function(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");c(l,f);function d(){this.constructor=l}l.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}(),Jn=function(c,l,f,d){function A(x){return x instanceof f?x:new f(function(p){p(x)})}return new(f||(f=Promise))(function(x,p){function S(T){try{C(d.next(T))}catch(R){p(R)}}function _(T){try{C(d.throw(T))}catch(R){p(R)}}function C(T){T.done?x(T.value):A(T.value).then(S,_)}C((d=d.apply(c,l||[])).next())})},$n=function(c,l){var f={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},d,A,x,p;return p={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function S(C){return function(T){return _([C,T])}}function _(C){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,C[0]&&(f=0)),f;)try{if(d=1,A&&(x=C[0]&2?A.return:C[0]?A.throw||((x=A.return)&&x.call(A),0):A.next)&&!(x=x.call(A,C[1])).done)return x;switch(A=0,x&&(C=[C[0]&2,x.value]),C[0]){case 0:case 1:x=C;break;case 4:return f.label++,{value:C[1],done:!1};case 5:f.label++,A=C[1],C=[0];continue;case 7:C=f.ops.pop(),f.trys.pop();continue;default:if(x=f.trys,!(x=x.length>0&&x[x.length-1])&&(C[0]===6||C[0]===2)){f=0;continue}if(C[0]===3&&(!x||C[1]>x[0]&&C[1]<x[3])){f.label=C[1];break}if(C[0]===6&&f.label<x[1]){f.label=x[1],x=C;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(C);break}x[2]&&f.ops.pop(),f.trys.pop();continue}C=l.call(c,f)}catch(T){C=[6,T],A=0}finally{d=x=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},ls=function(){function c(l,f){this.name=l,this.track=f}return c.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},c.prototype.apply=function(l){var f={};f[this.name]=l;var d={advanced:[f]};return this.track.applyConstraints(d)},c.prototype.value=function(){var l=this.track.getSettings();if(this.name in l){var f=l[this.name];return f}return null},c}(),_a=function(c){Gr(l,c);function l(f,d){return c.call(this,f,d)||this}return l.prototype.min=function(){return this.getCapabilities().min},l.prototype.max=function(){return this.getCapabilities().max},l.prototype.step=function(){return this.getCapabilities().step},l.prototype.apply=function(f){var d={};d[this.name]=f;var A={advanced:[d]};return this.track.applyConstraints(A)},l.prototype.getCapabilities=function(){this.failIfNotSupported();var f=this.track.getCapabilities(),d=f[this.name];return{min:d.min,max:d.max,step:d.step}},l.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},l}(ls),Da=function(c){Gr(l,c);function l(f){return c.call(this,"zoom",f)||this}return l}(_a),Ma=function(c){Gr(l,c);function l(f){return c.call(this,"torch",f)||this}return l}(ls),Ba=function(){function c(l){this.track=l}return c.prototype.zoomFeature=function(){return new Da(this.track)},c.prototype.torchFeature=function(){return new Ma(this.track)},c}(),va=function(){function c(l,f,d){this.isClosed=!1,this.parentElement=l,this.mediaStream=f,this.callbacks=d,this.surface=this.createVideoElement(this.parentElement.clientWidth),l.append(this.surface)}return c.prototype.createVideoElement=function(l){var f=document.createElement("video");return f.style.width="".concat(l,"px"),f.style.display="block",f.muted=!0,f.setAttribute("muted","true"),f.playsInline=!0,f},c.prototype.setupSurface=function(){var l=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var f=function(){var d=l.surface.clientWidth,A=l.surface.clientHeight;l.callbacks.onRenderSurfaceReady(d,A),l.surface.removeEventListener("playing",f)};this.surface.addEventListener("playing",f),this.surface.srcObject=this.mediaStream,this.surface.play()},c.create=function(l,f,d,A){return Jn(this,void 0,void 0,function(){var x,p;return $n(this,function(S){switch(S.label){case 0:return x=new c(l,f,A),d.aspectRatio?(p={aspectRatio:d.aspectRatio},[4,x.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:S.sent(),S.label=2;case 2:return x.setupSurface(),[2,x]}})})},c.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},c.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},c.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},c.prototype.resume=function(l){this.failIfClosed();var f=this,d=function(){setTimeout(l,200),f.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.play()},c.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},c.prototype.getSurface=function(){return this.failIfClosed(),this.surface},c.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},c.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},c.prototype.applyVideoConstraints=function(l){return Jn(this,void 0,void 0,function(){return $n(this,function(f){if("aspectRatio"in l)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(l)]})})},c.prototype.close=function(){if(this.isClosed)return Promise.resolve();var l=this;return new Promise(function(f,d){var A=l.mediaStream.getVideoTracks(),x=A.length,p=0;l.mediaStream.getVideoTracks().forEach(function(S){l.mediaStream.removeTrack(S),S.stop(),++p,p>=x&&(l.isClosed=!0,l.parentElement.removeChild(l.surface),f())})})},c.prototype.getCapabilities=function(){return new Ba(this.getFirstTrackOrFail())},c}(),Pa=function(){function c(l){this.mediaStream=l}return c.prototype.render=function(l,f,d){return Jn(this,void 0,void 0,function(){return $n(this,function(A){return[2,va.create(l,this.mediaStream,f,d)]})})},c.create=function(l){return Jn(this,void 0,void 0,function(){var f,d;return $n(this,function(A){switch(A.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return f={audio:!1,video:l},[4,navigator.mediaDevices.getUserMedia(f)];case 1:return d=A.sent(),[2,new c(d)]}})})},c}(),Mi=function(c,l,f,d){function A(x){return x instanceof f?x:new f(function(p){p(x)})}return new(f||(f=Promise))(function(x,p){function S(T){try{C(d.next(T))}catch(R){p(R)}}function _(T){try{C(d.throw(T))}catch(R){p(R)}}function C(T){T.done?x(T.value):A(T.value).then(S,_)}C((d=d.apply(c,l||[])).next())})},Bi=function(c,l){var f={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},d,A,x,p;return p={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function S(C){return function(T){return _([C,T])}}function _(C){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,C[0]&&(f=0)),f;)try{if(d=1,A&&(x=C[0]&2?A.return:C[0]?A.throw||((x=A.return)&&x.call(A),0):A.next)&&!(x=x.call(A,C[1])).done)return x;switch(A=0,x&&(C=[C[0]&2,x.value]),C[0]){case 0:case 1:x=C;break;case 4:return f.label++,{value:C[1],done:!1};case 5:f.label++,A=C[1],C=[0];continue;case 7:C=f.ops.pop(),f.trys.pop();continue;default:if(x=f.trys,!(x=x.length>0&&x[x.length-1])&&(C[0]===6||C[0]===2)){f=0;continue}if(C[0]===3&&(!x||C[1]>x[0]&&C[1]<x[3])){f.label=C[1];break}if(C[0]===6&&f.label<x[1]){f.label=x[1],x=C;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(C);break}x[2]&&f.ops.pop(),f.trys.pop();continue}C=l.call(c,f)}catch(T){C=[6,T],A=0}finally{d=x=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},La=function(){function c(){}return c.failIfNotSupported=function(){return Mi(this,void 0,void 0,function(){return Bi(this,function(l){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new c]})})},c.prototype.create=function(l){return Mi(this,void 0,void 0,function(){return Bi(this,function(f){return[2,Pa.create(l)]})})},c}(),Fa=function(c,l,f,d){function A(x){return x instanceof f?x:new f(function(p){p(x)})}return new(f||(f=Promise))(function(x,p){function S(T){try{C(d.next(T))}catch(R){p(R)}}function _(T){try{C(d.throw(T))}catch(R){p(R)}}function C(T){T.done?x(T.value):A(T.value).then(S,_)}C((d=d.apply(c,l||[])).next())})},ka=function(c,l){var f={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},d,A,x,p;return p={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function S(C){return function(T){return _([C,T])}}function _(C){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,C[0]&&(f=0)),f;)try{if(d=1,A&&(x=C[0]&2?A.return:C[0]?A.throw||((x=A.return)&&x.call(A),0):A.next)&&!(x=x.call(A,C[1])).done)return x;switch(A=0,x&&(C=[C[0]&2,x.value]),C[0]){case 0:case 1:x=C;break;case 4:return f.label++,{value:C[1],done:!1};case 5:f.label++,A=C[1],C=[0];continue;case 7:C=f.ops.pop(),f.trys.pop();continue;default:if(x=f.trys,!(x=x.length>0&&x[x.length-1])&&(C[0]===6||C[0]===2)){f=0;continue}if(C[0]===3&&(!x||C[1]>x[0]&&C[1]<x[3])){f.label=C[1];break}if(C[0]===6&&f.label<x[1]){f.label=x[1],x=C;break}if(x&&f.label<x[2]){f.label=x[2],f.ops.push(C);break}x[2]&&f.ops.pop(),f.trys.pop();continue}C=l.call(c,f)}catch(T){C=[6,T],A=0}finally{d=x=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Ua=function(){function c(){}return c.retrieve=function(){if(navigator.mediaDevices)return c.getCamerasFromMediaDevices();var l=MediaStreamTrack;return MediaStreamTrack&&l.getSources?c.getCamerasFromMediaStreamTrack():c.rejectWithError()},c.rejectWithError=function(){var l=fn.unableToQuerySupportedDevices();return c.isHttpsOrLocalhost()||(l=fn.insecureContextCameraQueryError()),Promise.reject(l)},c.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var l=location.host.split(":")[0];return l==="127.0.0.1"||l==="localhost"},c.getCamerasFromMediaDevices=function(){return Fa(this,void 0,void 0,function(){var l,f,d,A,x,p,S;return ka(this,function(_){switch(_.label){case 0:return l=function(C){for(var T=C.getVideoTracks(),R=0,Q=T;R<Q.length;R++){var q=Q[R];q.enabled=!1,q.stop(),C.removeTrack(q)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return f=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(d=_.sent(),A=[],x=0,p=d;x<p.length;x++)S=p[x],S.kind==="videoinput"&&A.push({id:S.deviceId,label:S.label});return l(f),[2,A]}})})},c.getCamerasFromMediaStreamTrack=function(){return new Promise(function(l,f){var d=function(x){for(var p=[],S=0,_=x;S<_.length;S++){var C=_[S];C.kind==="video"&&p.push({id:C.id,label:C.label})}l(p)},A=MediaStreamTrack;A.getSources(d)})},c}(),Le;(function(c){c[c.UNKNOWN=0]="UNKNOWN",c[c.NOT_STARTED=1]="NOT_STARTED",c[c.SCANNING=2]="SCANNING",c[c.PAUSED=3]="PAUSED"})(Le||(Le={}));var Va=function(){function c(){this.state=Le.NOT_STARTED,this.onGoingTransactionNewState=Le.UNKNOWN}return c.prototype.directTransition=function(l){this.failIfTransitionOngoing(),this.validateTransition(l),this.state=l},c.prototype.startTransition=function(l){return this.failIfTransitionOngoing(),this.validateTransition(l),this.onGoingTransactionNewState=l,this},c.prototype.execute=function(){if(this.onGoingTransactionNewState===Le.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var l=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Le.UNKNOWN,this.directTransition(l)},c.prototype.cancel=function(){if(this.onGoingTransactionNewState===Le.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Le.UNKNOWN},c.prototype.getState=function(){return this.state},c.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Le.UNKNOWN)throw"Cannot transition to a new state, already under transition"},c.prototype.validateTransition=function(l){switch(this.state){case Le.UNKNOWN:throw"Transition from unknown is not allowed";case Le.NOT_STARTED:this.failIfNewStateIs(l,[Le.PAUSED]);break;case Le.SCANNING:break;case Le.PAUSED:break}},c.prototype.failIfNewStateIs=function(l,f){for(var d=0,A=f;d<A.length;d++){var x=A[d];if(l===x)throw"Cannot transition from ".concat(this.state," to ").concat(l)}},c}(),Ha=function(){function c(l){this.stateManager=l}return c.prototype.startTransition=function(l){return this.stateManager.startTransition(l)},c.prototype.directTransition=function(l){this.stateManager.directTransition(l)},c.prototype.getState=function(){return this.stateManager.getState()},c.prototype.canScanFile=function(){return this.stateManager.getState()===Le.NOT_STARTED},c.prototype.isScanning=function(){return this.stateManager.getState()!==Le.NOT_STARTED},c.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Le.SCANNING},c.prototype.isPaused=function(){return this.stateManager.getState()===Le.PAUSED},c}(),Ga=function(){function c(){}return c.create=function(){return new Ha(new Va)},c}(),Wa=function(){var c=function(l,f){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,A){d.__proto__=A}||function(d,A){for(var x in A)Object.prototype.hasOwnProperty.call(A,x)&&(d[x]=A[x])},c(l,f)};return function(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");c(l,f);function d(){this.constructor=l}l.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}(),xt=function(c){Wa(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.DEFAULT_WIDTH=300,l.DEFAULT_WIDTH_OFFSET=2,l.FILE_SCAN_MIN_HEIGHT=300,l.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,l.MIN_QR_BOX_SIZE=50,l.SHADED_LEFT=1,l.SHADED_RIGHT=2,l.SHADED_TOP=3,l.SHADED_BOTTOM=4,l.SHADED_REGION_ELEMENT_ID="qr-shaded-region",l.VERBOSE=!1,l.BORDER_SHADER_DEFAULT_COLOR="#ffffff",l.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",l}(Ca),Xa=function(){function c(l,f){this.logger=f,this.fps=xt.SCAN_DEFAULT_FPS,l?(l.fps&&(this.fps=l.fps),this.disableFlip=l.disableFlip===!0,this.qrbox=l.qrbox,this.aspectRatio=l.aspectRatio,this.videoConstraints=l.videoConstraints):this.disableFlip=xt.DEFAULT_DISABLE_FLIP}return c.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?as.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},c.prototype.isShadedBoxEnabled=function(){return!Bt(this.qrbox)},c.create=function(l,f){return new c(l,f)},c}(),za=function(){function c(l,f){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(l))throw"HTML Element with id=".concat(l," not found");this.elementId=l,this.verbose=!1;var d;typeof f=="boolean"?this.verbose=f===!0:f&&(d=f,this.verbose=d.verbose===!0,d.experimentalFeatures),this.logger=new pa(this.verbose),this.qrcode=new Oa(this.getSupportedFormats(f),this.getUseBarCodeDetectorIfSupported(d),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Ga.create()}return c.prototype.start=function(l,f,d,A){var x=this;if(!l)throw"cameraIdOrConfig is required";if(!d||typeof d!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;A?p=A:p=this.verbose?this.logger.log:function(){};var S=Xa.create(f,this.logger);this.clearElement();var _=!1;S.videoConstraints&&(S.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var C=_,T=document.getElementById(this.elementId);T.clientWidth?T.clientWidth:xt.DEFAULT_WIDTH,T.style.position="relative",this.shouldScan=!0,this.element=T;var R=this,Q=this.stateManagerProxy.startTransition(Le.SCANNING);return new Promise(function(q,W){var G=C?S.videoConstraints:R.createVideoConstraints(l);if(!G){Q.cancel(),W("videoConstraints should be defined");return}var Z={};(!C||S.aspectRatio)&&(Z.aspectRatio=S.aspectRatio);var Ce={onRenderSurfaceReady:function(ne,X){R.setupUi(ne,X,S),R.isScanning=!0,R.foreverScan(S,d,p)}};La.failIfNotSupported().then(function(ne){ne.create(G).then(function(X){return X.render(x.element,Z,Ce).then(function(ie){R.renderedCamera=ie,Q.execute(),q(null)}).catch(function(ie){Q.cancel(),W(ie)})}).catch(function(X){Q.cancel(),W(fn.errorGettingUserMedia(X))})}).catch(function(ne){Q.cancel(),W(fn.cameraStreamingNotSupported())})})},c.prototype.pause=function(l){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Le.PAUSED),this.showPausedState(),(Bt(l)||l!==!0)&&(l=!1),l&&this.renderedCamera&&this.renderedCamera.pause()},c.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var l=this,f=function(){l.stateManagerProxy.directTransition(Le.SCANNING),l.hidePausedState()};if(!this.renderedCamera.isPaused()){f();return}this.renderedCamera.resume(function(){f()})},c.prototype.getState=function(){return this.stateManagerProxy.getState()},c.prototype.stop=function(){var l=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var f=this.stateManagerProxy.startTransition(Le.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var d=function(){if(l.element){var x=document.getElementById(xt.SHADED_REGION_ELEMENT_ID);x&&l.element.removeChild(x)}},A=this;return this.renderedCamera.close().then(function(){return A.renderedCamera=null,A.element&&(A.element.removeChild(A.canvasElement),A.canvasElement=null),d(),A.qrRegion&&(A.qrRegion=null),A.context&&(A.context=null),f.execute(),A.hidePausedState(),A.isScanning=!1,Promise.resolve()})},c.prototype.scanFile=function(l,f){return this.scanFileV2(l,f).then(function(d){return d.decodedText})},c.prototype.scanFileV2=function(l,f){var d=this;if(!l||!(l instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Bt(f)&&(f=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(A,x){d.possiblyCloseLastScanImageFile(),d.clearElement(),d.lastScanImageFile=URL.createObjectURL(l);var p=new Image;p.onload=function(){var S=p.width,_=p.height,C=document.getElementById(d.elementId),T=C.clientWidth?C.clientWidth:xt.DEFAULT_WIDTH,R=Math.max(C.clientHeight?C.clientHeight:_,xt.FILE_SCAN_MIN_HEIGHT),Q=d.computeCanvasDrawConfig(S,_,T,R);if(f){var q=d.createCanvasElement(T,R,"qr-canvas-visible");q.style.display="inline-block",C.appendChild(q);var W=q.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=T,W.canvas.height=R,W.drawImage(p,0,0,S,_,Q.x,Q.y,Q.width,Q.height)}var G=xt.FILE_SCAN_HIDDEN_CANVAS_PADDING,Z=Math.max(p.width,Q.width),Ce=Math.max(p.height,Q.height),ne=Z+2*G,X=Ce+2*G,ie=d.createCanvasElement(ne,X);C.appendChild(ie);var De=ie.getContext("2d");if(!De)throw"Unable to get 2d context from canvas";De.canvas.width=ne,De.canvas.height=X,De.drawImage(p,0,0,S,_,G,G,Z,Ce);try{d.qrcode.decodeRobustlyAsync(ie).then(function(ue){A(Ti.createFromQrcodeResult(ue))}).catch(x)}catch(ue){x("QR code parse error, error = ".concat(ue))}},p.onerror=x,p.onabort=x,p.onstalled=x,p.onsuspend=x,p.src=URL.createObjectURL(l)})},c.prototype.clear=function(){this.clearElement()},c.getCameras=function(){return Ua.retrieve()},c.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},c.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},c.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},c.prototype.applyVideoConstraints=function(l){if(l){if(!as.isMediaStreamConstraintsValid(l,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(l)},c.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},c.prototype.getSupportedFormats=function(l){var f=[Y.QR_CODE,Y.AZTEC,Y.CODABAR,Y.CODE_39,Y.CODE_93,Y.CODE_128,Y.DATA_MATRIX,Y.MAXICODE,Y.ITF,Y.EAN_13,Y.EAN_8,Y.PDF_417,Y.RSS_14,Y.RSS_EXPANDED,Y.UPC_A,Y.UPC_E,Y.UPC_EAN_EXTENSION];if(!l||typeof l=="boolean"||!l.formatsToSupport)return f;if(!Array.isArray(l.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(l.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var d=[],A=0,x=l.formatsToSupport;A<x.length;A++){var p=x[A];Ea(p)?d.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(d.length===0)throw"None of formatsToSupport match supported values.";return d},c.prototype.getUseBarCodeDetectorIfSupported=function(l){if(Bt(l))return!0;if(!Bt(l.useBarCodeDetectorIfSupported))return l.useBarCodeDetectorIfSupported!==!1;if(Bt(l.experimentalFeatures))return!0;var f=l.experimentalFeatures;return Bt(f.useBarCodeDetectorIfSupported)?!0:f.useBarCodeDetectorIfSupported!==!1},c.prototype.validateQrboxSize=function(l,f,d){var A=this,x=d.qrbox;this.validateQrboxConfig(x);var p=this.toQrdimensions(l,f,x),S=function(C){if(C<xt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(xt.MIN_QR_BOX_SIZE,"px.")},_=function(C){return C>l&&(A.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),C=l),C};S(p.width),S(p.height),p.width=_(p.width)},c.prototype.validateQrboxConfig=function(l){if(typeof l!="number"&&typeof l!="function"&&(l.width===void 0||l.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},c.prototype.toQrdimensions=function(l,f,d){if(typeof d=="number")return{width:d,height:d};if(typeof d=="function")try{return d(l,f)}catch(A){throw new Error("qrbox config was passed as a function but it failed with unknown error"+A)}return d},c.prototype.setupUi=function(l,f,d){d.isShadedBoxEnabled()&&this.validateQrboxSize(l,f,d);var A=Bt(d.qrbox)?{width:l,height:f}:d.qrbox;this.validateQrboxConfig(A);var x=this.toQrdimensions(l,f,A);x.height>f&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=d.isShadedBoxEnabled()&&x.height<=f,S={x:0,y:0,width:l,height:f},_=p?this.getShadedRegionBounds(l,f,x):S,C=this.createCanvasElement(_.width,_.height),T={willReadFrequently:!0},R=C.getContext("2d",T);R.canvas.width=_.width,R.canvas.height=_.height,this.element.append(C),p&&this.possiblyInsertShadingElement(this.element,l,f,x),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=R,this.canvasElement=C},c.prototype.createScannerPausedUiElement=function(l){var f=document.createElement("div");f.innerText=fn.scannerPaused(),f.style.display="none",f.style.position="absolute",f.style.top="0px",f.style.zIndex="1",f.style.background="rgba(9, 9, 9, 0.46)",f.style.color="#FFECEC",f.style.textAlign="center",f.style.width="100%",l.appendChild(f),this.scannerPausedUiElement=f},c.prototype.scanContext=function(l,f){var d=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(A){return l(A.text,Ti.createFromQrcodeResult(A)),d.possiblyUpdateShaders(!0),!0}).catch(function(A){d.possiblyUpdateShaders(!1);var x=fn.codeParseError(A);return f(x,ma.createFrom(x)),!1})},c.prototype.foreverScan=function(l,f,d){var A=this;if(this.shouldScan&&this.renderedCamera){var x=this.renderedCamera.getSurface(),p=x.videoWidth/x.clientWidth,S=x.videoHeight/x.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*p,C=this.qrRegion.height*S,T=this.qrRegion.x*p,R=this.qrRegion.y*S;this.context.drawImage(x,T,R,_,C,0,0,this.qrRegion.width,this.qrRegion.height);var Q=function(){A.foreverScanTimeout=setTimeout(function(){A.foreverScan(l,f,d)},A.getTimeoutFps(l.fps))};this.scanContext(f,d).then(function(q){!q&&l.disableFlip!==!0?(A.context.translate(A.context.canvas.width,0),A.context.scale(-1,1),A.scanContext(f,d).finally(function(){Q()})):Q()}).catch(function(q){A.logger.logError("Error happend while scanning context",q),Q()})}},c.prototype.createVideoConstraints=function(l){if(typeof l=="string")return{deviceId:{exact:l}};if(typeof l=="object"){var f="facingMode",d="deviceId",A={user:!0,environment:!0},x="exact",p=function(W){if(W in A)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(W,"'")},S=Object.keys(l);if(S.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(S.length," keys");var _=Object.keys(l)[0];if(_!==f&&_!==d)throw"Only '".concat(f,"' and '").concat(d,"' ")+" are supported for 'cameraIdOrConfig'";if(_===f){var C=l.facingMode;if(typeof C=="string"){if(p(C))return{facingMode:C}}else if(typeof C=="object")if(x in C){if(p(C["".concat(x)]))return{facingMode:{exact:C["".concat(x)]}}}else throw"'facingMode' should be string or object with"+" ".concat(x," as key.");else{var T=typeof C;throw"Invalid type of 'facingMode' = ".concat(T)}}else{var R=l.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(x in R)return{deviceId:{exact:R["".concat(x)]}};throw"'deviceId' should be string or object with"+" ".concat(x," as key.")}else{var Q=typeof R;throw"Invalid type of 'deviceId' = ".concat(Q)}}}var q=typeof l;throw"Invalid type of 'cameraIdOrConfig' = ".concat(q)},c.prototype.computeCanvasDrawConfig=function(l,f,d,A){if(l<=d&&f<=A){var x=(d-l)/2,p=(A-f)/2;return{x,y:p,width:l,height:f}}else{var S=l,_=f;return l>d&&(f=d/l*f,l=d),f>A&&(l=A/f*l,f=A),this.logger.log("Image downsampled from "+"".concat(S,"X").concat(_)+" to ".concat(l,"X").concat(f,".")),this.computeCanvasDrawConfig(l,f,d,A)}},c.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var l=document.getElementById(this.elementId);l&&(l.innerHTML="")},c.prototype.possiblyUpdateShaders=function(l){this.qrMatch!==l&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(f){f.style.backgroundColor=l?xt.BORDER_SHADER_MATCH_COLOR:xt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=l)},c.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},c.prototype.createCanvasElement=function(l,f,d){var A=l,x=f,p=document.createElement("canvas");return p.style.width="".concat(A,"px"),p.style.height="".concat(x,"px"),p.style.display="none",p.id=Bt(d)?"qr-canvas":d,p},c.prototype.getShadedRegionBounds=function(l,f,d){if(d.width>l||d.height>f)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(l-d.width)/2,y:(f-d.height)/2,width:d.width,height:d.height}},c.prototype.possiblyInsertShadingElement=function(l,f,d,A){if(!(f-A.width<1||d-A.height<1)){var x=document.createElement("div");x.style.position="absolute";var p=(f-A.width)/2,S=(d-A.height)/2;if(x.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderTop="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),x.style.borderBottom="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),x.style.boxSizing="border-box",x.style.top="0px",x.style.bottom="0px",x.style.left="0px",x.style.right="0px",x.id="".concat(xt.SHADED_REGION_ELEMENT_ID),f-A.width<11||d-A.height<11)this.hasBorderShaders=!1;else{var _=5,C=40;this.insertShaderBorders(x,C,_,-_,null,0,!0),this.insertShaderBorders(x,C,_,-_,null,0,!1),this.insertShaderBorders(x,C,_,null,-_,0,!0),this.insertShaderBorders(x,C,_,null,-_,0,!1),this.insertShaderBorders(x,_,C+_,-_,null,-_,!0),this.insertShaderBorders(x,_,C+_,null,-_,-_,!0),this.insertShaderBorders(x,_,C+_,-_,null,-_,!1),this.insertShaderBorders(x,_,C+_,null,-_,-_,!1),this.hasBorderShaders=!0}l.append(x)}},c.prototype.insertShaderBorders=function(l,f,d,A,x,p,S){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=xt.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(f,"px"),_.style.height="".concat(d,"px"),A!==null&&(_.style.top="".concat(A,"px")),x!==null&&(_.style.bottom="".concat(x,"px")),S?_.style.left="".concat(p,"px"):_.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),l.appendChild(_)},c.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},c.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},c.prototype.getTimeoutFps=function(l){return 1e3/l},c}(),vi;(function(c){c[c.STATUS_DEFAULT=0]="STATUS_DEFAULT",c[c.STATUS_SUCCESS=1]="STATUS_SUCCESS",c[c.STATUS_WARNING=2]="STATUS_WARNING",c[c.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(vi||(vi={}));window.Html5Qrcode=za;
